(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d230664"],{ebb3:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container new bg with-pagination"},[l("div",{staticClass:"card"},[l("div",{staticClass:"card-title"},[l("Toolbar",{attrs:{name:e.filename}},[l("span",{staticClass:"action",on:{click:e.handleSearch}},[l("svg-icon",{attrs:{"icon-class":"search"}}),e._v(" "),l("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.search")))])],1),e._v(" "),l("span",{staticClass:"action",on:{click:function(t){return e.handlePlus()}}},[l("svg-icon",{attrs:{"icon-class":"plus"}}),e._v(" "),l("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.plus")))])],1)])],1),e._v(" "),l("div",{staticClass:"card-body"},[l("el-row",{staticClass:"filter-container",attrs:{gutter:20}},[l("el-col",{attrs:{xs:12,sm:8,md:4}},[l("el-input",{staticClass:"filter-item",attrs:{size:e.searchSize,placeholder:"编码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(t)}},model:{value:e.listQuery.code,callback:function(t){e.$set(e.listQuery,"code",t)},expression:"listQuery.code"}},[l("i",{staticClass:"el-input__icon el-icon-document",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),l("el-col",{attrs:{xs:12,sm:8,md:4}},[l("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择 - 是否有效",clearable:"",size:e.searchSize},model:{value:e.listQuery.valid,callback:function(t){e.$set(e.listQuery,"valid",t)},expression:"listQuery.valid"}},[e._l(e.validTypes,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),e._v(" "),l("svg-icon",{attrs:{slot:"prefix","class-name":"el-input__icon","icon-class":"list"},slot:"prefix"})],2)],1)],1),e._v(" "),l("div",{staticClass:"card-table"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.list,fit:"","empty-text":e.emptyText,"highlight-current-row":""}},[l("el-table-column",{attrs:{align:e.tableAlign,label:"编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.code||"-"))]}}])}),e._v(" "),l("el-table-column",{attrs:{align:e.tableAlign,label:"父编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.parentCode||"-"))]}}])}),e._v(" "),l("el-table-column",{attrs:{align:e.tableAlign,label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name||"-"))]}}])}),e._v(" "),l("el-table-column",{attrs:{align:e.tableAlign,label:"值"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.value||"-"))]}}])}),e._v(" "),l("el-table-column",{attrs:{align:e.tableAlign,label:"是否有效"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filterValid")(t.row.valid)))]}}])}),e._v(" "),l("el-table-column",{attrs:{align:e.tableAlign,label:"排序"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.sort||"-"))]}}])}),e._v(" "),l("el-table-column",{attrs:{align:e.tableAlign,label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.remark||"-"))]}}])}),e._v(" "),l("el-table-column",{attrs:{align:e.tableAlign,label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.updateTime||"-"))]}}])}),e._v(" "),l("el-table-column",{attrs:{align:e.tableAlign,label:"操作",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"top"}},[l("g-icon",{staticClass:"card-table__icon",attrs:{"icon-class":"edit"},on:{click:function(l){return e.handlePlus(t.row)}}})],1),e._v(" "),l("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top"}},[l("g-icon",{attrs:{"icon-class":"delete"},on:{click:function(l){return e.handleDelete(t.row)}}})],1)]}}])})],1)],1)],1)]),e._v(" "),l("div",{staticClass:"pagination-container"},[l("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),l("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{"append-to-body":!0,top:"15vh",title:e.dialogTitle,visible:e.dialogSettingVisible,modal:e.needModal,"close-on-click-modal":e.closeOnClickModel,width:"450px"},on:{"update:visible":function(t){e.dialogSettingVisible=t}}},[l("el-form",{ref:"dataForm",staticStyle:{width:"90%",margin:"0 auto"},attrs:{rules:e.rules,model:e.temp,size:e.formSize,"label-position":e.formAlign,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"编码",prop:"code"}},[l("el-input",{attrs:{placeholder:"必填"},model:{value:e.temp.code,callback:function(t){e.$set(e.temp,"code","string"===typeof t?t.trim():t)},expression:"temp.code"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"父编码",prop:"parentCode"}},[l("el-input",{attrs:{placeholder:"长度不超过10字符"},model:{value:e.temp.parentCode,callback:function(t){e.$set(e.temp,"parentCode","string"===typeof t?t.trim():t)},expression:"temp.parentCode"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"名称",prop:"name"}},[l("el-input",{attrs:{placeholder:"不可超过20字符"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name","string"===typeof t?t.trim():t)},expression:"temp.name"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"值",prop:"value"}},[l("el-input",{attrs:{placeholder:"长度不超过10字符"},model:{value:e.temp.value,callback:function(t){e.$set(e.temp,"value","string"===typeof t?t.trim():t)},expression:"temp.value"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"排序",prop:"sort"}},[l("el-input",{attrs:{placeholder:"请输入数字"},model:{value:e.temp.sort,callback:function(t){e.$set(e.temp,"sort",e._n(t))},expression:"temp.sort"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"备注",prop:"remark"}},[l("el-input",{attrs:{placeholder:"不可超过20字符"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark","string"===typeof t?t.trim():t)},expression:"temp.remark"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"是否有效",prop:"valid"}},[l("el-select",{attrs:{placeholder:"默认 - 请选择",clearable:""},model:{value:e.temp.valid,callback:function(t){e.$set(e.temp,"valid",t)},expression:"temp.valid"}},[l("el-option",{attrs:{label:"是",value:1}}),e._v(" "),l("el-option",{attrs:{label:"否",value:0}}),e._v(" "),l("g-icon",{staticClass:"el-input__icon",attrs:{slot:"prefix","icon-class":"list"},slot:"prefix"})],1)],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogSettingVisible=!1}}},[e._v("取消")]),e._v(" "),l("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.sending,expression:"sending"}],on:{click:e.handleSave}},[e._v("保存")])],1)],1)],1)},i=[],s=(l("55dd"),l("7f7f"),l("0a1f")),n=s["patrol"].getDictionPage,o=s["patrol"].addDiction,r=s["patrol"].delDiction,c=s["patrol"].updateDiction,u={name:"DictionaryMgr",filters:{filterValid:function(e){var t="";switch(+e){case 0:t="否";break;case 1:t="是";break;default:t="未知"}return t}},data:function(){return{filename:this.$t("route.dictionary-mgr"),validTypes:[{value:"",label:"未知"},{value:1,label:"是"},{value:0,label:"否"}],dialogTitle:"添加字典",needModal:!0,closeOnClickModel:!1,dialogSettingVisible:!1,sending:!1,emptyText:null,list:[],total:null,listLoading:!0,listQuery:{page:1,limit:10,valid:null,code:null},temp:{parentCode:"",code:"",name:"",value:"",valid:"",sort:"",remark:"",updateUser:"",createUser:""},rules:{code:[{required:!0,message:"不能为空",trigger:"blur"},{max:10,message:"长度不超过10字符",trigger:"blur"}],parentCode:[{max:10,message:"长度不超过10字符",trigger:"blur"}],value:[{required:!0,message:"不能为空",trigger:"blur"},{max:20,message:"长度不超过10字符",trigger:"blur"}],valid:[{required:!0,message:"不能为空",trigger:"blur"}],sort:[{type:"number",message:"请输入数字"}],name:[{required:!0,message:"不能为空",trigger:"blur"},{max:20,message:"长度不超过20字符",trigger:"blur"}],remark:[{max:20,message:"长度不超20过字符",trigger:"blur"}]}}},mounted:function(){this.getList()},methods:{getList:function(e){var t=this;"boolean"===typeof e&&e||(this.listQuery.page=1),this.listLoading=!0,this.emptyText="暂无数据",n(this.listQuery).then(function(e){t.list=e.data.rows,t.total=e.data.total,t.listLoading=!1},function(e){console.log(e),t.listLoading=!1,t.emptyText="网络错误"})},handleSearch:function(){this.getList()},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},handleDelete:function(e){var t=this,l=e.id;this.$confirm("是否确定删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r({ids:l}).then(function(e){t.$message.success(e.msg),t.getList()},function(e){console.log(e)})}).catch(function(){})},handlePlus:function(e){var t=this;if(e){this.dialogTitle="更新字典";var l=e.parentCode,a=e.code,i=e.name,s=e.value,n=e.valid,o=e.sort,r=e.remark,c=e.id;this.temp=Object.assign({},{parentCode:l,code:a,name:i,value:s,valid:n,sort:o,remark:r,id:c})}else this.dialogTitle="添加字典",this.temp={parentCode:"",code:"",name:"",value:"",valid:"",sort:null,remark:"",updateUser:"",createUser:""};this.dialogSettingVisible=!0,this.$nextTick(function(){t.$refs["dataForm"].clearValidate()})},handleSave:function(){var e=this;this.$refs["dataForm"].validate(function(t){var l=Object.assign({},e.temp);t&&("更新字典"===e.dialogTitle?c(l).then(function(t){e.$message.success(t.msg),e.getList(),e.sending=!1,e.dialogSettingVisible=!1},function(t){console.log(t),e.sending=!1}):o(l).then(function(t){e.$message.success(t.msg),e.getList(),e.sending=!1,e.dialogSettingVisible=!1},function(t){console.log(t),e.sending=!1}))})}}},d=u,p=l("2877"),m=Object(p["a"])(d,a,i,!1,null,"ac542514",null);t["default"]=m.exports}}]);
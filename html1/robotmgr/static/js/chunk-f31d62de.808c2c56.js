(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f31d62de"],{"2baf":function(e,t,a){"use strict";var s=a("bab4"),i=a.n(s);i.a},b9fc:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container new bg"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-title"},[a("Toolbar",{attrs:{name:e.filename}},[a("span",{staticClass:"action",on:{click:e.getList}},[a("svg-icon",{attrs:{"icon-class":"search"}}),e._v(" "),a("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.search")))])],1),e._v(" "),a("span",{staticClass:"action",on:{click:e.handlePrint}},[a("svg-icon",{attrs:{"icon-class":"print"}}),e._v(" "),a("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.print")))])],1)])],1),e._v(" "),a("div",{staticClass:"card-body"},[a("el-row",{staticClass:"filter-container",attrs:{gutter:20}},[a("el-col",{attrs:{xs:12,sm:8,md:4}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"设备类型",clearable:"",size:e.searchSize},on:{change:e.getList},model:{value:e.listQuery.type,callback:function(t){e.$set(e.listQuery,"type",t)},expression:"listQuery.type"}},[e._l(e.selectOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),e._v(" "),a("svg-icon",{attrs:{slot:"prefix","class-name":"el-input__icon","icon-class":"list"},slot:"prefix"})],2)],1),e._v(" "),a("el-col",{attrs:{xs:12,sm:8,md:4}},[a("el-date-picker",{staticClass:"filter-item",attrs:{size:e.searchSize,type:"datetime",placeholder:"开始时间",align:"right","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.listQuery.beginTime,callback:function(t){e.$set(e.listQuery,"beginTime",t)},expression:"listQuery.beginTime"}})],1),e._v(" "),a("el-col",{attrs:{xs:12,sm:8,md:4}},[a("el-date-picker",{staticClass:"filter-item",attrs:{size:e.searchSize,type:"datetime",placeholder:"结束时间",align:"right","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.listQuery.endTime,callback:function(t){e.$set(e.listQuery,"endTime",t)},expression:"listQuery.endTime"}})],1)],1),e._v(" "),a("div",{staticClass:"card-chart"},[a("v-chart",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"vchart",staticClass:"vchart",attrs:{"auto-resize":!0,options:e.computedOption}})],1)],1)])])},i=[],l=(a("ac6a"),a("456d"),a("0a1f")),r=a("ed08"),n=(a("ef97"),a("007d"),a("627c"),a("d28f"),a("0a6d"),l["patrol"].findAllHistory),c={name:"SensorsDataQuery",data:function(){var e="rgba(255,255,255,.7)",t="rgba(255,255,255,.2)",a="rgba(255, 255, 255, .1)",s=new Date;return s.setTime(s.getTime()-36e5),{list:[],listLoading:!0,pickerOptions:r["m"],listQuery:{page:1,limit:10,type:1,beginTime:Object(r["l"])(s),endTime:null},selectOptions:[{value:"",label:"设备类型"},{value:1,label:"机器人传感器温度"},{value:2,label:"机器人传感器湿度"},{value:3,label:"粮食最高温"},{value:4,label:"粮食最低温"},{value:5,label:"粮食平均温"},{value:6,label:"仓温"},{value:7,label:"仓湿"},{value:8,label:"外温"},{value:9,label:"外湿"},{value:10,label:"PH3"}],chartOptions:{dataset:{source:[[]]},color:e,textStyle:{color:e},title:{textStyle:{color:e,align:"center",fontSize:13},left:"center"},tooltip:{trigger:"axis"},grid:{left:"0%",right:"0%",bottom:"10%",containLabel:!0,backgroundColor:"transparent"},dataZoom:[{start:70,end:100,show:!0,realtime:!0,xAxisIndex:[0],borderColor:t,backgroundColor:t,dataBackground:{areaStyle:{color:"rgba(0,0,0, .8)",opacity:.5}},textStyle:{color:e}},{start:70,end:100,type:"inside",realtime:!0,xAxisIndex:[0]}],xAxis:{type:"category",axisLine:{lineStyle:{color:e}},boundaryGap:!1},yAxis:{min:"dataMin",splitNumber:.2,nameTextStyle:{color:e},axisLine:{lineStyle:{color:e}},splitLine:{show:!0,lineStyle:{color:[a],width:1,type:"dashed"}},type:"value"},series:[{type:"line"}]},filename:this.$t("route.sensors-data-query")}},computed:{computedOption:function(){var e=this.list,t=this.chartOptions,a=this.listQuery,s=a.type,i=[];if(Array.isArray(e)&&e.length>0){var l=Object.keys(e[0]);i.push(l);var r=e.map(function(e){var t=[];for(var a in e)t.push(e[a]);return t});i=i.concat(r)}var n={};if(i.length>0){var c=this.getTypeName(s),o=c.txt,u=c.suffix;n={title:{text:o,top:"4%"},grid:{top:"12%",containLabel:!0},dataset:{source:i},yAxis:{name:u},series:[{name:o,type:"line",encode:{x:"addTime",y:"currentValue"}}]}}return this._.merge({},t,n)}},mounted:function(){this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,this.list=null,n(this.listQuery).then(function(t){e.list=t.data,e.listLoading=!1},function(e){console.log(e)})},handlePrint:function(){var e=this.listQuery.type,t=this.getTypeName(e),a=this.$refs["vchart"],s=a.getDataURL({type:"jpeg"});Object(r["b"])(s,t.txt)},getTypeName:function(e){var t="",a="";switch(e){case 1:t="机器人传感器温度",a="℃";break;case 2:t="机器人传感器湿度",a="%";break;case 3:t="粮食最高温",a="℃";break;case 4:t="粮食最低温",a="℃";break;case 5:t="粮食平均温",a="℃";break;case 6:t="仓温",a="℃";break;case 7:t="仓湿",a="%";break;case 8:t="外温",a="℃";break;case 9:t="外湿",a="%";break;case 10:t="PH3",a="PPM";break}return{txt:t,suffix:a}}}},o=c,u=(a("2baf"),a("2877")),d=Object(u["a"])(o,s,i,!1,null,"acf5e746",null);t["default"]=d.exports},bab4:function(e,t,a){}}]);
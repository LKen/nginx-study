(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c66c15c"],{"44eb":function(t,e,a){},7677:function(t,e,a){"use strict";var i=a("44eb"),n=a.n(i);n.a},f540:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container new bg with-pagination"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-title"},[a("Toolbar",{attrs:{name:t.filename}},[a("span",{staticClass:"action",on:{click:t.getList}},[a("g-icon",{attrs:{"icon-class":"search"}}),t._v(" "),a("span",{staticClass:"action__desc"},[t._v(t._s(t.$t("base.search")))])],1)])],1),t._v(" "),a("div",{staticClass:"card-body"},[a("el-row",{staticClass:"filter-container",attrs:{gutter:20}},[a("el-col",{attrs:{xs:12,sm:8,md:4}},[a("el-input",{staticClass:"filter-item",attrs:{size:t.searchSize,placeholder:"单位名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getList(e)}},model:{value:t.listQuery.companyName,callback:function(e){t.$set(t.listQuery,"companyName","string"===typeof e?e.trim():e)},expression:"listQuery.companyName"}},[a("g-icon",{staticClass:"el-input__icon",attrs:{slot:"prefix","icon-class":"user"},slot:"prefix"})],1)],1)],1),t._v(" "),a("div",{staticClass:"card-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"dataTable",staticStyle:{width:"100%"},attrs:{data:t.list,"row-key":t.rowKey,fit:"","empty-text":t.emptyText,"highlight-current-row":""}},[a("el-table-column",{attrs:{align:t.tableAlign,label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("defaultValue")(e.row.companyName)))]}}])}),t._v(" "),a("el-table-column",{attrs:{align:t.tableAlign,label:"编码"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("defaultValue")(e.row.companyCode)))]}}])}),t._v(" "),a("el-table-column",{attrs:{align:t.tableAlign,label:"修改时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("parseTime")(e.row.updateTime)))]}}])}),t._v(" "),a("el-table-column",{attrs:{align:t.tableAlign,label:"操作",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"gosuncn-icon el-icon-ext-set card-table__icon",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.handleSet(e.row)}}})]}}])})],1)],1)],1)]),t._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{"append-to-body":!0,top:"25vh",title:t.dialogTitle,visible:t.dialogVisible,modal:t.needModal,"close-on-click-modal":t.closeOnClickModel,width:"500px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"70%",margin:"0 auto"},attrs:{model:t.temp,"label-position":t.formAlign,size:t.formSize,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"人脸识别系统",prop:"faceSystem",rules:{required:!0,message:"人脸识别系统不能为空",trigger:"blur"}}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:t.temp.faceSystem,callback:function(e){t.$set(t.temp,"faceSystem",e)},expression:"temp.faceSystem"}},t._l(t.sysList,function(t){return a("el-option",{key:t.key,attrs:{label:t.value,value:t.key}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.sending,expression:"sending"}],on:{click:t.handleSave}},[t._v("保存")])],1)],1)],1)},n=[],s=a("0a1f"),l=s["user"].editCustomerCompany,o=s["user"].selectCustomerCompany,c=s["face"].getFaceSystem,r={name:"UnitMgr",data:function(){return{filename:this.$t("route.unit-mgr"),emptyText:null,list:[],total:null,listLoading:!0,listQuery:{page:1,limit:10,companyName:null},sysList:[],dialogTitle:"编辑单位配置",needModal:!0,closeOnClickModel:!1,dialogVisible:!1,sending:!1,temp:{id:"",companyName:"",companyCode:"",faceSystem:""}}},created:function(){},mounted:function(){this.getList(),this.getSysList()},methods:{getList:function(){var t=this;this.listLoading=!0,this.emptyText=null,o(this.listQuery).then(function(e){t.list=e.data.rows,t.total=e.data.total,t.listLoading=!1},function(e){console.log(e),t.listLoading=!1,t.emptyText="网络错误"})},getSysList:function(){var t=this;c().then(function(e){t.sysList=e.data})},rowKey:function(t){return t.id},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},handleSet:function(t){var e=this,a=t.id,i=t.faceSystem,n=t.companyName,s=t.companyCode;this.temp=Object.assign(this.temp,{id:a,faceSystem:i,companyName:n,companyCode:s}),this.dialogVisible=!0,this.$nextTick(function(){e.$refs["dataForm"]&&e.$refs["dataForm"].clearValidate()})},handleSave:function(){var t=this;this.$refs["dataForm"].validate(function(e){e&&(t.sending=!0,l(t.temp).then(function(e){t.sending=!1,t.$message.success(e.msg),t.dialogVisible=!1},function(e){t.sending=!1,console.log(e)}))})}}},d=r,u=(a("7677"),a("2877")),m=Object(u["a"])(d,i,n,!1,null,"f08d8cbc",null);e["default"]=m.exports}}]);
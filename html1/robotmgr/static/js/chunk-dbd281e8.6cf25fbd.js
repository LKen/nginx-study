(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dbd281e8"],{"293e5":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container new bg"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-title"},[a("div",{staticClass:"g-toolbar g-toolbar--inner",staticStyle:{"margin-bottom":"0"}},[a("div",{staticClass:"g-toolbar__label"},[t._v(t._s(t.filename))]),t._v(" "),a("div",{staticClass:"g-toolbar__actions"},[a("span",{staticClass:"action",on:{click:t.getList}},[a("svg-icon",{attrs:{"icon-class":"search"}}),t._v(" "),a("span",{staticClass:"action__desc"},[t._v(t._s(t.$t("base.search")))])],1),t._v(" "),a("span",{staticClass:"action",on:{click:t.handlePrint}},[a("svg-icon",{attrs:{"icon-class":"print"}}),t._v(" "),a("span",{staticClass:"action__desc"},[t._v(t._s(t.$t("base.print")))])],1)])])]),t._v(" "),a("div",{staticClass:"card-body"},[a("el-row",{staticClass:"filter-container",attrs:{gutter:20}},[a("el-col",{attrs:{xs:12,sm:8,md:4}},[a("el-date-picker",{staticClass:"filter-item",attrs:{size:t.formSize,"picker-options":t.pickerOptions,type:"date",placeholder:"开始时间",align:"right","value-format":"yyyy-MM-dd"},model:{value:t.listQuery.beginDate,callback:function(e){t.$set(t.listQuery,"beginDate",e)},expression:"listQuery.beginDate"}})],1),t._v(" "),a("el-col",{attrs:{xs:12,sm:8,md:4}},[a("el-date-picker",{staticClass:"filter-item",attrs:{size:t.formSize,"picker-options":t.pickerOptions,type:"date",placeholder:"结束时间",align:"right","value-format":"yyyy-MM-dd"},model:{value:t.listQuery.endDate,callback:function(e){t.$set(t.listQuery,"endDate",e)},expression:"listQuery.endDate"}})],1)],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"card-chart"},[a("bar",{ref:"bar",attrs:{"data-source":t.computedChartOption},on:{click:t.handleBarClick}})],1)],1)])])},r=[],s=(a("a481"),a("ac6a"),a("456d"),a("0a1f")),n=a("ed08"),o=a("b40f"),l=s["patrol"].patrolReportCount,c={name:"PatrolReport",components:{bar:o["a"]},data:function(){var t=new Date;return t.setTime(t.getTime()-2592e6),{list:[],listLoading:!0,formSize:"small",pickerOptions:n["m"],listQuery:{beginDate:Object(n["l"])(t,"{y}-{m}-{d}"),endDate:null},selectOptions:[],filename:this.$t("route.patrol-report")}},computed:{computedChartOption:function(){var t=this.list,e=[];if(Array.isArray(t)&&t.length>0){var a=Object.keys(t[0]);e.push(a);var i=t.map(function(t){var e=[];for(var a in t)"recordTime"===a?e.push(Object(n["l"])(t[a],"{y}-{m}-{d}")):e.push(t[a]);return e});e=e.concat(i)}return{title:{text:"日常巡逻概况",left:"center",top:"3%"},grid:{top:"12%",left:"3%",right:"3%",bottom:"10%"},dataset:{source:e},tooltip:{formatter:function(t){var e=t.seriesName,a=t.data[t.dimensionNames.indexOf("recordTime")],i=t.data[t.dimensionNames.indexOf("total")];return"<div>".concat(e,"<br>")+'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:rgba(255,255,255,.7);"></span>日期: '.concat(a,"<br>")+'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:rgba(255,255,255,.7);"></span>数量: '.concat(i,"<br>")+"<hr>点击查看报表详情"}},yAxis:{name:"报表数量"},dataZoom:[{left:"3%",right:"3%",start:0,end:100,show:!0,realtime:!0,xAxisIndex:[0],borderColor:"rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.2)",dataBackground:{areaStyle:{color:"rgba(0,0,0, .8)",opacity:.5}},textStyle:{color:"rgba(255,255,255,.7)"}}],series:[{name:"巡逻概要",type:"bar",barMaxWidth:25,barMinHeight:10,label:{show:!0,position:"top"},encode:{x:"recordTime",y:"total"}}]}}},mounted:function(){var t=this.$route.query,e=t.beginDate,a=t.endDate;e&&(this.listQuery.beginDate=Object(n["l"])(e,"{y}-{m}-{d}")),a&&(this.listQuery.endDate=Object(n["l"])(a,"{y}-{m}-{d}")),this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,this.list=null,l(this.listQuery).then(function(e){t.list=e.data,t.listLoading=!1},function(t){console.log(t)})},handlePrint:function(){var t=this.$refs["bar"].$refs["vchart"],e=t.getDataURL({type:"jpeg"});Object(n["b"])(e,this.filename+"概要")},handleBarClick:function(t){var e=t.data[t.dimensionNames.indexOf("recordTime")];this.$router.replace({path:"/data-center/data-report/patrol-report-detail",query:this._.assign({calendar:e},this.listQuery)})}}},d=c,p=(a("9d42"),a("2877")),u=Object(p["a"])(d,i,r,!1,null,"4166a030",null);e["default"]=u.exports},"3de0":function(t,e,a){},"9d42":function(t,e,a){"use strict";var i=a("3de0"),r=a.n(i);r.a}}]);
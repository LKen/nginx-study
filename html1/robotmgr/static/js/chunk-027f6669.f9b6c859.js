(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-027f6669"],{2864:function(e,t,i){},"570f":function(e,t,i){"use strict";var l=i("2864"),a=i.n(l);a.a},e232:function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container new bg with-pagination"},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-title"},[i("Toolbar",{attrs:{name:e.filename}},[i("span",{staticClass:"action",on:{click:e.getList}},[i("svg-icon",{attrs:{"icon-class":"search"}}),e._v(" "),i("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.search")))])],1),e._v(" "),i("span",{staticClass:"action",on:{click:function(t){return e.openDialogForIssue(3)}}},[i("svg-icon",{attrs:{"icon-class":"delete"}}),e._v(" "),i("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.delete")+"机器人的人脸库"))])],1),e._v(" "),i("span",{staticClass:"action",on:{click:function(t){return e.openDialogForIssue(0)}}},[i("svg-icon",{attrs:{"icon-class":"issue"}}),e._v(" "),i("span",{staticClass:"action__desc"},[e._v("增量下发到机器人")])],1),e._v(" "),i("span",{staticClass:"action",on:{click:function(t){return e.openDialogForIssue(1)}}},[i("svg-icon",{attrs:{"icon-class":"issue"}}),e._v(" "),i("span",{staticClass:"action__desc"},[e._v("全量下发到机器人")])],1),e._v(" "),i("span",{staticClass:"action",on:{click:e.handlePlus}},[i("svg-icon",{attrs:{"icon-class":"plus"}}),e._v(" "),i("span",{staticClass:"action__desc"},[e._v("注册")])],1),e._v(" "),i("span",{staticClass:"action",on:{click:e.handleExport}},[i("svg-icon",{attrs:{"icon-class":"export"}}),e._v(" "),i("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.export")))])],1),e._v(" "),i("span",{staticClass:"action",on:{click:e.handleImportMore}},[i("svg-icon",{attrs:{"icon-class":"import-more"}}),e._v(" "),i("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.importMore")))])],1)])],1),e._v(" "),i("h6",{staticClass:"card-subtitle"},[e._v("可动态添加、编辑人员类型，以及注册、配置人脸相关信息设置")]),e._v(" "),i("div",{staticClass:"card-body"},[i("el-row",{staticClass:"filter-container",attrs:{gutter:20}},[i("el-col",{attrs:{xs:12,sm:8,md:4}},[i("el-input",{staticClass:"filter-item",attrs:{size:e.searchSize,placeholder:"姓名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(t)}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name","string"===typeof t?t.trim():t)},expression:"listQuery.name"}},[i("i",{staticClass:"el-input__icon el-icon-ext-user",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),i("el-col",{attrs:{xs:12,sm:8,md:4}},[i("el-select",{staticClass:"filter-item",attrs:{placeholder:"人员类型",clearable:"",size:e.searchSize},on:{change:e.getList},model:{value:e.listQuery.personTypeCode,callback:function(t){e.$set(e.listQuery,"personTypeCode",t)},expression:"listQuery.personTypeCode"}},[e._l(e.typeList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.code}})}),e._v(" "),i("svg-icon",{attrs:{slot:"prefix","class-name":"el-input__icon","icon-class":"list"},slot:"prefix"})],2)],1),e._v(" "),i("el-col",{attrs:{xs:12,sm:8,md:4}},[i("el-input",{staticClass:"filter-item",attrs:{size:e.searchSize,placeholder:"年龄",type:"number",min:"0"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(t)}},model:{value:e.listQuery.age,callback:function(t){e.$set(e.listQuery,"age",e._n(t))},expression:"listQuery.age"}},[i("i",{staticClass:"el-input__icon el-icon-document",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),i("el-col",{attrs:{xs:12,sm:8,md:4}},[i("el-select",{staticClass:"filter-item",attrs:{placeholder:"注册类型",size:e.searchSize,clearable:""},on:{change:e.getList},model:{value:e.listQuery.certificateType,callback:function(t){e.$set(e.listQuery,"certificateType",t)},expression:"listQuery.certificateType"}},[i("el-option",{attrs:{label:"身份证",value:0}}),e._v(" "),i("el-option",{attrs:{label:"员工证",value:1}}),e._v(" "),i("svg-icon",{attrs:{slot:"prefix","class-name":"el-input__icon","icon-class":"list"},slot:"prefix"})],1)],1),e._v(" "),i("el-col",{attrs:{xs:12,sm:8,md:4}},[i("el-select",{staticClass:"filter-item",attrs:{placeholder:"性别",size:e.searchSize,clearable:""},on:{change:e.getList},model:{value:e.listQuery.gender,callback:function(t){e.$set(e.listQuery,"gender",t)},expression:"listQuery.gender"}},[i("el-option",{attrs:{label:"女",value:0}}),e._v(" "),i("el-option",{attrs:{label:"男",value:1}}),e._v(" "),i("svg-icon",{attrs:{slot:"prefix","class-name":"el-input__icon","icon-class":"list"},slot:"prefix"})],1)],1),e._v(" "),i("el-col",{attrs:{xs:12,sm:8,md:4}},[i("el-select",{staticClass:"filter-item",attrs:{placeholder:"分组",clearable:"",size:e.searchSize},on:{change:e.getList},model:{value:e.listQuery.groupId,callback:function(t){e.$set(e.listQuery,"groupId",t)},expression:"listQuery.groupId"}},[e._l(e.groupList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),e._v(" "),i("svg-icon",{attrs:{slot:"prefix","class-name":"el-input__icon","icon-class":"list"},slot:"prefix"})],2)],1)],1),e._v(" "),i("div",{staticClass:"card-table"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"dataTable",staticStyle:{width:"100%"},attrs:{data:e.list,"row-key":e.rowKey,fit:"","empty-text":e.emptyText,"highlight-current-row":""}},[i("el-table-column",{attrs:{align:e.tableAlign,label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("defaultValue")(t.row.name)))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:e.tableAlign,label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filterGender")(t.row.gender)))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:e.tableAlign,label:"年龄"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("defaultValue")(t.row.age)))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:e.tableAlign,label:"注册类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("defaultValue")(t.row.type)))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:e.tableAlign,label:"证件类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filterCertificateType")(t.row.certificateType)))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:e.tableAlign,label:"证件号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("defaultValue")(t.row.certificateId)))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:e.tableAlign,label:"注册时间",width:"170px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("defaultValue")(t.row.registrationTime)))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:e.tableAlign,label:"注册图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("fancyBox",{staticStyle:{margin:"2px"},attrs:{url:e.row.picUrl}})]}}])}),e._v(" "),i("el-table-column",{attrs:{align:e.tableAlign,label:"人员类型",prop:"personTypeCode",formatter:e.formatterPersonType}}),e._v(" "),i("el-table-column",{attrs:{align:e.tableAlign,label:"分组名称",prop:"groupId",formatter:e.formatterGroup}}),e._v(" "),i("el-table-column",{attrs:{align:e.tableAlign,label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("i",{staticClass:"gosuncn-icon el-icon-ext-edit card-table__icon",staticStyle:{cursor:"pointer"},on:{click:function(i){return e.handleEdit(t.row)}}}),e._v(" "),i("i",{staticClass:"gosuncn-icon  el-icon-ext-delete card-table__icon",staticStyle:{cursor:"pointer"},on:{click:function(i){return e.handleDelete(t.row)}}})]}}])})],1)],1)],1)]),e._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{"append-to-body":!0,top:"15vh",title:e.dialogTitle,visible:e.dialogVisible,modal:e.needModal,"close-on-click-modal":e.closeOnClickModel,width:"450px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"dataForm",staticStyle:{width:"85%",margin:"0 auto"},attrs:{rules:e.rules,size:e.formSize,model:e.temp,"label-position":e.formAlign,"label-width":"110px"}},[i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{attrs:{placeholder:""},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name","string"===typeof t?t.trim():t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"年龄",prop:"age"}},[i("el-input",{attrs:{placeholder:""},model:{value:e.temp.age,callback:function(t){e.$set(e.temp,"age","string"===typeof t?t.trim():t)},expression:"temp.age"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"性别",prop:"gender"}},[i("el-select",{attrs:{placeholder:"默认 - 请选择"},model:{value:e.temp.gender,callback:function(t){e.$set(e.temp,"gender",t)},expression:"temp.gender"}},[i("el-option",{attrs:{label:"女",value:0}}),e._v(" "),i("el-option",{attrs:{label:"男",value:1}}),e._v(" "),i("g-icon",{staticClass:"el-input__icon",attrs:{slot:"prefix","icon-class":"list"},slot:"prefix"})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"人员类型",prop:"personTypeCode"}},[i("div",{staticClass:"g-search-group g-search-group--append",staticStyle:{width:"100%"}},[i("el-select",{attrs:{placeholder:"默认 - 请选择",clearable:""},model:{value:e.temp.personTypeCode,callback:function(t){e.$set(e.temp,"personTypeCode",t)},expression:"temp.personTypeCode"}},[e._l(e.typeList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.code}})}),e._v(" "),i("g-icon",{staticClass:"el-input__icon",attrs:{slot:"prefix","icon-class":"list"},slot:"prefix"})],2),e._v(" "),i("div",{staticClass:"g-search-group__append",staticStyle:{cursor:"pointer"},on:{click:function(t){e.dialogPersonTypeVisible=!0}}},[e._v("管理")])],1)]),e._v(" "),i("el-form-item",{attrs:{label:"证件类型",prop:"certificateType"}},[i("el-select",{attrs:{placeholder:"默认 - 请选择",clearable:""},model:{value:e.temp.certificateType,callback:function(t){e.$set(e.temp,"certificateType",t)},expression:"temp.certificateType"}},[i("el-option",{attrs:{label:"身份证",value:0}}),e._v(" "),i("el-option",{attrs:{label:"员工证",value:1}}),e._v(" "),i("g-icon",{staticClass:"el-input__icon",attrs:{slot:"prefix","icon-class":"list"},slot:"prefix"})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"证件号",prop:"certificateId"}},[i("el-input",{attrs:{placeholder:""},model:{value:e.temp.certificateId,callback:function(t){e.$set(e.temp,"certificateId","string"===typeof t?t.trim():t)},expression:"temp.certificateId"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"分组",prop:"groupId"}},[i("div",{staticClass:"g-search-group g-search-group--append",staticStyle:{width:"100%"}},[i("el-select",{attrs:{placeholder:"默认 - 请选择",clearable:""},model:{value:e.temp.groupId,callback:function(t){e.$set(e.temp,"groupId",t)},expression:"temp.groupId"}},[e._l(e.groupList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),e._v(" "),i("g-icon",{staticClass:"el-input__icon",attrs:{slot:"prefix","icon-class":"list"},slot:"prefix"})],2),e._v(" "),i("div",{staticClass:"g-search-group__append",staticStyle:{cursor:"pointer"},on:{click:function(t){e.dialogGroupVisible=!0}}},[e._v("管理")])],1)]),e._v(" "),i("el-form-item",{attrs:{label:"上传人脸照片",prop:"picUrl"}},[i("el-input",{staticClass:"form-item",attrs:{placeholder:"",disabled:!0},model:{value:e.temp.picUrl,callback:function(t){e.$set(e.temp,"picUrl","string"===typeof t?t.trim():t)},expression:"temp.picUrl"}},[i("template",{slot:"append"},[i("span",{staticClass:"form-item__uploadTxt",on:{click:e.handleUploadFile}},[e._v("上传文件")]),e._v(" "),i("input",{staticClass:"form-item__upload",attrs:{type:"file",accept:".jpg,.png,.jpeg,.gif",name:"txt"},on:{change:function(t){return e.handleFileChange(t)}}})])],2)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.sending,expression:"sending"}],on:{click:e.handleSave}},[e._v("保存")])],1)],1),e._v(" "),i("el-dialog",{attrs:{"append-to-body":!0,top:"25vh",title:e.dialogTypeTitle,visible:e.dialogTypeVisible,modal:e.needModal,"close-on-click-modal":e.closeOnClickModel,width:"450px"},on:{"update:visible":function(t){e.dialogTypeVisible=t}}},[i("el-form",{ref:"dataForm2",staticStyle:{width:"90%",margin:"0 auto"},attrs:{rules:e.rules,model:e.temp2,size:e.formSize,"label-position":e.formAlign,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"类型名称",prop:"name"}},[i("el-input",{attrs:{placeholder:""},model:{value:e.temp2.name,callback:function(t){e.$set(e.temp2,"name","string"===typeof t?t.trim():t)},expression:"temp2.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"类型编码",prop:"code"}},[i("el-input",{attrs:{placeholder:""},model:{value:e.temp2.code,callback:function(t){e.$set(e.temp2,"code","string"===typeof t?t.trim():t)},expression:"temp2.code"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"描述",prop:"description"}},[i("el-input",{attrs:{placeholder:""},model:{value:e.temp2.description,callback:function(t){e.$set(e.temp2,"description","string"===typeof t?t.trim():t)},expression:"temp2.description"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogTypeVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.sending,expression:"sending"}],on:{click:e.handleSaveType}},[e._v("保存")])],1)],1),e._v(" "),i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{"custom-class":"personType-dialog","append-to-body":!0,top:"20vh",title:"人员类型管理",visible:e.dialogPersonTypeVisible,modal:e.needModal,"close-on-click-modal":e.closeOnClickModel,width:"400px"},on:{"update:visible":function(t){e.dialogPersonTypeVisible=t}}},[i("div",{staticClass:"face"},[i("transition-group",{staticClass:"face__lists",attrs:{mode:"out-in",name:"flip-list-left",tag:"ul"}},e._l(e.typeList,function(t){return i("li",{key:t.id,staticClass:"face__listItem"},[i("div",{staticClass:"face__listItem-name"},[e._v(e._s(e._f("defaultValue")(t.name)))]),e._v(" "),"bmd"!==t.code&&"hmd"!==t.code&&"vip"!==t.code?i("div",{staticClass:"face__listItem-actions"},[i("g-icon",{attrs:{"icon-class":"edit"},on:{click:function(i){return e.handleTypeEdit(t)}}}),e._v(" "),i("g-icon",{attrs:{"icon-class":"delete"},on:{click:function(i){return e.handleTypeDelete(t)}}})],1):e._e()])}),0)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.handleTypePlus}},[e._v("添加")]),e._v(" "),i("el-button",{on:{click:function(t){e.dialogPersonTypeVisible=!1}}},[e._v("关闭")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{"custom-class":"personType-dialog","append-to-body":!0,top:"15vh",title:"分组管理",visible:e.dialogGroupVisible,modal:e.needModal,"close-on-click-modal":e.closeOnClickModel,width:"700px"},on:{"update:visible":function(t){e.dialogGroupVisible=t}}},[i("el-dialog",{attrs:{"append-to-body":!0,top:"25vh",title:e.dialogGroupTitle,visible:e.dialogGroupEditVisible,modal:e.needModal,"close-on-click-modal":e.closeOnClickModel,width:"400px"},on:{"update:visible":function(t){e.dialogGroupEditVisible=t}}},[i("el-form",{ref:"groupForm",staticStyle:{width:"90%",margin:"0 auto"},attrs:{model:e.temp5,size:e.formSize,"label-position":e.formAlign,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"分组名称",prop:"name",rules:{required:!0,message:"分组名称不能为空",trigger:"blur"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.temp5.name,callback:function(t){e.$set(e.temp5,"name","string"===typeof t?t.trim():t)},expression:"temp5.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"描述",prop:"description",rules:{required:!0,message:"描述不能为空",trigger:"blur"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.temp5.description,callback:function(t){e.$set(e.temp5,"description","string"===typeof t?t.trim():t)},expression:"temp5.description"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogGroupEditVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.sending,expression:"sending"}],attrs:{disabled:e.sending},on:{click:e.sendGroup}},[e._v("保存")])],1)],1),e._v(" "),i("el-row",{staticClass:"filter-container",attrs:{gutter:20}},[i("el-col",{attrs:{sm:8}},[i("el-input",{staticClass:"filter-item",attrs:{size:e.searchSize,placeholder:"分组名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getGroupList(t)}},model:{value:e.listQuery2.name,callback:function(t){e.$set(e.listQuery2,"name","string"===typeof t?t.trim():t)},expression:"listQuery2.name"}},[i("i",{staticClass:"el-input__icon el-icon-ext-user",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),i("el-col",{attrs:{sm:4}},[i("el-button",{attrs:{size:e.searchSize,type:"primary"},on:{click:e.getGroupList}},[e._v("搜索")])],1)],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.groupList,"row-key":e.rowKey,fit:"",border:"","empty-text":e.emptyText,"highlight-current-row":"","max-height":300}},[i("el-table-column",{attrs:{align:e.tableAlign,label:"分组名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("defaultValue")(t.row.name)))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:e.tableAlign,label:"描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("defaultValue")(t.row.description)))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:e.tableAlign,label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("defaultValue")(t.row.addTime)))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:e.tableAlign,label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("i",{staticClass:"gosuncn-icon el-icon-ext-edit card-table__icon",staticStyle:{cursor:"pointer"},on:{click:function(i){return e.handleGroupEdit(t.row)}}}),e._v(" "),i("i",{staticClass:"gosuncn-icon  el-icon-ext-delete card-table__icon",staticStyle:{cursor:"pointer"},on:{click:function(i){return e.handleGroupDelete(t.row)}}})]}}])})],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.handleGroupCreate}},[e._v("添加")]),e._v(" "),i("el-button",{on:{click:function(t){e.dialogGroupVisible=!1}}},[e._v("关闭")])],1)],1),e._v(" "),i("el-dialog",{attrs:{"append-to-body":!0,top:"25vh",title:e.dialogTitle,visible:e.dialogVisible3,modal:e.needModal,"close-on-click-modal":e.closeOnClickModel,width:"450px"},on:{"update:visible":function(t){e.dialogVisible3=t}}},[i("el-form",{ref:"dataForm3",staticStyle:{width:"90%",margin:"0 auto"},attrs:{rules:e.rules,model:e.temp3,size:e.formSize,"label-position":e.formAlign,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"类型名称",prop:"type"}},[i("el-select",{attrs:{placeholder:"默认 - 请选择"},on:{change:e.handleBatchTpyeChange},model:{value:e.temp3.type,callback:function(t){e.$set(e.temp3,"type",t)},expression:"temp3.type"}},[i("el-option",{attrs:{label:"图片文件",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"excel",value:"2"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"人员类型",prop:"personTypeCode"}},[i("div",{staticClass:"g-search-group g-search-group--append",staticStyle:{width:"100%"}},[i("el-select",{staticClass:"g-search-group__inner",attrs:{placeholder:"默认 - 请选择",clearable:""},model:{value:e.temp3.personTypeCode,callback:function(t){e.$set(e.temp3,"personTypeCode",t)},expression:"temp3.personTypeCode"}},[e._l(e.typeList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.code}})}),e._v(" "),i("g-icon",{staticClass:"el-input__icon",attrs:{slot:"prefix","icon-class":"list"},slot:"prefix"})],2),e._v(" "),i("div",{staticClass:"g-search-group__append",staticStyle:{cursor:"pointer"},on:{click:function(t){e.dialogPersonTypeVisible=!0}}},[e._v("管理")])],1)]),e._v(" "),i("el-form-item",{attrs:{label:"分组",prop:"groupId"}},[i("div",{staticClass:"g-search-group g-search-group--append",staticStyle:{width:"100%"}},[i("el-select",{staticClass:"g-search-group__inner",attrs:{placeholder:"默认 - 请选择",clearable:""},model:{value:e.temp3.groupId,callback:function(t){e.$set(e.temp3,"groupId",t)},expression:"temp3.groupId"}},[e._l(e.groupList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),e._v(" "),i("g-icon",{staticClass:"el-input__icon",attrs:{slot:"prefix","icon-class":"list"},slot:"prefix"})],2),e._v(" "),i("div",{staticClass:"g-search-group__append",staticStyle:{cursor:"pointer"},on:{click:function(t){e.dialogGroupVisible=!0}}},[e._v("管理")])],1)]),e._v(" "),i("el-form-item",{attrs:{label:"文件",prop:"filename",error:e.fileErrorTxt}},[i("el-input",{staticClass:"form-item",attrs:{placeholder:"",disabled:!0},model:{value:e.temp3.filename,callback:function(t){e.$set(e.temp3,"filename","string"===typeof t?t.trim():t)},expression:"temp3.filename"}},[i("template",{slot:"append"},[i("span",{staticClass:"form-item__uploadTxt",on:{click:e.handleUploadFile}},[e._v("上传文件")]),e._v(" "),i("input",{staticClass:"form-item__upload",attrs:{type:"file",multiple:"1"===e.temp3.type,accept:"1"===e.temp3.type?".png,.jpg,.jpeg":".xls,.xlsx",name:"txt"},on:{change:function(t){return e.handleFileChange2(t)}}})])],2)],1),e._v(" "),e.showProgress?i("el-form-item",{attrs:{label:"进度"}},[i("div",{staticClass:"file-progress"},[i("el-progress",{staticStyle:{display:"inline-block",width:"220px"},attrs:{percentage:e.fileProgress,color:e.customColorMethod}}),e._v(" "),i("span",{staticStyle:{"vertical-align":"middle","margin-left":"10px"}},[e._v(e._s(e.uploadedFilesLength)+"/"+e._s(e.allFilesLength))])],1)]):e._e()],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible3=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.sending,expression:"sending"}],on:{click:e.handleSaveFile}},[e._v("保存")])],1)],1),e._v(" "),i("el-dialog",{attrs:{"append-to-body":!0,top:"25vh",title:e.dialogIssueTitle,visible:e.dialogIssueVisible,modal:e.needModal,"close-on-click-modal":e.closeOnClickModel,width:"450px"},on:{"update:visible":function(t){e.dialogIssueVisible=t}}},[i("el-form",{ref:"faceDatabaseForm",staticStyle:{width:"90%",margin:"0 auto"},attrs:{model:e.temp4,size:e.formSize,"label-position":e.formAlign,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"下发的机器人",prop:"deviceId",rules:{required:!0,message:"机器人不能为空",trigger:"change"}}},[i("el-select",{attrs:{placeholder:"默认 - 请选择",clearable:""},model:{value:e.temp4.deviceId,callback:function(t){e.$set(e.temp4,"deviceId",t)},expression:"temp4.deviceId"}},e._l(e.robotsList,function(e){return i("el-option",{key:e.deviceId,attrs:{label:e.robotName,value:e.deviceId}})}),1)],1),e._v(" "),3!==e.temp4.type?i("el-form-item",{attrs:{label:"人员分组",prop:"groupIds",rules:{required:!0,message:"分组不能为空",trigger:"change"}}},[i("el-checkbox-group",{model:{value:e.temp4.groupIds,callback:function(t){e.$set(e.temp4,"groupIds",t)},expression:"temp4.groupIds"}},e._l(e.groupList,function(t){return i("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}),1)],1):e._e()],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogIssueVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.sending,expression:"sending"}],attrs:{disabled:e.sending},on:{click:e.issueFaceDb}},[e._v("下发")])],1)],1)],1)},a=[],s=(i("ac4d"),i("8a81"),i("ac6a"),i("96cf"),i("3b8d")),o=(i("7f7f"),i("20d6"),i("db72")),n=i("2f62"),r=i("ed08"),c=i("0a1f"),p=Object(n["a"])("robot"),d=p.mapState,u=c["face"].deleteFaceGroup,g=c["face"].saveFaceGroup,f=c["face"].sendFaceRegisters,m=c["face"].selectFaceGroup,v=c["face"].importFaceImgs,h=c["face"].importExcelFaceInfo,b=c["face"].saveFacePersonType,_=c["face"].deleteFacePersonType,y=c["face"].deleteFaceRegister,x=c["face"].getFacePersonType,k=c["face"].registerFace,T=c["face"].searchFaceRegister,C={name:"FRconfig",filters:{filterCertificateType:function(e){return 1===+e?"员工证":"身份证"},filterGender:function(e){return 1===+e?"男":"女"}},data:function(){return{emptyText:null,list:[],total:null,listLoading:!0,listQuery:{page:1,limit:10,name:null,age:null,certificateType:null,gender:null,groupId:null,personTypeCode:null},dialogTitle:"注册人脸信息",needModal:!0,closeOnClickModel:!1,dialogVisible:!1,sending:!1,dialogTypeTitle:"添加人员类型",dialogTypeVisible:!1,dialogVisible3:!1,dialogGroupVisible:!1,dialogGroupEditVisible:!1,dialogGroupTitle:"",temp5:{name:"",description:""},temp:{id:"",type:0,name:"",age:"",gender:1,defenceStatus:"",personTypeCode:"",certificateType:"",certificateId:"",groupId:"",picUrl:"",file:""},temp2:{id:"",name:"",code:"",description:""},temp3:{type:"1",personTypeCode:"",groupId:"",imgs:null,excel:null,filename:""},fileProgress:0,customColorMethod:[{color:"#909399",percentage:40},{color:"#E6A23C",percentage:60},{color:"#67C23A",percentage:100}],uploadStatus:"",showProgress:!1,uploadedFilesLength:0,allFilesLength:0,fileErrorTxt:"",temp4:{deviceId:null,groupIds:[],type:3},dialogIssueTitle:"",dialogIssueVisible:!1,dialogPersonTypeVisible:!1,typeList:[],groupList:[],listQuery2:{page:1,limit:999,name:""},rules:{type:[{required:!0,message:"不能为空",trigger:"blur"}],name:[{required:!0,message:"不能为空",trigger:"blur"}],age:[{required:!0,message:"不能为空",trigger:"blur"}],gender:[{required:!0,message:"不能为空",trigger:"blur"}],personTypeCode:[{required:!0,message:"不能为空",trigger:"blur"}],certificateType:[{required:!0,message:"不能为空",trigger:"blur"}],certificateId:[{required:!1,message:"不能为空",trigger:"blur"}],groupId:[{required:!1,message:"不能为空",trigger:"blur"}],code:[{required:!0,message:"不能为空",trigger:"blur"}],picUrl:[{required:!0,message:"不能为空",trigger:"blur"}]},filename:this.$t("route.fr-config")}},computed:Object(o["a"])({},d({robotsList:function(e){return e.robotsList}})),created:function(){},mounted:function(){this.getList(),this.getPersonType(),this.getGroupList()},methods:{getList:function(){var e=this;this.listLoading=!0,this.emptyText=null,T(this.listQuery).then(function(t){e.list=t.data?t.data.rows:[],e.total=t.data?t.data.total:0,e.listLoading=!1},function(t){console.log(t),e.listLoading=!1,e.emptyText="网络错误"})},getGroupList:function(){var e=this;m(this.listQuery2).then(function(t){e.groupList=t.data||[]},function(e){console.log(e)})},getPersonType:function(){var e=this;x({page:1,limit:999}).then(function(t){e.typeList=t.data},function(e){console.log(e)})},formatterPersonType:function(e,t,i,l){var a=this.typeList,s=this._.findIndex(a,{code:i});return s>-1?a[s].name:"--"},formatterGroup:function(e,t,i,l){var a=this.groupList,s=this._.findIndex(a,{id:+i});return s>-1?a[s].name:"--"},rowKey:function(e){return e.id},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},handlePlus:function(){var e=this;this.dialogTitle="注册人脸信息",this.temp={id:"",type:0,name:"",age:"",gender:1,defenceStatus:"",personTypeCode:"",certificateType:"",certificateId:"",groupId:"",picUrl:"",file:""},this.dialogVisible=!0,this.$nextTick(function(){e.$refs["dataForm"].clearValidate()})},handleEdit:function(e){var t=this,i=e.id,l=e.type,a=e.name,s=e.age,o=e.gender,n=e.personTypeCode,r=e.certificateType,c=e.certificateId,p=e.groupId,d=e.picUrl;this.temp=Object.assign({},this.temp,{id:i,type:l,name:a,age:s,gender:o,personTypeCode:n,certificateType:r,certificateId:c,groupId:+p,picUrl:d,file:""}),this.dialogTitle="编辑人脸信息",this.dialogVisible=!0,this.$nextTick(function(){t.$refs["dataForm"].clearValidate()})},handleDelete:function(e){var t=this,i=e.id,l=this.list;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){y({id:i}).then(function(i){t.$message({type:"success",message:i.msg});var a=l.indexOf(e);a>-1&&l.splice(a,1)},function(e){console.log(e)})}).catch(function(){})},handleSave:function(){var e=this,t=this.temp.id,i=k;this.$refs["dataForm"].validate(function(l){if(l){var a=e._.cloneDeep(e.temp);e.sending=!0,i(a).then(function(i){e.$message.success(i.msg),e.sending=!1;var l=e.list;t?l.splice(e._.findIndex(l,{id:t}),1,i.data):l.unshift(i.data),e.$nextTick(function(){e.dialogVisible=!1})},function(t){e.sending=!1,console.log(t)})}})},handleUploadFile:function(e){var t=e.target;t.className.indexOf("form-item__uploadTxt")>-1&&t.nextElementSibling&&t.nextElementSibling.click()},handleFileChange:function(e){var t=e.target.files;if(0===t.length)return!1;Object(r["k"])([].slice.call(t)[0],".jpg,.png,.jpeg,.gif")?(this.temp.file=t[0],this.temp.picUrl=t[0].name):this.$message.error("所选文件类型不符合")},handleTypePlus:function(){var e=this;this.dialogTypeTitle="添加人员类型",this.temp2={id:"",name:"",code:"",description:""},this.dialogTypeVisible=!0,this.$nextTick(function(){e.$refs["dataForm2"].clearValidate()})},handleTypeEdit:function(e){var t=this,i=e.id,l=e.name,a=e.code,s=e.description;this.temp2=Object.assign({},this.temp2,{id:i,name:l,code:a,description:s}),this.dialogTypeTitle="编辑人员类型",this.dialogTypeVisible=!0,this.$nextTick(function(){t.$refs["dataForm2"].clearValidate()})},handleTypeDelete:function(e){var t=this,i=e.id,l=this.typeList;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){_({id:i}).then(function(i){t.$message({type:"success",message:i.msg});var a=l.indexOf(e);a>-1&&l.splice(a,1)},function(e){console.log(e)})}).catch(function(){})},handleSaveType:function(){var e=this,t=this.temp2.id,i=b;this.$refs["dataForm2"].validate(function(l){if(l){var a=e._.cloneDeep(e.temp2);e.sending=!0,i(a).then(function(i){e.$message.success(i.msg),e.sending=!1;var l=e.typeList;a.id?l.splice(e._.findIndex(l,{id:t}),1,i.data):i.data&&l.unshift(i.data),e.$nextTick(function(){e.dialogTypeVisible=!1})},function(t){e.sending=!1,console.log(t)})}})},handleImportMore:function(){var e=this;this.dialogVisible3=!0,this.showProgress=!1,this.dialogTitle="批量导入",this.temp3={type:"1",personTypeCode:"",groupId:"",imgs:null,excel:null,filename:""},this.$nextTick(function(){e.$refs["dataForm3"].$el.querySelector('input[type="file"]').value="",e.$refs["dataForm3"].clearValidate()})},handleBatchTpyeChange:function(e){1===+e?(this.temp3.excel=null,this.temp3.filename=""):(this.temp3.imgs=null,this.temp3.filename=""),this.$refs["dataForm3"].$el.querySelector('input[type="file"]').value=""},handleFileChange2:function(e){var t=e.target.files,i=this.temp3.type;if(0===t.length)return!1;var l=[].slice.call(t);if("1"!==i)Object(r["k"])(l[0],".xlsx,.xls")?(this.temp3.excel=l[0],this.temp3.filename=l[0].name,this.fileErrorTxt=""):(this.temp3.filename="",this.fileErrorTxt="文件类型不符合");else{var a=l.filter(function(e){return Object(r["k"])(e,".png,.jpeg,.jpg")&&Math.ceil(e.size)<=31457280});l.length!==a.length?this.fileErrorTxt="部分文件被过滤（类型不符合，或者体积大小超过30M）":this.fileErrorTxt="",this.temp3.imgs=a,this.temp3.filename=a.map(function(e){return e.name}).join(","),this.allFilesLength=a.length}},handleSaveFile:function(){var e=this;this.$refs["dataForm3"].validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(i){var l,a,s,o,n,c,p,d,u,g,f,m,b,_;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e.fileErrorTxt&&("2"===e.temp3.type||!i)){t.next=64;break}if(l=e.temp3,a=l.imgs,s=l.excel,o=l.type,n=l.personTypeCode,c=l.groupId,p="",e.sending=!0,e.showProgress=!1,"1"!==o){t.next=49;break}p=v,e.showProgress=!0,d=!0,u=!1,g=void 0,t.prev=11,f=a[Symbol.iterator]();case 13:if(d=(m=f.next()).done){t.next=31;break}if(b=m.value,!Object(r["k"])(b,".png,.jpeg,.jpg")){t.next=28;break}return t.prev=16,e.fileProgress=0,console.log(1),t.next=21,p({imgs:b,personTypeCode:n,groupId:c},{onUploadProgress:e.handleUploadProgress});case 21:e.uploadedFilesLength+=1,console.log(3),t.next=28;break;case 25:t.prev=25,t.t0=t["catch"](16),console.log(t.t0);case 28:d=!0,t.next=13;break;case 31:t.next=37;break;case 33:t.prev=33,t.t1=t["catch"](11),u=!0,g=t.t1;case 37:t.prev=37,t.prev=38,d||null==f.return||f.return();case 40:if(t.prev=40,!u){t.next=43;break}throw g;case 43:return t.finish(40);case 44:return t.finish(37);case 45:e.sending=!1,setTimeout(function(){e.getList(),e.uploadedFilesLength===a.length&&(e.dialogVisible3=!1)},300),t.next=64;break;case 49:return p=h,t.prev=50,t.next=53,p({excel:s,personTypeCode:n,groupId:c});case 53:_=t.sent,e.$message.success(_.msg),e.sending=!1,e.dialogVisible3=!1,setTimeout(e.getList,300),t.next=64;break;case 60:t.prev=60,t.t2=t["catch"](50),e.sending=!1,console.log(t.t2);case 64:case"end":return t.stop()}},t,null,[[11,33,37,45],[16,25],[38,,40,44],[50,60]])}));return function(e){return t.apply(this,arguments)}}())},handleUploadProgress:function(e){this.fileProgress=e.loaded/e.total*100|0},openDialogForIssue:function(e){var t=this;"undefined"!==typeof e&&(this.temp4={deviceId:null,groupIds:[],type:e},this.dialogIssueTitle=3===e?"删除机器人的人脸库":0===e?"增量下发到机器人":"全量下发到机器人",this.dialogIssueVisible=!0,this.$nextTick(function(){t.$refs["faceDatabaseForm"]&&t.$refs["faceDatabaseForm"].clearValidate()}))},issueFaceDb:function(){var e=this;this.$refs["faceDatabaseForm"].validate(function(t){if(t){var i=e._.cloneDeep(e.temp4);i.groupIds=i.groupIds.join(","),e.sending=!0,f(i).then(function(t){e.sending=!1,e.$message.success(t.msg),e.dialogIssueVisible=!1},function(t){e.sending=!1,console.log(t)})}})},handleGroupCreate:function(){var e=this;this.temp5={name:"",description:""},this.dialogGroupEditVisible=!0,this.dialogGroupTitle="添加分组",this.$nextTick(function(){e.$refs["groupForm"]&&e.$refs["groupForm"].clearValidate()})},handleGroupEdit:function(e){var t=this,i=e.id,l=e.name,a=e.description;this.temp5=Object.assign({},{id:i,name:l,description:a}),this.dialogGroupEditVisible=!0,this.dialogGroupTitle="编辑分组",this.$nextTick(function(){t.$refs["groupForm"]&&t.$refs["groupForm"].clearValidate()})},handleGroupDelete:function(e){var t=this,i=e.id,l=this.groupList;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){u({id:i}).then(function(i){t.$message({type:"success",message:i.msg});var a=l.indexOf(e);a>-1&&l.splice(a,1)},function(e){console.log(e)})}).catch(function(){})},sendGroup:function(){var e=this;this.$refs["groupForm"].validate(function(t){if(t){e.sending=!0;var i=e.temp5,l=e.groupList;g(i).then(function(t){if(e.$message.success(t.msg),e.sending=!1,i.id){var a=e._.findIndex(l,{id:i.id});a>-1&&l.splice(a,1,Object.assign({},l[a],i))}else t.data&&l.unshift(t.data);e.dialogGroupEditVisible=!1},function(t){console.log(t),e.sending=!1})}})},handleExport:function(){window.open("/robotservice/face/downloadExcelExample.action")}}},w=C,I=(i("570f"),i("2877")),$=Object(I["a"])(w,l,a,!1,null,"56b87efa",null);t["default"]=$.exports}}]);
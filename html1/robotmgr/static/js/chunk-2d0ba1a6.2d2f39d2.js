(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ba1a6"],{"367d":function(t,e,l){"use strict";l.r(e);var i=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"app-container new bg with-pagination"},[l("div",{staticClass:"card",attrs:{"element-loading-text":"拼命加载中","element-loading-background":"rgba(0, 0, 0, 0.5)"}},[l("div",{staticClass:"card-title"},[l("Toolbar",{attrs:{name:t.filename}},[l("span",{staticClass:"action",on:{click:t.handleSearch}},[l("svg-icon",{attrs:{"icon-class":"search"}}),t._v(" "),l("span",{staticClass:"action__desc"},[t._v(t._s(t.$t("base.search")))])],1),t._v(" "),l("span",{staticClass:"action",on:{click:function(e){return t.handlePlus()}}},[l("svg-icon",{attrs:{"icon-class":"plus"}}),t._v(" "),l("span",{staticClass:"action__desc"},[t._v(t._s(t.$t("base.plus")))])],1)])],1),t._v(" "),l("div",{staticClass:"card-body"},[l("el-row",{staticClass:"filter-container",attrs:{gutter:20}},[l("el-col",{attrs:{xs:12,sm:8,md:4}},[l("el-input",{staticClass:"filter-item",attrs:{size:t.searchSize,placeholder:"模块名称"},model:{value:t.listQuery.moduleName,callback:function(e){t.$set(t.listQuery,"moduleName",e)},expression:"listQuery.moduleName"}},[l("i",{staticClass:"el-input__icon el-icon-document",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),l("el-col",{attrs:{xs:12,sm:8,md:4}},[l("el-input",{staticClass:"filter-item",attrs:{size:t.searchSize,placeholder:"模块名称IP"},model:{value:t.listQuery.moduleIp,callback:function(e){t.$set(t.listQuery,"moduleIp",e)},expression:"listQuery.moduleIp"}},[l("i",{staticClass:"el-input__icon el-icon-document",attrs:{slot:"prefix"},slot:"prefix"})])],1)],1),t._v(" "),l("div",{staticClass:"card-table"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.list,fit:"","highlight-current-row":"","empty-text":t.emptyText}},[l("el-table-column",{attrs:{"min-width":"100",align:t.tableAlign,label:"模块名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.module_name||"--"))]}}])}),t._v(" "),l("el-table-column",{attrs:{align:t.tableAlign,label:"模块IP"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.module_ip||"--"))]}}])}),t._v(" "),l("el-table-column",{attrs:{align:t.tableAlign,label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.add_time||"--"))]}}])}),t._v(" "),l("el-table-column",{attrs:{align:t.tableAlign,label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"top"}},[l("g-icon",{staticClass:"card-table__icon",attrs:{"icon-class":"edit"},on:{click:function(l){return t.handlePlus(e.row)}}})],1),t._v(" "),l("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top"}},[l("g-icon",{staticClass:"card-table__icon",attrs:{"icon-class":"delete"},on:{click:function(l){return t.handleDeleteTblockIp(e.row)}}})],1)]}}])})],1)],1)],1)]),t._v(" "),l("div",{staticClass:"pagination-container"},[l("el-pagination",{attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),l("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{"append-to-body":!0,top:"25vh","custom-class":"robotmgr-dialog",title:t.dialogTitle,visible:t.dialogSettingVisible,modal:t.needModal,"close-on-click-modal":t.closeOnClickModel,width:"400px"},on:{"update:visible":function(e){t.dialogSettingVisible=e}}},[l("el-form",{ref:"dataForm",staticStyle:{width:"90%",margin:"0 auto"},attrs:{rules:t.rules,model:t.temp,size:t.formSize,"label-position":t.formAlign,"label-width":"80px"}},[l("el-form-item",{attrs:{label:"模块名称",prop:"moduleName"}},[l("el-input",{attrs:{placeholder:"必填"},model:{value:t.temp.moduleName,callback:function(e){t.$set(t.temp,"moduleName","string"===typeof e?e.trim():e)},expression:"temp.moduleName"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"模块IP",prop:"moduleIp"}},[l("el-input",{attrs:{placeholder:"XX.XX.XX.XX"},model:{value:t.temp.moduleIp,callback:function(e){t.$set(t.temp,"moduleIp","string"===typeof e?e.trim():e)},expression:"temp.moduleIp"}})],1)],1),t._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.dialogSettingVisible=!1}}},[t._v("取消")]),t._v(" "),l("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.sending,expression:"sending"}],on:{click:function(e){return t.handleSave()}}},[t._v("保存")])],1)],1)],1)},a=[],s=(l("ac6a"),l("0a1f")),n=s["patrol"].findTblockIpsByParam,o=s["patrol"].deleteTblockIp,c=s["patrol"].modifyTblockIp,r=s["patrol"].addTblockIp,d={name:"TblockMgr",data:function(){return{emptyText:null,list:[],source:[],total:null,listLoading:!1,listQuery:{page:1,limit:10,moduleIp:"",moduleName:""},dialogTitle:"添加模板Ip",needModal:!0,closeOnClickModel:!1,dialogSettingVisible:!1,sending:!1,rules:{moduleName:[{required:!0,message:"不能为空",trigger:"blur"}],moduleIp:[{required:!0,message:"不能为空",trigger:"blur"}]},filename:this.$t("route.tblock-mgr"),temp:{moduleIp:"",moduleName:""}}},mounted:function(){this.getList()},methods:{getList:function(t){var e=this;"boolean"===typeof t&&t||(this.listQuery.page=1),this.listLoading=!0,this.emptyText="暂无数据",n(this.listQuery).then(function(t){e.list=t.data.rows,e.source=t.data.rows,e.total=t.data.total,e.listLoading=!1},function(t){console.log(t),e.listLoading=!1,e.emptyText="网络错误"})},handlePlus:function(t){var e=this;if(t){this.dialogTitle="修改模板";var l=t.module_ip,i=t.module_name,a=t.id;this.temp=Object.assign({},{moduleIp:l,moduleName:i,id:a})}else this.dialogTitle="添加模板",this.temp={moduleIp:"",moduleName:""};this.dialogSettingVisible=!0,this.$nextTick(function(){e.$refs["dataForm"].clearValidate()})},handleSave:function(){var t=this;this.$refs["dataForm"].validate(function(e){var l=Object.assign({},t.temp);e&&(t.sending=!0,"添加模块Ip"===t.dialogTitle?r(l).then(function(e){t.$message.success(e.msg),t.getList(),t.sending=!1,t.dialogSettingVisible=!1},function(e){console.log(e),t.sending=!1}):c(l).then(function(e){t.$message.success(e.msg),t.getList(),t.sending=!1,t.dialogSettingVisible=!1},function(e){console.log(e),t.sending=!1}))})},handleDeleteTblockIp:function(t){var e=this,l=t.id;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o({id:l}).then(function(t){e.$message.success(t.msg),e.list.forEach(function(t,i){t.id===l&&e.list.splice(i,1)})},function(t){console.log(t)})}).catch(function(){})},handleSearch:function(){this.getList()},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()}}},u=d,m=l("2877"),g=Object(m["a"])(u,i,a,!1,null,"703d5a24",null);e["default"]=g.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a4dac52"],{"3d42":function(e,t,a){},"7e0c":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container new bg"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-title"},[a("Toolbar",{attrs:{name:e.filename}})],1),e._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"config"},[a("section",{staticClass:"left"},[a("div",{staticClass:"left-flex"},[a("Toolbar",{staticClass:"is-bg",attrs:{name:"树节点",auto:!1}},[a("span",{class:e.isActive?"activeClass":"",on:{click:function(t){return e.handleChange("treeArea")}}},[e._v("区域\n                "),a("i",{staticClass:"gosuncn-icon el-icon-ext-plus card-table__icon",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.handleAreaPlus()}}})]),e._v(" "),a("svg-icon",{attrs:{"icon-class":"huhuan"}}),e._v(" "),a("span",{class:e.isActive?"":"activeClass",on:{click:function(t){return e.handleChange("treeType")}}},[e._v("类型\n                "),a("i",{staticClass:"gosuncn-icon el-icon-ext-plus card-table__icon",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.handleTypePlus()}}})])],1),e._v(" "),a("div",{staticClass:"tree__filter"},[a("el-input",{attrs:{size:e.formSize,placeholder:"筛选节点",clearable:""},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1),e._v(" "),a("div",{staticClass:"tree-preview"},[a("el-scrollbar",{ref:"scroll"},[a("el-tree",{ref:"tree",staticClass:"el-tree--line",attrs:{indent:0,data:e.treeList,"empty-text":e.treeEmptyText,"node-key":"id",accordion:!0,"highlight-current":"","expand-on-click-node":!1,props:e.defaultProps,"filter-node-method":e.filterNode,"default-expand-all":""},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[!1===e.isActive?a("span",{staticClass:"icon"},[1===i.level?a("svg-icon",{attrs:{"icon-class":"jifang"}}):a("svg-icon",{attrs:{"icon-class":"shebei"}}),e._v(" "),a("span",[e._v(e._s(i.label)+"    ")]),e._v(" "),a("div",{staticClass:"icon-hover"},[a("i",{staticClass:"gosuncn-icon el-icon-ext-edit card-table__icon",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.handleTypeEdit(l)}}}),e._v(" "),a("i",{staticClass:"gosuncn-icon  el-icon-ext-delete card-table__icon",staticStyle:{cursor:"pointer"},on:{click:function(t){return t.stopPropagation(),e.handleTypeDelete(i,l)}}})])],1):a("span",{staticClass:"icon"},[1===i.level||2===i.level?a("svg-icon",{attrs:{"icon-class":"region"}}):3===i.level?a("svg-icon",{attrs:{"icon-class":"jifang"}}):a("svg-icon",{attrs:{"icon-class":"shebei"}}),e._v(" "),a("span",[e._v(e._s(i.label)+"     ")]),e._v(" "),a("div",{staticClass:"icon-hover"},[a("i",{staticClass:"gosuncn-icon el-icon-ext-edit card-table__icon",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.handleAreaEdit(l)}}}),e._v(" "),a("i",{staticClass:"gosuncn-icon  el-icon-ext-delete card-table__icon",staticStyle:{cursor:"pointer"},on:{click:function(t){return t.stopPropagation(),e.handleAreaDelete(i,l)}}})])],1)])}}])})],1)],1)],1)]),e._v(" "),a("div",{staticClass:"main"},[a("Toolbar",{staticClass:"is-bg",attrs:{name:"设备列表",auto:!1}},[a("span",{staticClass:"action",on:{click:e.handleEditMore}},[a("svg-icon",{attrs:{"icon-class":"piliangtianjia"}}),e._v(" "),a("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.plusMore")))])],1),e._v(" "),a("span",{staticClass:"action",on:{click:function(t){return e.handleEditSingle()}}},[a("svg-icon",{attrs:{"icon-class":"plus"}}),e._v(" "),a("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.plus")))])],1)]),e._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"dataTable",staticStyle:{width:"96%",margin:"0 auto"},attrs:{data:e.list,fit:"","empty-text":e.emptyText,"highlight-current-row":"","max-height":e.tableHeight,height:e.tableHeight}},[a("el-table-column",{attrs:{align:e.textAlign,label:"设备代码","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.devCode||"-"))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:e.textAlign,label:"设备名称","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.devName||"-"))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:e.textAlign,label:"设备类型","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.typeName||"-"))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:e.textAlign,label:"区域类型","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.areaName||"-"))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:e.textAlign,label:"添加时间","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.addTime||"-"))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:e.textAlign,label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"gosuncn-icon el-icon-ext-edit card-table__icon",staticStyle:{cursor:"pointer"},on:{click:function(a){return e.handleEditSingle(t.row)}}}),e._v(" "),a("i",{staticClass:"gosuncn-icon  el-icon-ext-delete card-table__icon",staticStyle:{cursor:"pointer"},on:{click:function(a){return e.handleDelete(t.row)}}})]}}])})],1)],1)],1)])])]),e._v(" "),a("el-dialog",{attrs:{"append-to-body":!0,top:"20vh","custom-class":"robotmgr-dialog",title:"批量添加设备",visible:e.dialogSettingVisible,modal:e.needModal,"close-on-click-modal":e.closeOnClickModel,width:"1000px"},on:{"update:visible":function(t){e.dialogSettingVisible=t}}},[a("el-form",{ref:"dataFormMore",staticClass:"mgrForm",staticStyle:{width:"90%",margin:"0 auto"},attrs:{model:e.temp}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content"},[e._v("设备代码")])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content"},[e._v("设备名称")])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-conten"},[e._v("区域类型")])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content"},[e._v("设备类型")])])],1),e._v(" "),e._l(e.temp.moreGroup,function(t,i){return a("el-row",{key:i+"_"},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content"},[a("el-input",{attrs:{size:e.formSize,placeholder:""},model:{value:t.devCode,callback:function(a){e.$set(t,"devCode","string"===typeof a?a.trim():a)},expression:"item.devCode"}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content"},[a("el-input",{attrs:{size:e.formSize,placeholder:""},model:{value:t.devName,callback:function(a){e.$set(t,"devName","string"===typeof a?a.trim():a)},expression:"item.devName"}})],1)]),e._v(" "),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content"},[a("el-select",{staticClass:"filter-item specialA",attrs:{placeholder:0!==i?"同上":"",clearable:"",size:e.formSize},model:{value:t.areaId,callback:function(a){e.$set(t,"areaId",a)},expression:"item.areaId"}},e._l(e.areaSelect,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content"},[a("el-select",{staticClass:"filter-item specialB",attrs:{placeholder:0!==i?"同上":"",clearable:"",size:e.formSize},model:{value:t.devTypeId,callback:function(a){e.$set(t,"devTypeId",a)},expression:"item.devTypeId"}},e._l(e.typeSelect,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),a("el-col",{attrs:{span:2}},[a("g-icon",{staticClass:"form-item__icon form-item__icon--bg",attrs:{"icon-class":"minus"},on:{click:function(t){return e.handleMove(i)}}})],1)],1)})],2),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogSettingVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.sending,expression:"sending"}],on:{click:function(t){return e.handleSave("more")}}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{"append-to-body":!0,top:"20vh","custom-class":"robotmgr-dialog",title:e.dialogTitle,visible:e.dialogVisible,modal:e.needModal,"close-on-click-modal":e.closeOnClickModel,width:"550px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dataFormSingle",staticStyle:{width:"80%",margin:"0 auto"},attrs:{model:e.temp,"label-position":"center","label-width":"120px"}},[a("el-form-item",{attrs:{label:"设备代码"}},[a("el-input",{attrs:{size:e.formSize,placeholder:""},model:{value:e.tempSingle.devCode,callback:function(t){e.$set(e.tempSingle,"devCode","string"===typeof t?t.trim():t)},expression:"tempSingle.devCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备名称"}},[a("el-input",{attrs:{size:e.formSize,placeholder:""},model:{value:e.tempSingle.devName,callback:function(t){e.$set(e.tempSingle,"devName","string"===typeof t?t.trim():t)},expression:"tempSingle.devName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区域类型"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"",clearable:"",size:e.formSize},model:{value:e.tempSingle.areaId,callback:function(t){e.$set(e.tempSingle,"areaId",t)},expression:"tempSingle.areaId"}},e._l(e.areaSelect,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"设备类型",prop:"devName"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"",clearable:"",size:e.formSize},model:{value:e.tempSingle.devTypeId,callback:function(t){e.$set(e.tempSingle,"devTypeId",t)},expression:"tempSingle.devTypeId"}},e._l(e.typeSelect,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.sending,expression:"sending"}],on:{click:function(t){return e.handleSave("single")}}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{"append-to-body":!0,top:"25vh","custom-class":"robotmgr-dialog",title:e.dialogTypeTitle,visible:e.dialogTypeVisible,modal:e.needModal,"close-on-click-modal":e.closeOnClickModel,width:"550px"},on:{"update:visible":function(t){e.dialogTypeVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"80%",margin:"0 auto"},attrs:{rules:e.rules,model:e.tempType,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"设备父类型"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"",clearable:"",size:e.formSize},model:{value:e.tempType.parentId,callback:function(t){e.$set(e.tempType,"parentId",t)},expression:"tempType.parentId"}},e._l(e.typeSelect,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"设置类型名称",prop:"typeName"}},[a("el-input",{attrs:{size:e.formSize,placeholder:""},model:{value:e.tempType.typeName,callback:function(t){e.$set(e.tempType,"typeName","string"===typeof t?t.trim():t)},expression:"tempType.typeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设置类型编号",prop:"typeCode"}},[a("el-input",{attrs:{size:e.formSize,placeholder:""},model:{value:e.tempType.typeCode,callback:function(t){e.$set(e.tempType,"typeCode","string"===typeof t?t.trim():t)},expression:"tempType.typeCode"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTypeVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.sending,expression:"sending"}],on:{click:function(t){return e.handleTypeSave()}}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{"append-to-body":!0,top:"25vh","custom-class":"robotmgr-dialog",title:e.dialogAreaTitle,visible:e.dialogAreaVisible,modal:e.needModal,"close-on-click-modal":e.closeOnClickModel,width:"550px"},on:{"update:visible":function(t){e.dialogAreaVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"80%",margin:"0 auto"},attrs:{rules:e.rules,model:e.tempArea,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"设备父区域"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"",clearable:"",size:e.formSize},model:{value:e.tempArea.parentId,callback:function(t){e.$set(e.tempArea,"parentId",t)},expression:"tempArea.parentId"}},e._l(e.areaSelect2,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"区域名称",prop:"areaName"}},[a("el-input",{attrs:{size:e.formSize,placeholder:""},model:{value:e.tempArea.areaName,callback:function(t){e.$set(e.tempArea,"areaName","string"===typeof t?t.trim():t)},expression:"tempArea.areaName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区域编码",prop:"areaCode"}},[a("el-input",{attrs:{size:e.formSize,placeholder:""},model:{value:e.tempArea.areaCode,callback:function(t){e.$set(e.tempArea,"areaCode","string"===typeof t?t.trim():t)},expression:"tempArea.areaCode"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogAreaVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.sending,expression:"sending"}],on:{click:function(t){return e.handleAreaSave()}}},[e._v("保存")])],1)],1)],1)},l=[],n=(a("20d6"),a("7f7f"),a("ac6a"),a("0a1f")),s=n["patrol"].getPatrolDeviceAreaList,o=n["patrol"].getPatrolDeviceTypeTree,r=n["patrol"].deletePatrolDevice,c=n["patrol"].savePatrolDevice,d=n["patrol"].savePatrolDevicesBatch,p=n["patrol"].getPatrolDeviceList,u=n["patrol"].savePatrolDeviceType,m=n["patrol"].savePatrolDeviceArea,v=n["patrol"].deletePatrolDeviceArea,f=n["patrol"].deletePatrolDeviceType,g={name:"PatrolDeviceMgr",inject:["parseTime"],data:function(){return{menuVisible:!1,treeEmptyText:null,tree:null,filterText:"",filename:this.$t("route.patrol-device-mgr"),emptyText:"点击左边设备获取",textAlign:"left",tableHeight:540,list:[],total:null,listLoading:!1,formSize:"mini",listQueryTable:{typeId:null,areaId:null,page:1,limit:10},listQueryAreeTree:{parentId:1,areaType:1},treeList:[],treeArea:[],treeType:[],treeChildren:[],areaSelect:[],areaSelect2:[],typeSelect:[],isActive:!0,dialogTitle:"添加设备",dialogAreaTitle:"添加巡检区域",dialogTypeTitle:"添加巡检类型",needModal:!0,closeOnClickModel:!1,dialogSettingVisible:!1,dialogVisible:!1,sending:!1,temp:{moreGroup:[{},{},{},{},{},{},{},{},{},{}]},tempSingle:{areaId:"",devCode:"",devName:"",devTypeId:"",id:""},defaultProps:{label:"areaName"},dialogTypeVisible:!1,dialogAreaVisible:!1,actionLoading:!1,actionSource:"",tempType:{id:null,parentId:null,typeCode:null,typeName:null},rules:{typeName:[{required:!0,message:"不能为空",trigger:"blur"}],typeCode:[{required:!0,message:"不能为空",trigger:"blur"}],areaName:[{required:!0,message:"不能为空",trigger:"blur"}],areaCode:[{required:!0,message:"不能为空",trigger:"blur"}]},tempArea:{id:null,parentId:null,areaName:null,areaCode:null}}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},mounted:function(){this.getList()},methods:{getList:function(){var e=this;s().then(function(t){var a=t.data;if("string"===typeof a&&(a=JSON.parse(a)),!a.length&&0===a.length)return!1;e.treeArea=a,e.handleChange("treeArea")}),o().then(function(t){var a=t.data;if("string"===typeof a&&(a=JSON.parse(a)),!a.length&&0===a.length)return!1;e.treeType=a,a.forEach(function(t){e.makeSelection(t)})},function(e){console.log(e)})},getTableList:function(){var e=this;this.listLoading=!0,this.emptyText="暂无数据",p(this.listQueryTable).then(function(t){e.listLoading=!1,e.list=t.data.rows},function(t){console.log(t),e.listLoading=!1,e.emptyText="网络错误"})},makeSelect:function(e){this.isActive&&this.makeSelection2(e)},makeSelection:function(e){var t=this,a={};a.value=e.id,a.label=e.typeName,this.typeSelect.push(a),e.children&&e.children.forEach(function(e){t.makeSelection(e)})},makeSelection2:function(e){var t=this,a={};a.value=e.id,a.label=e.areaName,this.areaSelect.push(a),e.children&&e.children.forEach(function(e){t.makeSelection2(e)})},makeSelection3:function(e){var t=this,a={};a.value=e.id,a.label=e.areaName,this.areaSelect2.push(a),e.children&&e.children.forEach(function(e){t.makeSelection3(e)})},handleEditMore:function(){var e=this;this.dialogSettingVisible=!0,this.$nextTick(function(){e.$refs["dataFormMore"].clearValidate()})},handleEditSingle:function(e){var t=this;if(this.areaSelect=[],this.treeArea.forEach(function(e){t.makeSelection2(e)}),e){this.dialogTitle="修改设备";var a=e.id,i=e.devName,l=e.devCode,n=e.areaId,s=e.devTypeId;this.tempSingle=Object.assign({},{devName:i,devCode:l,areaId:n,devTypeId:s,id:a})}else this.dialogTitle="添加设备",this.tempSingle.devName=null,this.tempSingle.devCode=null,this.tempSingle.areaId=null,this.tempSingle.devTypeId=null;this.dialogVisible=!0,this.$nextTick(function(){t.$refs["dataFormSingle"].clearValidate()})},handleDelete:function(e){var t=this,a=e.id;this.$confirm("是否确定删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r({id:a}).then(function(e){t.$message.success(e.msg),t.getTableList()},function(e){console.log(e)})}).catch(function(){})},handleNodeClick:function(e){var t=this.$refs.tree.getCurrentNode();!0===this.isActive?(this.areaSelect=[],this.listQueryTable.areaId=t.id,this.listQueryTable.typeId=null):(this.listQueryTable.typeId=t.id,this.listQueryTable.areaId=null),this.getTableList(),this.makeSelect(t)},handleMove:function(e){this.temp.moreGroup.splice(e,1)},handleSave:function(e){var t=this;if("single"===e)this.$refs["dataFormSingle"].validate(function(e){var a=Object.assign({},t.tempSingle);e&&(t.sending=!0,c(a).then(function(e){t.$message.success(e.msg),t.getTableList(),t.sending=!1,t.dialogVisible=!1},function(e){console.log(e),t.sending=!1}))});else{for(var a=this.temp.moreGroup,i=0;i<a.length;i++)"{}"===JSON.stringify(a[i])?(a.splice(i,1),i--):(a[i].areaId||0===i||(a[i].areaId=a[i-1].areaId),a[i].devTypeId||0===i||(a[i].devTypeId=a[i-1].devTypeId));this.sending=!0,d(this.temp.moreGroup).then(function(e){t.$message.success(e.msg),t.sending=!1,t.dialogSettingVisible=!1,t.getTableList(),t.temp.moreGroup=[{},{},{},{},{},{},{},{},{},{}]},function(e){console.log(e),t.sending=!1})}},handleChange:function(e){var t=this;this.areaSelect=[],"treeArea"===e?(this.defaultProps.label="areaName",this.isActive=!0):(this.defaultProps.label="typeName",this.isActive=!1,this.treeArea.forEach(function(e){t.makeSelection2(e)})),this.treeList=this[e],this.listQueryTable.typeId=null,this.listQueryTable.areaId=null},filterNode:function(e,t){return!e||(t.areaName?-1!==t.areaName.indexOf(e):-1!==t.typeName.indexOf(e))},handleTypePlus:function(){var e=this;this.dialogTypeTitle="添加设备类型",this.tempType={parentId:null,typeName:null,typeCode:null,id:""},this.dialogTypeVisible=!0,this.$nextTick(function(){e.$refs["dataForm"]&&e.$refs["dataForm"].clearValidate()})},handleAreaPlus:function(){var e=this;this.areaSelect2=[],this.treeArea.forEach(function(t){e.makeSelection3(t)}),this.dialogAreaTitle="添加设备区域",this.tempArea={parentId:null,areaName:null,areaCode:null,id:""},this.dialogAreaVisible=!0,this.$nextTick(function(){e.$refs["dataForm"]&&e.$refs["dataForm"].clearValidate()})},handleTypeEdit:function(e){var t=this;this.typeSelect=[],this.treeType.forEach(function(e){t.makeSelection(e)});var a=e.id,i=e.typeName,l=e.typeCode,n=e.parentId;this.tempType=Object.assign({},{id:a,typeName:i,typeCode:l,parentId:n}),0===this.tempType.parentId&&(this.tempType.parentId="无"),this.dialogTypeTitle="修改设备类型",this.dialogTypeVisible=!0,this.sending=!1},handleAreaEdit:function(e){var t=this;this.areaSelect2=[],this.treeArea.forEach(function(e){t.makeSelection3(e)});var a=e.id,i=e.areaName,l=e.areaCode,n=e.parentId;this.tempArea=Object.assign({},{id:a,areaName:i,areaCode:l,parentId:n}),0===this.tempArea.parentId&&(this.tempArea.parentId="无"),this.dialogAreaTitle="修改设备区域",this.dialogAreaVisible=!0,this.sending=!1},handleTypeSave:function(){var e=this;this.$refs["dataForm"].validate(function(t){var a=Object.assign({},e.tempType);if(t){e.sending=!0;var i=e._.cloneDeep(a);null===i.parentId&&(i.parentId=0),u(i).then(function(t){e.$message.success(t.msg),o().then(function(t){var a=t.data;if("string"===typeof a&&(a=JSON.parse(a)),!a.length&&0===a.length)return!1;e.treeType=a}),e.isRouterAlive=!1,e.sending=!1,e.dialogTypeVisible=!1},function(t){console.log(t),e.sending=!1}),e.handleChange("treeType")}})},handleAreaSave:function(){var e=this;this.$refs["dataForm"].validate(function(t){var a=Object.assign({},e.tempArea);if(t){e.sending=!0;var i=e._.cloneDeep(a);null===i.parentId&&(i.parentId=0),m(i).then(function(t){e.$message.success(t.msg),s().then(function(t){var a=t.data;if("string"===typeof a&&(a=JSON.parse(a)),!a.length&&0===a.length)return!1;e.treeArea=a,e.handleChange("treeArea")}),e.sending=!1,e.dialogAreaVisible=!1},function(t){console.log(t),e.sending=!1})}})},handleAreaDelete:function(e,t){var a=this,i=t.id;this.$confirm("是否确定删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){v({id:i}).then(function(i){a.$notify({title:"成功",message:i.msg,type:"success",duration:1500});var l=e.parent,n=l.data.children||l.data,s=n.findIndex(function(e){return e.id===t.id});n.splice(s,1)})},function(e){console.log(e)})},handleTypeDelete:function(e,t){var a=this,i=t.id;this.$confirm("是否确定删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){f({id:i}).then(function(i){a.$notify({title:"成功",message:i.msg,type:"success",duration:1500});var l=e.parent,n=l.data.children||l.data,s=n.findIndex(function(e){return e.id===t.id});n.splice(s,1)})},function(e){console.log(e)})}}},h=g,b=(a("e1c7"),a("2877")),y=Object(b["a"])(h,i,l,!1,null,"62628f6f",null);t["default"]=y.exports},e1c7:function(e,t,a){"use strict";var i=a("3d42"),l=a.n(i);l.a}}]);
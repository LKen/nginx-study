(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf915b3c"],{"0832":function(e,t,l){"use strict";var a=l("808d"),i=l.n(a);i.a},"808d":function(e,t,l){},8804:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container new bg with-pagination"},[l("div",{staticClass:"card",attrs:{"element-loading-text":"拼命加载中","element-loading-background":"rgba(0, 0, 0, 0.5)"}},[l("div",{staticClass:"card-title"},[l("Toolbar",{attrs:{name:e.filename}},[l("span",{staticClass:"action",on:{click:e.getList}},[l("svg-icon",{attrs:{"icon-class":"search"}}),e._v(" "),l("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.search")))])],1),e._v(" "),l("span",{staticClass:"action",on:{click:e.handlePlus}},[l("svg-icon",{attrs:{"icon-class":"plus"}}),e._v(" "),l("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.plus")))])],1),e._v(" "),l("span",{staticClass:"action",on:{click:e.handleExport}},[l("svg-icon",{attrs:{"icon-class":"daochu"}}),e._v(" "),l("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.export")))])],1),e._v(" "),l("span",{staticClass:"action"},[l("svg-icon",{attrs:{"icon-class":"piliangdaoru"}}),e._v(" "),l("span",{staticClass:"action__desc",on:{click:e.handleAdd}},[e._v(e._s(e.$t("base.importMore")))]),e._v(" "),l("input",{staticClass:"form-item__upload",attrs:{type:"file",accept:".xlsx, .xls",name:"file"},on:{change:function(t){return e.handleFileChange(t)}}})],1),e._v(" "),l("span",{staticClass:"action"},[l("svg-icon",{attrs:{"icon-class":"daochu"}}),e._v(" "),l("span",{staticClass:"action__desc",on:{click:e.handleExportTemp}},[e._v(e._s(e.$t("base.exportTemp")))])],1)])],1),e._v(" "),l("div",{staticClass:"card-body"},[l("el-row",{staticClass:"filter-container",attrs:{gutter:20}},[l("el-col",{attrs:{xs:12,sm:8,md:4}},[l("el-input",{staticClass:"filter-item",attrs:{size:e.searchSize,placeholder:"车牌号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(t)}},model:{value:e.listQuery.vehicleNumber,callback:function(t){e.$set(e.listQuery,"vehicleNumber",t)},expression:"listQuery.vehicleNumber"}},[l("i",{staticClass:"el-input__icon el-icon-truck",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),l("el-col",{attrs:{xs:12,sm:8,md:4}},[l("el-select",{staticClass:"filter-item",attrs:{clearable:"",placeholder:"车辆类型",size:e.searchSize},on:{change:e.getList},model:{value:e.listQuery.vehicleType,callback:function(t){e.$set(e.listQuery,"vehicleType",t)},expression:"listQuery.vehicleType"}},[e._l(e.selectOptions,function(e){return l("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),e._v(" "),l("svg-icon",{attrs:{slot:"prefix","class-name":"el-input__icon","icon-class":"list"},slot:"prefix"})],2)],1)],1),e._v(" "),l("div",{staticClass:"card-table"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"dataTable",staticStyle:{width:"100%"},attrs:{data:e.list,fit:"","row-key":e.rowKey,"empty-text":e.emptyText,"highlight-current-row":""}},[l("el-table-column",{attrs:{align:e.tableAlign,label:"车牌号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("defaultValue")(t.row.vehicleNumber)))]}}])}),e._v(" "),l("el-table-column",{attrs:{align:e.tableAlign,label:"车辆类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filterType")(t.row.vehicleType)))]}}])}),e._v(" "),l("el-table-column",{attrs:{align:e.tableAlign,label:"车牌颜色"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.plateColor||"-"))]}}])}),e._v(" "),l("el-table-column",{attrs:{align:e.tableAlign,label:"车身颜色"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.bodyColor||"-"))]}}])}),e._v(" "),l("el-table-column",{attrs:{align:e.tableAlign,label:"品牌"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.vehicleBrand||"-"))]}}])}),e._v(" "),l("el-table-column",{attrs:{align:e.tableAlign,label:"车主姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.ownerName||"-"))]}}])}),e._v(" "),l("el-table-column",{attrs:{align:e.tableAlign,label:"车主电话"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.ownerPhone||"-"))]}}])}),e._v(" "),l("el-table-column",{attrs:{align:e.tableAlign,label:"更新时间",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.updateTime||"-"))]}}])}),e._v(" "),l("el-table-column",{attrs:{align:e.tableAlign,label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("i",{staticClass:"el-icon-edit card-table__icon",staticStyle:{cursor:"pointer"},on:{click:function(l){return e.handleEdit(t.row)}}}),e._v(" "),l("i",{staticClass:"el-icon-document card-table__icon",staticStyle:{cursor:"pointer"},on:{click:function(l){return e.handleDetail(t.row)}}}),e._v(" "),l("i",{staticClass:"el-icon-delete card-table__icon",staticStyle:{cursor:"pointer"},on:{click:function(l){return e.handleDelete(t.row)}}})]}}])})],1)],1)],1)]),e._v(" "),l("div",{staticClass:"pagination-container"},[l("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),l("el-dialog",{attrs:{"append-to-body":!0,top:"15vh","custom-class":"robotmgr-dialog",title:e.dialogTitle,visible:e.dialogVisible,modal:e.needModal,"close-on-click-modal":e.closeOnClickModel,width:"450px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("el-form",{ref:"dataForm",staticStyle:{width:"90%",margin:"0 auto"},attrs:{rules:e.rules,model:e.temp,"label-position":e.formAlign,size:e.formSize,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"车牌号",prop:"vehicleNumber"}},[l("el-input",{attrs:{placeholder:""},model:{value:e.temp.vehicleNumber,callback:function(t){e.$set(e.temp,"vehicleNumber","string"===typeof t?t.trim():t)},expression:"temp.vehicleNumber"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"车辆类型",prop:"vehicleType"}},[l("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"车辆类型"},model:{value:e.temp.vehicleType,callback:function(t){e.$set(e.temp,"vehicleType",t)},expression:"temp.vehicleType"}},e._l(e.selectOptions,function(e){return l("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"车牌颜色",prop:"plateColor"}},[l("el-input",{attrs:{placeholder:""},model:{value:e.temp.plateColor,callback:function(t){e.$set(e.temp,"plateColor","string"===typeof t?t.trim():t)},expression:"temp.plateColor"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"车身颜色",prop:"bodyColor"}},[l("el-input",{attrs:{placeholder:""},model:{value:e.temp.bodyColor,callback:function(t){e.$set(e.temp,"bodyColor","string"===typeof t?t.trim():t)},expression:"temp.bodyColor"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"品牌",prop:"vehicleBrand"}},[l("el-input",{attrs:{placeholder:""},model:{value:e.temp.vehicleBrand,callback:function(t){e.$set(e.temp,"vehicleBrand","string"===typeof t?t.trim():t)},expression:"temp.vehicleBrand"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"车主姓名",prop:"ownerName"}},[l("el-input",{attrs:{placeholder:""},model:{value:e.temp.ownerName,callback:function(t){e.$set(e.temp,"ownerName","string"===typeof t?t.trim():t)},expression:"temp.ownerName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"车主电话",prop:"ownerPhone"}},[l("el-input",{attrs:{placeholder:""},model:{value:e.temp.ownerPhone,callback:function(t){e.$set(e.temp,"ownerPhone","string"===typeof t?t.trim():t)},expression:"temp.ownerPhone"}})],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),l("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.sending,expression:"sending"}],on:{click:function(t){return e.handleSave()}}},[e._v("保存")])],1)],1),e._v(" "),l("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{"append-to-body":!0,top:"28vh","custom-class":"robotmgr-dialog",title:"车辆详情",visible:e.dialogDetailVisible,modal:e.needModal,"close-on-click-modal":e.closeOnClickModel,width:"480px"},on:{"update:visible":function(t){e.dialogDetailVisible=t}}},[l("div",{staticClass:"car__content"},[l("div",{staticClass:"car__content_info right"},[l("div",[e._v("\n          车牌号"),l("span",{staticClass:"word"},[e._v(e._s(e.carDetail.vehicleNumber))])]),e._v(" "),l("div",[e._v("\n          车辆类型："),l("span",{staticClass:"word"},[e._v(e._s(e._f("filterType")(e.carDetail.vehicleType)))])]),e._v(" "),l("div",[e._v("\n          车牌颜色"),l("span",{staticClass:"word"},[e._v(e._s(e._f("defaultValue")(e.carDetail.plateColor)))])]),e._v(" "),l("div",[e._v("\n          车身颜色："),l("span",{staticClass:"word"},[e._v(e._s(e._f("defaultValue")(e.carDetail.bodyColor)))])]),e._v(" "),l("div",[e._v("\n          品牌："),l("span",{staticClass:"word"},[e._v(e._s(e._f("defaultValue")(e.carDetail.vehicleBrand)))])]),e._v(" "),l("div",[e._v("\n          车主姓名："),l("span",{staticClass:"word"},[e._v(e._s(e._f("defaultValue")(e.carDetail.ownerName)))])]),e._v(" "),l("div",[e._v("\n          车主电话："),l("span",{staticClass:"word"},[e._v("\n            "+e._s(e._f("defaultValue")(e.carDetail.ownerPhone))+"\n          ")])]),e._v(" "),l("div",[e._v("\n          更新时间："),l("span",{staticClass:"word"},[e._v(e._s(e.carDetail.updateTime))])])])])])],1)},i=[],n=(l("4917"),l("db72")),o=l("0a1f"),s=l("ed08"),r=o["patrol"].getPatrolVehiclePage,c=o["patrol"].getDictionList,u=o["patrol"].updatePatrolVehicle,d=o["patrol"].addPatrolVehicle,p=o["patrol"].delPatrolVehicle,v=o["patrol"].importPatrolVehicleBase,m=o["patrol"].getPatrolVehicle,h=o["patrol"].exportPatrolVehicleBase,g=o["patrol"].exportPatrolVehicleBaseTemp,f={name:"PatrolVehicle",filters:{filterType:function(e){var t="";return t="3"===e?"白名单":"98"===e?"黑名单":"2"===e?"VIP":"99"===e?"收费车辆":"",t}},data:function(){var e=function(e,t,l){if(!t)return l();var a=/^1[3|4|5|7|8][0-9]\d{8}$/;if(!a.test(t))return l(new Error("请输入正确的手机号"));l()};return{filename:this.$t("route.patrol-vehicle"),emptyText:null,list:[],total:null,listLoading:!0,listQuery:{page:1,limit:10,vehicleNumber:"",vehicleType:""},exportQuery:{pageSize:1e4,pageNum:1},dialogTitle:"",needModal:!0,dialogDetailVisible:!1,closeOnClickModel:!1,dialogVisible:!1,sending:!1,temp:{vehicleNumber:null,vehicleType:null,plateColor:null,bodyColor:null,vehicleBrand:null,ownerName:null,ownerPhone:null,id:""},rules:{vehicleNumber:[{required:!0,message:"不能为空",trigger:"blur"},{max:10,message:"长度不超过10字符",trigger:"blur"}],vehicleType:[{required:!0,message:"不能为空",trigger:"blur"}],ownerName:[{required:!0,message:"不能为空",trigger:"blur"},{max:10,message:"长度不超过10字符",trigger:"blur"}],vehicleBrand:[{max:10,message:"长度不超过10字符",trigger:"blur"}],bodyColor:[{max:10,message:"长度不超过10字符",trigger:"blur"}],plateColor:[{max:10,message:"长度不超过10字符",trigger:"blur"}],ownerPhone:[{required:!0,message:"不能为空",trigger:"blur"},{validator:e,trigger:"blur"}]},selectOptions:[],carDetail:{}}},mounted:function(){this.getList(),this.getVehicleType()},methods:{getList:function(){var e=this;this.listLoading=!0,this.emptyText=null,r(this.listQuery).then(function(t){e.list=t.data.rows,e.total=t.data.total,e.listLoading=!1},function(t){console.log(t),e.listLoading=!1,e.emptyText="网络错误"})},getVehicleType:function(){var e=this;c({code:"VEHICLE_MAN_TYPE"}).then(function(t){e.selectOptions=t.data},function(e){console.log(e)})},handlePlus:function(){var e=this;this.dialogTitle="添加巡逻车辆",this.temp={vehicleNumber:null,vehicleType:null,plateColor:null,bodyColor:null,vehicleBrand:null,ownerName:null,ownerPhone:null},this.dialogVisible=!0,this.$nextTick(function(){e.$refs["dataForm"]&&e.$refs["dataForm"].clearValidate()})},handleEdit:function(e){var t=this;this.dialogTitle="修改巡逻车辆";var l=e.vehicleNumber,a=e.vehicleType,i=e.id,n=e.plateColor,o=e.bodyColor,s=e.vehicleBrand,r=e.ownerName,c=e.ownerPhone;this.temp=Object.assign({},{vehicleNumber:l,vehicleType:a,plateColor:n,bodyColor:o,vehicleBrand:s,ownerName:r,ownerPhone:c,id:i}),this.dialogVisible=!0,this.$nextTick(function(){t.$refs["dataForm"]&&t.$refs["dataForm"].clearValidate()})},handleDelete:function(e){var t=this,l=e.id,a=this.list;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){p({ids:l}).then(function(l){t.$message.success(l.msg);var i=a.indexOf(e);i>-1&&a.splice(i,1)},function(e){console.log(e)})}).catch(function(){})},handleSave:function(){var e=this;this.$refs["dataForm"].validate(function(t){var l=Object.assign({},e.temp);t&&(e.sending=!0,"添加巡逻车辆"===e.dialogTitle?d(l).then(function(t){e.$message.success(t.msg),e.getList(),e.sending=!1,e.dialogVisible=!1},function(t){console.log(t),e.sending=!1}):u(l).then(function(t){e.$message.success(t.msg),e.getList(),e.sending=!1,e.dialogVisible=!1},function(t){console.log(t),e.sending=!1}))})},handleAdd:function(e){var t=e.target;t.nextElementSibling&&t.nextElementSibling.click()},handleFileChange:function(e){var t=this,l=e.target.files,a=!0;a?this.$confirm("确定上传该文件吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){v({file:l[0]}).then(function(e){t.$notify({title:"成功",message:e.msg,type:"success",duration:1500}),t.getList()},function(t){e.target.value="",console.log(t)})}).catch(function(){e.target.value=""}):this.$message.error("所选文件类型不符合")},handleDetail:function(e){var t=this,l=e.id;m({id:l}).then(function(e){t.carDetail=e.data},function(e){console.log(e)}),this.dialogDetailVisible=!0},handleExport:function(){var e=this.listQuery,t=e.vehicleNumber,l=e.vehicleType;h(Object(n["a"])({vehicleNumber:t,vehicleType:l},this.exportQuery),{responseType:"blob"}).then(function(e){var t=/([^\=]+)\.([a-z]+)$/i,l=e.headers["content-disposition"]?e.headers["content-disposition"].match(t)[0]:"data";Object(s["c"])(e.data,null,l)},function(e){console.log(e)})},handleExportTemp:function(){g({},{responseType:"blob"}).then(function(e){var t=/([^\=]+)\.([a-z]+)$/i,l=e.headers["content-disposition"]?e.headers["content-disposition"].match(t)[0]:"data";Object(s["c"])(e.data,null,l)},function(e){console.log(e)})},rowKey:function(e){return e.id},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()}}},_=f,b=(l("0832"),l("2877")),y=Object(b["a"])(_,a,i,!1,null,"9571947c",null);t["default"]=y.exports}}]);
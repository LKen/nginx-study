(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-415bc3d0"],{"01f97":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container new bg with-pagination"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-title"},[a("Toolbar",{attrs:{name:e.filename,"prefix-icon":"back"},on:{"prefix-callback":e.goBack}},[a("span",{staticClass:"action",on:{click:e.getList}},[a("svg-icon",{attrs:{"icon-class":"search"}}),e._v(" "),a("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.search")))])],1),e._v(" "),a("el-dropdown",{staticClass:"action",attrs:{trigger:"click"},on:{command:e.handleCommand}},[a("span",[a("svg-icon",{attrs:{"icon-class":"download"}}),e._v(" "),a("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.download")))])],1),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{"data-table-action":"excel",command:"xlsx"}},[e._v("\n              Excel (.xlsx)\n            ")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"card-body"},[a("el-row",{staticClass:"filter-container",attrs:{gutter:20}},[a("el-col",{attrs:{xs:12,sm:8,md:4}},[a("el-input",{staticClass:"filter-item",attrs:{size:e.searchSize,placeholder:"姓名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(t)}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}},[a("svg-icon",{attrs:{slot:"prefix","class-name":"el-input__icon","icon-class":"user"},slot:"prefix"})],1)],1),e._v(" "),a("el-col",{attrs:{xs:12,sm:8,md:4}},[a("el-input",{staticClass:"filter-item",attrs:{size:e.searchSize,placeholder:"年龄"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(t)}},model:{value:e.listQuery.age,callback:function(t){e.$set(e.listQuery,"age",t)},expression:"listQuery.age"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),a("el-col",{attrs:{xs:12,sm:8,md:4}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"人员类型",clearable:"",size:e.searchSize},on:{change:e.getList},model:{value:e.listQuery.personType,callback:function(t){e.$set(e.listQuery,"personType",t)},expression:"listQuery.personType"}},[e._l(e.typeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.code}})}),e._v(" "),a("svg-icon",{attrs:{slot:"prefix","class-name":"el-input__icon","icon-class":"list"},slot:"prefix"})],2)],1),e._v(" "),a("el-col",{attrs:{xs:12,sm:8,md:4}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"性别",clearable:"",size:e.searchSize},on:{change:e.getList},model:{value:e.listQuery.gender,callback:function(t){e.$set(e.listQuery,"gender",t)},expression:"listQuery.gender"}},[e._l(e.selectOptions2,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),e._v(" "),a("svg-icon",{attrs:{slot:"prefix","class-name":"el-input__icon","icon-class":"list"},slot:"prefix"})],2)],1),e._v(" "),a("el-col",{attrs:{xs:12,sm:8,md:4}},[a("el-date-picker",{staticClass:"filter-item",attrs:{size:e.searchSize,type:"datetime",placeholder:"开始时间",align:"right","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.listQuery.beginTime,callback:function(t){e.$set(e.listQuery,"beginTime",t)},expression:"listQuery.beginTime"}})],1),e._v(" "),a("el-col",{attrs:{xs:12,sm:8,md:4}},[a("el-date-picker",{staticClass:"filter-item",attrs:{size:e.searchSize,type:"datetime",placeholder:"结束时间",align:"right","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.listQuery.endTime,callback:function(t){e.$set(e.listQuery,"endTime",t)},expression:"listQuery.endTime"}})],1)],1),e._v(" "),a("div",{staticClass:"card-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"dataTable",staticStyle:{width:"100%"},attrs:{data:e.list,"row-key":e.rowKey,fit:"","empty-text":e.emptyText,"highlight-current-row":""}},[a("el-table-column",{attrs:{align:e.tableAlign,label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("defaultValue")(t.row.name)))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:e.tableAlign,label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filterGender")(t.row.gender)))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:e.tableAlign,label:"年龄"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("defaultValue")(t.row.age)))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:e.tableAlign,label:"人员类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("defaultValue")(t.row.personTypeName)))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:e.tableAlign,label:"相似度"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("defaultValue")(t.row.similarityThreshold)))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:e.tableAlign,label:"证件号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("defaultValue")(t.row.certificateId)))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:e.tableAlign,label:"注册图片",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("fancyBox",{attrs:{url:e.row.registerUrl}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:e.tableAlign,label:"抓拍图",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("fancyBox",{attrs:{url:e.row.captureUrl}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:e.tableAlign,label:"抓拍地点"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("defaultValue")(t.row.address)))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:e.tableAlign,label:"机器人",prop:"deviceId",formatter:e.formatRobot}}),e._v(" "),a("el-table-column",{attrs:{align:e.tableAlign,label:"抓拍时间",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("defaultValue")(t.row.captureTime)))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:e.tableAlign,label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-ext-details card-table__icon",staticStyle:{cursor:"pointer"},on:{click:function(a){return e.openDetail(t.row)}}})]}}])})],1)],1)],1)]),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"人脸识别详细信息","append-to-body":!0,top:"8vh",visible:e.dialogVisible,modal:e.needModal,"close-on-click-modal":e.closeOnClickModel,width:"700px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("capture-detail",e._b({},"capture-detail",e.temp,!1)),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("确定")])],1)],1)],1)},i=[],s=(a("7f7f"),a("a481"),a("db72")),n=a("2f62"),r=a("0a1f"),o=a("ed08"),c=a("469c"),u=Object(n["a"])("robot"),d=u.mapState,p=r["face"].getFacePersonType,f=r["face"].searchFaceRecognitionInfoWeb,g={name:"IdentifiedPersonQuery",filters:{filterType:function(e){var t="";switch(+e){case 2:t="黑名单";break;case 3:t="灰名单";break;case 4:t="VIP人员";break;case 5:t="一级人员";break;case 6:t="二级人员";break;case 7:t="三级人员";break;case 8:t="四级人员";break;default:t="白名单"}return t},filterGender:function(e){var t="";return t=1===e?"男":0===e?"女":"--",t}},components:{CaptureDetail:c["a"]},data:function(){var e=new Date;return e.setTime(e.getTime()-6048e5),{filename:this.$t("route.identified-person-query"),emptyText:null,list:[],total:null,listLoading:!0,pickerOptions:o["m"],listQuery:{page:1,limit:10,name:null,age:null,personType:null,gender:null,beginTime:Object(o["l"])(e),endTime:null},selectOptions2:[{value:"",label:"性别"},{value:0,label:"女"},{value:1,label:"男"}],typeList:[],needModal:!0,closeOnClickModel:!1,dialogFormVisible:!1,dialogVisible:!1,temp:{}}},computed:Object(s["a"])({},d({robotsList:function(e){return e.robotsList}})),created:function(){},mounted:function(){this.getPersonType(),this.getList()},methods:{goBack:function(){this.$router.replace({path:"/dashboard"})},getList:function(){var e=this;this.listLoading=!0,this.emptyText=null,f(this.listQuery).then(function(t){e.list=t.data.rows,e.total=t.data.total,e.listLoading=!1},function(t){console.log(t),e.listLoading=!1,e.emptyText="网络错误"})},getPersonType:function(){var e=this;p({page:1,limit:999}).then(function(t){e.typeList=t.data},function(e){console.log(e)})},rowKey:function(e){return e.id},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},handleCommand:function(e){if("undefined"!==typeof e)switch(e){case"xlsx":var t=["name","gender","age","personType","similarityThreshold","certificateId","registerUrl","captureUrl","captureBgUrl","captureTime","address"],a=["名称","性别","年龄","人员类型","相似度","证件号","注册图片","抓拍图","抓拍背景图","抓拍时间","抓拍地点"],l=this.list,i=this.filename;this.$g_exportToExcel({field:t,field_ZH:a,list:l,filename:i},this.formatJson);break}},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})},formatRobot:function(e,t,a,l){var i=this.robotsList,s="--";return i.some(function(e){return e.deviceId===a&&(s=e.robotName,!0)}),s},openDetail:function(e){var t=e.captureUrl,a=e.registerUrl,l=e.captureBackgroundUrl,i=e.name,s=e.certificateId,n=e.similarityThreshold,r=e.deviceName,o=e.gender,c=e.captureTime,u=e.age,d=e.personTypeName;this.temp={captureUrl:t,registerUrl:a,captureBackgroundUrl:l,similarity:n,robotName:r,name:i||"陌生人",num:s||"--",gender:o,time:c||"--",age:u||"--",type:d||"--"},this.dialogVisible=!0}}},m=g,v=(a("6334"),a("2877")),_=Object(v["a"])(m,l,i,!1,null,"2f469791",null);t["default"]=_.exports},"469c":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"capture-detail"},[a("div",{staticClass:"row clearfix"},[a("div",{staticClass:"info fl"},[a("div",{staticClass:"label fl"},[e._v("抓拍机器人：")]),e._v(" "),a("div",{staticClass:"content text-ellipsis"},[e._v(e._s(e.robotName))])]),e._v(" "),a("div",{staticClass:"info fl"},[a("div",{staticClass:"label fl",staticStyle:{width:"85px"}},[e._v("抓拍时间：")]),e._v(" "),a("div",{staticClass:"content text-ellipsis"},[e._v(e._s(e.time))])])]),e._v(" "),a("div",{staticClass:"row clearfix"},[a("p",{staticClass:"label"},[e._v("人脸识别结果：")]),e._v(" "),a("div",{staticClass:"result"},[a("div",{staticClass:"imgBox fl"},[a("span",{staticClass:"imgBox__title"},[e._v("抓拍图片")]),e._v(" "),a("div",{staticClass:"imgBox__wrap"},[a("img",{attrs:{src:e.captureUrl,alt:"抓拍图片"}})])]),e._v(" "),0!==e.similarity&&e.registerUrl?a("div",{staticClass:"chartBox fl"},[a("el-progress",{attrs:{type:"circle",percentage:parseFloat(e.similarity.toFixed(2)),width:60,"stroke-width":2}})],1):e._e(),e._v(" "),e.registerUrl?a("div",{staticClass:"imgBox fl"},[a("span",{staticClass:"imgBox__title"},[e._v("注册图片")]),e._v(" "),a("div",{staticClass:"imgBox__wrap"},[a("img",{attrs:{src:e.registerUrl,alt:"注册图片"}})])]):e._e(),e._v(" "),a("div",{staticClass:"txtBox"},[a("p",[e._v("姓名："+e._s(e.name))]),e._v(" "),a("p",[e._v("性别："+e._s(e._f("filterGender")(e.gender)))]),e._v(" "),a("p",[e._v("年龄："+e._s(e.age))]),e._v(" "),a("p",[e._v("人员类型："+e._s(e.type))]),e._v(" "),a("p",[e._v("证件号码："+e._s(e.num))])])])]),e._v(" "),a("div",{staticClass:"row bg clearfix"},[a("p",{staticClass:"label"},[e._v("背景图片：")]),e._v(" "),a("div",{staticClass:"wrap"},[a("img",{attrs:{src:e.captureBackgroundUrl,alt:"背景图片"}})])])])},i=[],s=(a("c5f6"),{filters:{filterGender:function(e){return 1===e?"男":0===e?"女":"--"}},props:{captureUrl:{type:String,default:""},registerUrl:{type:String,default:""},captureBackgroundUrl:{type:String,default:""},name:{type:String,default:"--"},num:{type:String,default:"--"},similarity:{type:[String,Number],required:!1,default:0},robotName:{type:String,default:"--"},gender:{type:String,default:"--"},time:{type:String,default:"--"},age:{type:[String,Number],default:"--"},type:{type:String,default:"--"}},data:function(){return{}},methods:{}}),n=s,r=(a("9172"),a("2877")),o=Object(r["a"])(n,l,i,!1,null,null,null);t["a"]=o.exports},"5f03":function(e,t,a){},6334:function(e,t,a){"use strict";var l=a("5f03"),i=a.n(l);i.a},9172:function(e,t,a){"use strict";var l=a("d269"),i=a.n(l);i.a},d269:function(e,t,a){}}]);
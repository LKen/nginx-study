(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a25248c"],{"79bc":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-container new scroll"},[e("div",{staticClass:"card",attrs:{"element-loading-text":"拼命加载中","element-loading-background":"rgba(0, 0, 0, 0.5)"}},[e("div",{staticClass:"card-title"},[e("div",{staticClass:"g-toolbar g-toolbar--inner",staticStyle:{"margin-bottom":"0"}},[e("div",{staticClass:"g-toolbar__label"},[t._v(t._s(t.filename))]),t._v(" "),e("div",{staticClass:"g-toolbar__actions"},[e("span",{staticClass:"action",on:{click:t.getList}},[e("svg-icon",{attrs:{"icon-class":"search"}}),t._v(" "),e("span",{staticClass:"action__desc"},[t._v(t._s(t.$t("base.search")))])],1)])])]),t._v(" "),e("h6",{staticClass:"card-subtitle"},[t._v("记录指定时间范围内机器人的工作情况")]),t._v(" "),e("div",{staticClass:"card-body"},[e("el-row",{staticClass:"filter-container",attrs:{gutter:20}},[e("el-col",{attrs:{xs:12,sm:8,md:4}},[e("el-date-picker",{staticClass:"filter-item",attrs:{size:t.formSize,type:"date",placeholder:"日期",align:"right","value-format":"yyyy-MM-dd"},model:{value:t.listQuery.beginDay,callback:function(a){t.$set(t.listQuery,"beginDay",a)},expression:"listQuery.beginDay"}})],1)],1),t._v(" "),e("div",{staticClass:"card-module bg flex",staticStyle:{height:"300px"}},[e("Toolbar",{attrs:{name:"告警数据统计"}}),t._v(" "),e("div",{staticClass:"card-chart"},[e("div",{staticClass:"card-chart__info left"},[e("div",{staticClass:"card-chart__info-tag"},[e("div",{staticClass:"card-chart__info-tag__msg"},[e("countTo",{staticClass:"num",attrs:{"start-val":0,"end-val":t.computedAlarmTotal,duration:t.duration}}),t._v(" "),e("span",{staticClass:"label"},[t._v("告警总数")])],1)])]),t._v(" "),e("div",{staticClass:"card-chart__content right"},[e("div",{staticClass:"chartBox"},[e("v-chart",{staticClass:"vchart",attrs:{"auto-resize":!0,options:t.computedAlarmLevelOption}})],1),t._v(" "),e("div",{staticClass:"chartBox"},[e("v-chart",{staticClass:"vchart",attrs:{"auto-resize":!0,options:t.computedAlarmStatusOption}})],1)])])],1),t._v(" "),e("div",{staticClass:"card-module bg flex",staticStyle:{height:"260px"}},[e("Toolbar",{attrs:{name:"人脸识别数据统计"}}),t._v(" "),e("div",{staticClass:"card-chart"},[e("div",{staticClass:"card-chart__info left"},[e("div",{staticClass:"card-chart__info-tag"},[e("div",{staticClass:"card-chart__info-tag__msg"},[e("countTo",{staticClass:"num",attrs:{"start-val":0,"end-val":t.computedFaceTotal,duration:t.duration}}),t._v(" "),e("span",{staticClass:"label"},[t._v("人脸识别总数")])],1)])]),t._v(" "),e("div",{staticClass:"card-chart__content right"},[e("v-chart",{staticClass:"vchart",attrs:{"auto-resize":!0,options:t.computedFaceOption,theme:"macarons"}})],1)])],1),t._v(" "),e("div",{staticClass:"card-module bg flex",staticStyle:{height:"380px"}},[e("Toolbar",{attrs:{name:"告警类型统计"}}),t._v(" "),e("div",{staticClass:"card-chart"},[e("div",{staticClass:"card-chart__content right"},[e("bar",{attrs:{"data-source":t.computedAlarmTypeOption}})],1)])],1),t._v(" "),e("div",{staticClass:"card-module bg flex",staticStyle:{height:"400px"}},[e("Toolbar",{attrs:{name:"机器人统计"}}),t._v(" "),e("div",{staticClass:"card-chart"},[e("div",{staticClass:"card-chart__info left flex"},[e("div",{staticClass:"card-chart__info-tag small"},[e("div",{staticClass:"card-chart__info-tag__msg"},[e("countTo",{staticClass:"num",attrs:{"start-val":0,"end-val":t.computedRobotTotal,duration:t.duration}}),t._v(" "),e("span",{staticClass:"label"},[t._v("机器人总数")])],1)]),t._v(" "),e("div",{staticClass:"card-chart__info-tag small"},[e("div",{staticClass:"card-chart__info-tag__msg"},[e("countTo",{staticClass:"num",attrs:{"start-val":0,"end-val":t.computedPatrolTotal,duration:t.duration}}),t._v(" "),e("span",{staticClass:"label"},[t._v("巡逻总数")])],1)]),t._v(" "),e("div",{staticClass:"card-chart__info-tag small"},[e("div",{staticClass:"card-chart__info-tag__msg"},[e("countTo",{staticClass:"num",attrs:{"start-val":0,"end-val":t.computedCaptureTotal,duration:t.duration}}),t._v(" "),e("span",{staticClass:"label"},[t._v("巡逻抓拍")])],1)])]),t._v(" "),e("div",{staticClass:"card-chart__content right"},[e("v-chart",{staticClass:"vchart",attrs:{"auto-resize":!0,options:t.computedRobotOption}})],1)])],1)],1)])])},o=[],i=e("7618"),s=(e("ac6a"),e("456d"),e("0a1f")),l=e("ed08"),n=(e("c037"),e("007d"),e("627c"),e("d28f"),e("b40f")),c=e("ec1b"),d=e.n(c),p=s["report"].patrolReportGroupByDay,u={name:"PatrolDaily",inject:["parseTime"],components:{bar:n["a"],countTo:d.a},data:function(){var t="rgba(255,255,255,.7)",a="rgba(255,255,255,.3)",e="rgba(255,255,255,.7)",r=new Date;return{list:[],listLoading:!0,formSize:"small",pickerOptions:l["m"],listQuery:{beginDay:this.parseTime(r,"{y}-{m}-{d}"),endDay:null},duration:3e3,pieOption:{tooltip:{show:!0,trigger:"item"},legend:{orient:"vertical",x:"right",textStyle:{color:t},inactiveColor:a},calculable:!0,series:[]},barOption:{title:{textStyle:{color:e,align:"center",fontSize:18},left:0,top:"5px"},color:["rgb(46, 199, 201)","rgb(203, 189, 231)","rgb(139, 200, 243)","rgb(255, 206, 166)","rgb(227, 161, 166)"],legend:{top:"5px",x:"right",textStyle:{color:t},inactiveColor:a},textStyle:{color:e},grid:{left:"0%",right:"4%",bottom:"5%",backgroundColor:"transparent",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"value",splitLine:{show:!1}},yAxis:{type:"category"}},filename:this.$t("route.patrol-daily")}},computed:{computedAlarmTotal:function(){var t=this.list;return t&&"undefined"!==typeof t.patrolInfo?t.patrolInfo.alarmTotal:0},computedFaceTotal:function(){var t=this.list;return t&&"undefined"!==typeof t.patrolInfo?t.patrolInfo.faceRecTotal+t.patrolInfo.faceUnRecTotal:0},computedRobotTotal:function(){var t=this.list;return t&&"undefined"!==typeof t.patrolInfo?t.patrolInfo.robotPatrols.length:0},computedPatrolTotal:function(){var t=this.list;return t&&"undefined"!==typeof t.patrolInfo?t.patrolInfo.patrolTotal:0},computedCaptureTotal:function(){var t=this.list;return t&&"undefined"!==typeof t.patrolInfo?t.patrolInfo.captureTotal:0},computedAlarmLevelOption:function(){var t=this.list,a=this.pieOption;if(!t||"undefined"===typeof t.patrolInfo)return a;var e=t.patrolInfo,r={legend:{data:["高级告警","中级告警","低级告警"],orient:"horizontal",itemGap:20,bottom:"10%",left:"25%"},color:["#D82D35","#E67A22","#E6C522"],tooltip:!1,series:[{name:"数据呈现",type:"pie",radius:[20,60],roseType:"radius",center:["50%","40%"],label:{show:!0,formatter:"{b} : {c} ({d}%)"},labelLine:{normal:{show:!0}},data:[{value:+e.firstLevel||0,name:"高级告警"},{value:+e.secondLevel||0,name:"中级告警"},{value:+e.thirdLevel||0,name:"低级告警"}]}]};return this._.merge({},a,r)},computedAlarmStatusOption:function(){var t=this.list,a=this.pieOption;if(!t||"undefined"===typeof t.patrolInfo)return a;var e=t.patrolInfo,r={legend:{data:["激活告警","已确认告警","关闭告警"],itemGap:20,orient:"horizontal",bottom:"10%",left:"25%"},color:["#FFB980","#D87A80","#8D98B3"],tooltip:!1,series:[{name:"数据呈现",type:"pie",radius:[20,60],center:["50%","40%"],label:{formatter:"{b} : {c} ({d}%)"},data:[{value:+e.activeAlarmCount||0,name:"激活告警"},{value:+e.confirmAlarmCount||0,name:"已确认告警"},{value:+e.closeAlarmCount||0,name:"关闭告警"}]}]};return this._.merge({},a,r)},computedFaceOption:function(){var t=this.list,a=this.pieOption;if(!t||"undefined"===typeof t.patrolInfo)return a;var e=t.patrolInfo,r={legend:{data:["已识别人员","陌生人"],orient:"vertical",itemGap:30,top:"22%",left:"68%"},series:[{name:"数据呈现",type:"pie",selectedMode:"single",radius:"50%",center:["40%","43%"],label:{formatter:"{b} : {c} ({d}%)"},data:[{value:+e.faceRecTotal||0,name:"已识别人员",selected:!0},{value:+e.faceUnRecTotal||0,name:"陌生人"}]}]};return this._.merge({},a,r)},computedAlarmTypeOption:function(){var t=this.list;if(!t||"undefined"===typeof t.patrolInfo)return{};var a=t.patrolInfo.alarmTypes,e=[],r=[];if(Array.isArray(a)&&a.length>0){r=Object.keys(a[0]),e.push(r);var o=a.map(function(t){var a=[];for(var e in t)a.push(t[e]);return a});e=e.concat(o)}return{direction:"vertical",grid:{top:"2%",left:"15%",right:"15%",bottom:"15%"},dataset:{source:e},xAxis:{name:"数量（次）"},barMaxWidth:25,series:[{name:"告警类型",type:"bar",encode:{x:"alarmCount",y:"alarmName"}}]}},computedRobotOption:function(){var t=this.list,a=this.barOption,e="rgba(255,255,255,.7)";if(!t||"undefined"===typeof t.patrolInfo)return{};var r=t.patrolInfo.robotPatrols,o=[],i=["robotName","id","alarmTotal","patrolTotal","captureTotal","faceRecTotal","faceUnRecTotal"];if(o.push(i),Array.isArray(r)&&r.length>0){var s=r.map(function(t){var a=["",0,0,0,0,0,0];for(var e in t)switch(e){case"robotName":a[0]=t[e];break;case"id":a[1]=t[e];break;case"alarmTotal":a[2]=t[e];break;case"patrolTotal":a[3]=t[e];break;case"captureTotal":a[4]=t[e];break;case"faceRecTotal":a[5]=t[e];break;case"faceUnRecTotal":a[6]=t[e];break}return a});o=o.concat(s)}var l={legend:{data:["告警总数","巡逻总数","抓拍总数","已识别人脸总数","陌生人脸总数"],orient:"horizontal",itemGap:20,left:"43%",top:"0%"},grid:{top:"8%",right:"15%",bottom:"10%"},dataset:{source:o},xAxis:{axisLine:{lineStyle:{color:e}}},yAxis:{axisLine:{lineStyle:{color:e}}},barMaxWidth:20,series:[{name:"告警总数",type:"bar",stack:"总量",barMinHeight:20,itemStyle:{normal:{barBorderRadius:5,label:{show:!0,position:"inside"}}},encode:{x:"alarmTotal",y:"robotName"}},{name:"巡逻总数",type:"bar",stack:"总量",barMinHeight:20,itemStyle:{normal:{barBorderRadius:5,label:{show:!0,position:"inside"}}},encode:{x:"patrolTotal",y:"robotName"}},{name:"抓拍总数",type:"bar",stack:"总量",barMinHeight:20,itemStyle:{normal:{barBorderRadius:5,label:{show:!0,position:"inside"}}},encode:{x:"captureTotal",y:"robotName"}},{name:"已识别人脸总数",type:"bar",stack:"总量",barMinHeight:20,itemStyle:{normal:{barBorderRadius:5,label:{show:!0,position:"inside"}}},encode:{x:"faceRecTotal",y:"robotName"}},{name:"陌生人脸总数",type:"bar",stack:"总量",barMinHeight:20,itemStyle:{normal:{barBorderRadius:5,label:{show:!0,position:"inside"}}},encode:{x:"faceUnRecTotal",y:"robotName"}}]};return this._.merge({},a,l)}},created:function(){},mounted:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,this.list=null,this.listQuery.endDay=this.listQuery.beginDay,p(this.listQuery).then(function(a){Array.isArray(a.data)&&a.data.length>0?t.list=a.data[0]:"object"===Object(i["a"])(a.data)&&(t.list=a.data),t.listLoading=!1},function(){})}}},m=u,v=(e("c44e"),e("2877")),f=Object(v["a"])(m,r,o,!1,null,"8c0851a0",null);a["default"]=f.exports},a74f:function(t,a,e){},c44e:function(t,a,e){"use strict";var r=e("a74f"),o=e.n(r);o.a}}]);
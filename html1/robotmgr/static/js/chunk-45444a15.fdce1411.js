(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45444a15"],{"00aa":function(e,t,i){"use strict";var a=i("f1d2"),s=i.n(a);s.a},"0811":function(e,t,i){"use strict";var a,s,o=i("db72"),l=i("2f62"),r=i("26a1"),n=Object(l["a"])("robot"),c=n.mapActions,d=n.mapState,p={name:"",filters:{filterOnline:function(e){return 1===e?"online":"offline"}},data:function(){return{LoadingRobot:!1,loadingText:"开始准备机器人",robotId:"",isReverse:!1,selectVisible:!1}},computed:Object(o["a"])({},Object(l["c"])(["fromRoute"]),{},d({robotsList:function(e){return e.robotsList}})),beforeRouteUpdate:function(e,t,i){console.log("%cbeforeRouteUpdate","color: #67C23A"),this.$_dispose(this.robotId),i()},beforeRouteLeave:function(e,t,i){console.log("beforeRouteLeave"),this.$_dispose(this.robotId),i()},created:function(){var e=this;this.$bus.$on("SwitchResult",function(t){e.loadingText=t?"加载数据成功":"加载数据成失败",e.LoadingRobot=!1})},methods:Object(o["a"])({$_robotVisible:function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),this.isReverse=!this.isReverse,this.selectVisible=!this.selectVisible;var t=this;return this.selectVisible&&Object(r["e"])(document.body,"click",function(e){return e.preventDefault&&e.preventDefault(),t.isReverse=!1,t.selectVisible=!1,!1}),!1},$_robotChange:function(e){this.robotId=e,this.LoadingRobot=!0,this.loadingText="机器人加载中",this.changeRobotID({robotId:+e,params:{LineInfoPushSwitch:"1",FaceCapturePushSwitch:"1",RobotStatusPushSwitch:"1",CoordinatePushSwitch:"1"}}),this.update&&this.update()},$_dispose:function(e){return this.$store.dispatch("robot/disableByRobotID",{robotId:e,params:{LineInfoPushSwitch:"0",FaceCapturePushSwitch:"0",RobotStatusPushSwitch:"0",CoordinatePushSwitch:"0"}})}},c(["changeRobotID"]))},m=p,h=(i("43f2"),i("2877")),u=Object(h["a"])(m,a,s,!1,null,null,null);t["a"]=u.exports},"43f2":function(e,t,i){"use strict";var a=i("f77e"),s=i.n(a);s.a},"5c42":function(e,t,i){"use strict";var a=i("9e1c"),s=i.n(a);s.a},"8e10":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container new"},[i("div",{staticClass:"card"},[i("el-scrollbar",[i("div",{staticClass:"card-title"},[i("Toolbar",{attrs:{name:e.filename,"prefix-icon":"back"},on:{"prefix-callback":e.goBack}},[i("span",{staticClass:"action no-click"},[i("svg-icon",{attrs:{"icon-class":"robot"}}),e._v(" "),i("el-popover",{ref:"popover",attrs:{"popper-class":"robot-popover",placement:"bottom",width:"200",trigger:"manual"},model:{value:e.selectVisible,callback:function(t){e.selectVisible=t},expression:"selectVisible"}},[i("div",{staticClass:"robot-popover__content"},[i("el-scrollbar",[i("ul",{staticClass:"robot-select"},e._l(e.robotsList,function(t){return i("li",{key:t.deviceId,staticClass:"robot-select__item",attrs:{"data-id":t.deviceId},on:{click:function(i){return e.selectClick(t.deviceId)}}},[e._v("\n                      "+e._s(t.robotName)+"\n                      "),i("span",{staticClass:"robot-select--suffix",class:e._f("filterOnline")(t.online)},[i("svg-icon",{attrs:{"icon-class":e._f("filterOnline")(t.online)}})],1)])}),0)])],1),e._v(" "),i("span",{staticClass:"action__desc robot-select",staticStyle:{cursor:"pointer"},attrs:{slot:"reference"},on:{click:function(t){return e.$_robotVisible(t)}},slot:"reference"},[e._v("\n                "+e._s(e.robotname)+"\n                "),i("i",{staticClass:"robot-select__caret el-input__icon el-icon-arrow-up",class:{"is-reverse":e.isReverse}})])])],1)])],1),e._v(" "),i("h6",{staticClass:"card-subtitle"},[e._v("机器人管理中心，可查询、设置机器人的状态信息，机器人单独配置页面入口")]),e._v(" "),i("div",{staticClass:"card-body",staticStyle:{overflow:"hidden"}},[i("div",{staticClass:"card-module bg flex",staticStyle:{height:"250px"}},[i("Toolbar",{attrs:{name:"录像时段配置"}},[i("span",{staticClass:"action",on:{click:e.handleRecordConfig}},[i("g-icon",{attrs:{"icon-class":"set"}}),e._v(" "),i("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.set")))])],1)]),e._v(" "),i("div",{staticClass:"card-chart"},[i("div",{staticClass:"card-chart__content"},[i("bar",{attrs:{"data-source":e.computedRecordConfig}})],1)])],1),e._v(" "),i("div",{staticClass:"card-module bg"},[i("Toolbar",{attrs:{name:"告警阈值配置"}},[i("span",{staticClass:"action",on:{click:e.handleThresholdPlus}},[i("g-icon",{attrs:{"icon-class":"plus"}}),e._v(" "),i("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.plus")))])],1)]),e._v(" "),i("div",{staticClass:"card-module__content g-flexbox"},e._l(e.list_threshold,function(t){return i("div",{key:t.id,staticClass:"g-flexbox__item"},[i("div",{staticClass:"thresholdPlan"},[i("div",{staticClass:"label"},[e._v("名称："),i("span",{staticClass:"word"},[e._v(e._s(e._f("defaultValue")(t.groupName)))])]),e._v(" "),i("div",{staticClass:"label"},[e._v("开始时段："),i("span",{staticClass:"word"},[e._v(e._s(e._f("defaultValue")(t.beginTime)))])]),e._v(" "),i("div",{staticClass:"label"},[e._v("结束时段："),i("span",{staticClass:"word"},[e._v(e._s(e._f("defaultValue")(t.endTime)))])]),e._v(" "),i("div",{staticClass:"label"},[e._v("生效状态：\n                  "),i("span",{staticClass:"word"},[1===+t.sendStatus?i("i",{staticClass:"icon el-icon-success"}):i("i",{staticClass:"icon el-icon-error"})])]),e._v(" "),i("div",{staticClass:"label"},[e._v("管理状态："),i("span",[i("g-icon",{attrs:{"icon-class":"edit"},on:{click:function(i){return e.handleEditThreshold(t)}}}),e._v(" "),i("g-icon",{attrs:{"icon-class":"delete"},on:{click:function(i){return e.handleDeleteThreshold(t)}}})],1)])])])}),0),e._v(" "),i("div",{staticClass:"pagination-container",staticStyle:{padding:"1rem 0.5rem"}},[i("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[5],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),i("div",{staticClass:"card-module bg flex",staticStyle:{height:"250px"}},[i("Toolbar",{attrs:{name:"告警时段配置"}},[i("span",{staticClass:"action",on:{click:e.handleAlarmConfig}},[i("g-icon",{attrs:{"icon-class":"set"}}),e._v(" "),i("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.set")))])],1)]),e._v(" "),i("div",{staticClass:"card-chart"},[i("div",{staticClass:"card-chart__content"},[i("bar",{attrs:{"data-source":e.computedAlarmConfig}})],1)])],1),e._v(" "),i("div",{staticClass:"card-module bg flex"},[i("Toolbar",{attrs:{name:"PDS算法配置"}},[i("span",{staticClass:"action",on:{click:e.getPdsLists}},[i("g-icon",{attrs:{"icon-class":"refresh"}}),e._v(" "),i("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.refresh")))])],1)]),e._v(" "),i("div",{staticClass:"card-module__content "},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading_pds,expression:"listLoading_pds"}],staticStyle:{width:"100%"},attrs:{data:e.list_pds,"row-key":e.rowKey,fit:"","empty-text":e.emptyText,"highlight-current-row":"","max-height":e.tableHeight}},[i("el-table-column",{attrs:{align:e.tableAlign,label:"通道名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.channelName))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:e.tableAlign,label:"检测类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filterDetect")(t.row.detectType)))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:e.tableAlign,label:"工作模式"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filterWorkflag")(t.row.workFlag)))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:e.tableAlign,label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filterTimetype")(t.row.timerType)))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:e.tableAlign,label:"开始日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.startDate))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:e.tableAlign,label:"结束日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.endDate))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:e.tableAlign,label:"操作",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("i",{staticClass:"gosuncn-icon  el-icon-ext-edit card-table__icon",staticStyle:{cursor:"pointer"},on:{click:function(i){return e.handlePdsEdit(t.row)}}})]}}])})],1)],1)],1),e._v(" "),i("div",{staticClass:"card-module bg"},[i("Toolbar",{attrs:{name:"人脸识别安防配置"}},[i("span",{staticClass:"action",on:{click:function(t){return e.saveConfig(1)}}},[i("g-icon",{class:{"icon-loading":e.sending1},attrs:{"icon-class":e.sending1?"loading":"save"}}),e._v(" "),i("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.save")))])],1)]),e._v(" "),i("div",{staticClass:"card-module__content "},[i("el-form",{ref:"faceSecurityForm",attrs:{model:e.temp_config,size:e.formSize,"label-position":e.formAlign,"label-width":"240px"}},[i("div",{staticClass:"flexForm"},[i("div",[i("el-form-item",{attrs:{label:"人脸识别安防模式开关"}},[i("el-switch",{attrs:{"active-color":"rgba(19, 206, 102, 0.4)","active-value":"1","inactive-value":"0"},model:{value:e.temp_config.FaceSecurityModeSwitch,callback:function(t){e.$set(e.temp_config,"FaceSecurityModeSwitch",t)},expression:"temp_config.FaceSecurityModeSwitch"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"夜间安防模式开始时间点"}},[i("el-time-picker",{staticStyle:{width:"150px"},attrs:{"value-format":"HH:mm:ss"},model:{value:e.temp_config.FaceSecurityModeStartTime,callback:function(t){e.$set(e.temp_config,"FaceSecurityModeStartTime",t)},expression:"temp_config.FaceSecurityModeStartTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"参观者持续时间（分钟）"}},[i("el-input-number",{staticStyle:{width:"150px"},attrs:{controls:!1,placeholder:"请填写"},model:{value:e.temp_config.FaceSecurityModeVisitDuration,callback:function(t){e.$set(e.temp_config,"FaceSecurityModeVisitDuration",t)},expression:"temp_config.FaceSecurityModeVisitDuration"}})],1)],1),e._v(" "),i("div",[i("el-form-item",{attrs:{label:"陌生人脸与无法辨别人脸的阈值设置"}},[i("el-slider",{staticStyle:{display:"inline-block",width:"120px","padding-left":"10px","vertical-align":"middle"},attrs:{min:0,max:100},model:{value:e.temp_config.FaceSecurityModeThreshold,callback:function(t){e.$set(e.temp_config,"FaceSecurityModeThreshold",t)},expression:"temp_config.FaceSecurityModeThreshold"}}),e._v(" "),i("span",{staticStyle:{"margin-left":"15px","vertical-align":"middle",color:"#aaaaaa"}},[e._v(e._s(e.temp_config.FaceSecurityModeThreshold))])],1),e._v(" "),i("el-form-item",{attrs:{label:"夜间安防模式结束时间点"}},[i("el-time-picker",{staticStyle:{width:"150px"},attrs:{"value-format":"HH:mm:ss"},model:{value:e.temp_config.FaceSecurityModeEndTime,callback:function(t){e.$set(e.temp_config,"FaceSecurityModeEndTime",t)},expression:"temp_config.FaceSecurityModeEndTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"人脸识别验证超过时间（秒）"}},[i("el-input-number",{staticStyle:{width:"150px"},attrs:{controls:!1,placeholder:"请填写"},model:{value:e.temp_config.FaceSecurityModeVerificationOverTime,callback:function(t){e.$set(e.temp_config,"FaceSecurityModeVerificationOverTime",t)},expression:"temp_config.FaceSecurityModeVerificationOverTime"}})],1)],1)])])],1)],1),e._v(" "),i("div",{staticClass:"card-module bg"},[i("Toolbar",{attrs:{name:"人脸识别配置"}},[i("span",{staticClass:"action",on:{click:function(t){return e.saveConfig(2)}}},[i("g-icon",{class:{"icon-loading":e.sending2},attrs:{"icon-class":e.sending2?"loading":"save"}}),e._v(" "),i("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.save")))])],1)]),e._v(" "),i("div",{staticClass:"card-module__content "},[i("el-form",{ref:"faceForm",attrs:{model:e.temp_config,size:e.formSize,"label-position":e.formAlign,"label-width":"200px"}},[i("g-divider",{attrs:{"content-position":"left"}},[i("span",{staticStyle:{color:"#409EFF","padding-left":"30px"}},[e._v("陌生人配置")])]),e._v(" "),i("div",{staticClass:"flexForm"},[i("div",[i("el-form-item",{attrs:{label:"是否保存"}},[i("el-switch",{attrs:{"active-color":"rgba(19, 206, 102, 0.4)","active-value":"1","inactive-value":"0"},model:{value:e.temp_config.FaceUnrecognitionSaveSwitch,callback:function(t){e.$set(e.temp_config,"FaceUnrecognitionSaveSwitch",t)},expression:"temp_config.FaceUnrecognitionSaveSwitch"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"播报开关"}},[i("el-switch",{attrs:{"active-color":"rgba(19, 206, 102, 0.4)","active-value":"1","inactive-value":"0"},model:{value:e.temp_config.FaceUnrecognizedBroadcastSwitch,callback:function(t){e.$set(e.temp_config,"FaceUnrecognizedBroadcastSwitch",t)},expression:"temp_config.FaceUnrecognizedBroadcastSwitch"}})],1)],1),e._v(" "),i("div",[i("el-form-item",{attrs:{label:"播报内容"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"例： 你好，{name}",clearable:""},model:{value:e.temp_config.FaceUnrecognizedBroadcastContent,callback:function(t){e.$set(e.temp_config,"FaceUnrecognizedBroadcastContent","string"===typeof t?t.trim():t)},expression:"temp_config.FaceUnrecognizedBroadcastContent"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"播报时间间隔（秒）"}},[i("el-input-number",{staticStyle:{width:"200px"},attrs:{controls:!1,placeholder:"请填写"},model:{value:e.temp_config.FaceUnrecognizedBroadcastInterval,callback:function(t){e.$set(e.temp_config,"FaceUnrecognizedBroadcastInterval",t)},expression:"temp_config.FaceUnrecognizedBroadcastInterval"}})],1)],1)]),e._v(" "),i("g-divider",{attrs:{"content-position":"left"}},[i("span",{staticStyle:{color:"#409EFF","padding-left":"30px"}},[e._v("已注册配置")])]),e._v(" "),i("div",{staticClass:"flexForm"},[i("div",[i("el-form-item",{attrs:{label:"播报开关"}},[i("el-switch",{attrs:{"active-color":"rgba(19, 206, 102, 0.4)","active-value":"1","inactive-value":"0"},model:{value:e.temp_config.FaceRecognizedBroadcastSwitch,callback:function(t){e.$set(e.temp_config,"FaceRecognizedBroadcastSwitch",t)},expression:"temp_config.FaceRecognizedBroadcastSwitch"}})],1)],1),e._v(" "),i("div",[i("el-form-item",{attrs:{label:"播报内容"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"例： 你好，{name}",clearable:""},model:{value:e.temp_config.FaceRecognizedBroadcastContent,callback:function(t){e.$set(e.temp_config,"FaceRecognizedBroadcastContent","string"===typeof t?t.trim():t)},expression:"temp_config.FaceRecognizedBroadcastContent"}})],1)],1)]),e._v(" "),i("g-divider",{attrs:{"content-position":"left"}},[i("span",{staticStyle:{color:"#409EFF","padding-left":"30px"}},[e._v("其他配置")])]),e._v(" "),i("div",{staticClass:"flexForm"},[i("div",[i("el-form-item",{attrs:{label:"旷视盒子IP和端口",prop:"MegviiFaceIp",rules:e.rules_face}},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"例： 127.0.0.1:80",clearable:""},model:{value:e.temp_config.MegviiFaceIp,callback:function(t){e.$set(e.temp_config,"MegviiFaceIp","string"===typeof t?t.trim():t)},expression:"temp_config.MegviiFaceIp"}})],1)],1)])],1)],1)],1),e._v(" "),i("div",{staticClass:"card-module bg"},[i("Toolbar",{attrs:{name:"功能配置"}},[i("span",{staticClass:"action",on:{click:function(t){return e.saveConfig(3)}}},[i("g-icon",{class:{"icon-loading":e.sending3},attrs:{"icon-class":e.sending3?"loading":"save"}}),e._v(" "),i("span",{staticClass:"action__desc"},[e._v(e._s(e.$t("base.save")))])],1)]),e._v(" "),i("div",{staticClass:"card-module__content "},[i("el-form",{ref:"systemForm",attrs:{inline:!0,model:e.temp_config,size:e.formSize,"label-position":e.formAlign,"label-width":"200px"}},[i("g-divider",{attrs:{"content-position":"left"}},[i("span",{staticStyle:{color:"#409EFF","padding-left":"30px"}},[e._v("值守模式配置")])]),e._v(" "),i("div",{staticClass:"flexForm"},[i("div",[i("el-form-item",{attrs:{label:"人证合一验证开关"}},[i("el-switch",{attrs:{"active-color":"rgba(19, 206, 102, 0.4)","active-value":"1","inactive-value":"0"},model:{value:e.temp_config.FaceUnattendedVerificationSwitch,callback:function(t){e.$set(e.temp_config,"FaceUnattendedVerificationSwitch",t)},expression:"temp_config.FaceUnattendedVerificationSwitch"}})],1)],1),e._v(" "),i("div",[i("el-form-item",{attrs:{label:"人脸识别后，播报内容（例）"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请填写"},model:{value:e.temp_config.FaceUnattendedRecognizedBroadcastContent,callback:function(t){e.$set(e.temp_config,"FaceUnattendedRecognizedBroadcastContent","string"===typeof t?t.trim():t)},expression:"temp_config.FaceUnattendedRecognizedBroadcastContent"}})],1)],1)]),e._v(" "),i("g-divider",{attrs:{"content-position":"left"}},[i("span",{staticStyle:{color:"#409EFF","padding-left":"30px"}},[e._v("VIP识别配置")])]),e._v(" "),i("div",{staticClass:"flexForm"},[i("div",[i("el-form-item",{attrs:{label:"播报自我介绍开关"}},[i("el-switch",{attrs:{"active-color":"rgba(19, 206, 102, 0.4)","active-value":"1","inactive-value":"0"},model:{value:e.temp_config.FaceVipRecognizedBroadcastSwitch,callback:function(t){e.$set(e.temp_config,"FaceVipRecognizedBroadcastSwitch",t)},expression:"temp_config.FaceVipRecognizedBroadcastSwitch"}})],1)],1),e._v(" "),i("div",[i("el-form-item",{attrs:{label:"播报自我介绍内容（例）"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"例：{姓名}您好！请刷卡"},model:{value:e.temp_config.FaceVipRecognizedBroadcastContent,callback:function(t){e.$set(e.temp_config,"FaceVipRecognizedBroadcastContent","string"===typeof t?t.trim():t)},expression:"temp_config.FaceVipRecognizedBroadcastContent"}})],1)],1)])],1)],1)],1)])])],1),e._v(" "),i("el-dialog",{attrs:{"append-to-body":!0,top:"20vh",title:e.dialogTitle,visible:e.dialogRecordVisible,modal:e.needModal,"close-on-click-modal":e.closeOnClickModel,width:"550px"},on:{"update:visible":function(t){e.dialogRecordVisible=t}}},[i("el-form",{ref:"dataForm",staticStyle:{width:"85%",margin:"0 auto"},attrs:{rules:e.rules,model:e.temp_record,size:e.formSize,"label-position":e.formAlign,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"设备ID",prop:"deviceIds"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp_record.deviceIds,callback:function(t){e.$set(e.temp_record,"deviceIds","string"===typeof t?t.trim():t)},expression:"temp_record.deviceIds"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"开关状态",prop:"status"}},[i("el-select",{staticClass:"filter-item",attrs:{placeholder:"默认 - 关"},on:{change:e.handleStatusChange},model:{value:e.temp_record.status,callback:function(t){e.$set(e.temp_record,"status",t)},expression:"temp_record.status"}},[i("el-option",{attrs:{label:"关",value:1}}),e._v(" "),i("el-option",{attrs:{label:"全天开",value:2}}),e._v(" "),i("el-option",{attrs:{label:"按时段开",value:3}}),e._v(" "),i("g-icon",{staticClass:"el-input__icon",attrs:{slot:"prefix","icon-class":"list"},slot:"prefix"})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"开始时间",prop:"startTime"}},[i("el-time-picker",{attrs:{disabled:1===e.temp_record.status||2===e.temp_record.status,"value-format":"HH:mm:ss"},model:{value:e.temp_record.startTime,callback:function(t){e.$set(e.temp_record,"startTime",t)},expression:"temp_record.startTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"结束时间",prop:"stopTime"}},[i("el-time-picker",{attrs:{disabled:1===e.temp_record.status||2===e.temp_record.status,"value-format":"HH:mm:ss"},model:{value:e.temp_record.stopTime,callback:function(t){e.$set(e.temp_record,"stopTime",t)},expression:"temp_record.stopTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"保存天数",prop:"limitDay"}},[i("el-input",{attrs:{type:"number"},model:{value:e.temp_record.limitDay,callback:function(t){e.$set(e.temp_record,"limitDay",e._n(t))},expression:"temp_record.limitDay"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"选择通道",prop:"devChannel"}},[i("el-checkbox-group",{model:{value:e.temp_record.selectChannels,callback:function(t){e.$set(e.temp_record,"selectChannels",t)},expression:"temp_record.selectChannels"}},e._l(e.channels,function(t){return i("el-checkbox",{key:t.channelId,attrs:{label:t.channelId,checked:0!==t.workFlag}},[e._v(e._s(t.channelName))])}),1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogRecordVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.sending,expression:"sending"}],attrs:{disabled:e.sending},on:{click:e.handleSaveRecord}},[e._v("保存")])],1)],1),e._v(" "),i("el-dialog",{attrs:{"append-to-body":!0,top:"20vh",title:e.dialogTitle,visible:e.dialogAlarmVisible,modal:e.needModal,"close-on-click-modal":e.closeOnClickModel,width:"450px"},on:{"update:visible":function(t){e.dialogAlarmVisible=t}}},[i("el-form",{ref:"dataForm2",staticStyle:{width:"85%",margin:"0 auto"},attrs:{rules:e.rules,model:e.temp_alarm,size:e.formSize,"label-position":e.formAlign,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"设备ID",prop:"deviceIds"}},[i("el-input",{attrs:{placeholder:"",disabled:!0},model:{value:e.temp_alarm.deviceIds,callback:function(t){e.$set(e.temp_alarm,"deviceIds","string"===typeof t?t.trim():t)},expression:"temp_alarm.deviceIds"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"开关状态",prop:"status"}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{placeholder:"默认 - 关"},on:{change:e.handleStatusChange2},model:{value:e.temp_alarm.status,callback:function(t){e.$set(e.temp_alarm,"status",t)},expression:"temp_alarm.status"}},[i("el-option",{attrs:{label:"关",value:1}}),e._v(" "),i("el-option",{attrs:{label:"全天开",value:2}}),e._v(" "),i("el-option",{attrs:{label:"按时段开",value:3}}),e._v(" "),i("g-icon",{staticClass:"el-input__icon",attrs:{slot:"prefix","icon-class":"list"},slot:"prefix"})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"开始时间",prop:"startTime"}},[i("el-time-picker",{staticStyle:{width:"100%"},attrs:{disabled:1===e.temp_alarm.status||2===e.temp_alarm.status,"value-format":"HH:mm:ss"},model:{value:e.temp_alarm.startTime,callback:function(t){e.$set(e.temp_alarm,"startTime",t)},expression:"temp_alarm.startTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"结束时间",prop:"stopTime"}},[i("el-time-picker",{staticStyle:{width:"100%"},attrs:{disabled:1===e.temp_alarm.status||2===e.temp_alarm.status,"value-format":"HH:mm:ss"},model:{value:e.temp_alarm.stopTime,callback:function(t){e.$set(e.temp_alarm,"stopTime",t)},expression:"temp_alarm.stopTime"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogAlarmVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.sending,expression:"sending"}],attrs:{disabled:e.sending},on:{click:e.handleSaveAlarm}},[e._v("保存")])],1)],1),e._v(" "),i("el-dialog",{attrs:{"append-to-body":!0,top:"5vh","custom-class":"threshold-dialog",title:e.dialogTitle,visible:e.dialogThresholdVisible,modal:e.needModal,"close-on-click-modal":e.closeOnClickModel,width:"1310px"},on:{"update:visible":function(t){e.dialogThresholdVisible=t}}},[i("el-form",{ref:"threshold",staticClass:"threshold",staticStyle:{width:"100%",margin:"0 auto"},attrs:{rules:e.rules,size:e.formSize,model:e.temp_threshold,"label-position":e.formAlign,"label-width":"170px"}},[i("el-form-item",{attrs:{label:"配置名称",prop:"groupName"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{size:e.formSize,placeholder:"输入阈值配置名称"},model:{value:e.temp_threshold.groupName,callback:function(t){e.$set(e.temp_threshold,"groupName","string"===typeof t?t.trim():t)},expression:"temp_threshold.groupName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"温度告警",prop:"configs.sTempTopLimit"}},[i("el-switch",{staticClass:"threshold__switch",attrs:{"active-color":e.activeColor,"active-value":e.switchValue.activeValue,"inactive-value":e.switchValue.inactiveValue},model:{value:e.temp_threshold.configs.cTempEnable,callback:function(t){e.$set(e.temp_threshold.configs,"cTempEnable",t)},expression:"temp_threshold.configs.cTempEnable"}}),e._v(" "),i("el-input",{staticClass:"threshold__input",staticStyle:{width:"260px"},attrs:{type:"number",placeholder:"请输入内容"},model:{value:e.temp_threshold.configs.sTempLowerLimit,callback:function(t){e.$set(e.temp_threshold.configs,"sTempLowerLimit",e._n(t))},expression:"temp_threshold.configs.sTempLowerLimit"}},[i("template",{slot:"prepend"},[e._v("下限")]),e._v(" "),i("template",{slot:"append"},[e._v("°C")])],2),e._v(" "),i("el-input",{staticClass:"threshold__input",staticStyle:{width:"260px"},attrs:{type:"number",placeholder:"请输入内容"},model:{value:e.temp_threshold.configs.sTempTopLimit,callback:function(t){e.$set(e.temp_threshold.configs,"sTempTopLimit",e._n(t))},expression:"temp_threshold.configs.sTempTopLimit"}},[i("template",{slot:"prepend"},[e._v("上限")]),e._v(" "),i("template",{slot:"append"},[e._v("°C")])],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"湿度告警",prop:"configs.sHumiditytopLimit"}},[i("el-switch",{staticClass:"threshold__switch",attrs:{"active-color":e.activeColor,"active-value":e.switchValue.activeValue,"inactive-value":e.switchValue.inactiveValue},model:{value:e.temp_threshold.configs.cHumidityEnable,callback:function(t){e.$set(e.temp_threshold.configs,"cHumidityEnable",t)},expression:"temp_threshold.configs.cHumidityEnable"}}),e._v(" "),i("el-input",{staticClass:"threshold__input",staticStyle:{width:"260px"},attrs:{type:"number",placeholder:"0-100"},model:{value:e.temp_threshold.configs.sHumidityLowerLimit,callback:function(t){e.$set(e.temp_threshold.configs,"sHumidityLowerLimit",e._n(t))},expression:"temp_threshold.configs.sHumidityLowerLimit"}},[i("template",{slot:"prepend"},[e._v("下限")]),e._v(" "),i("template",{slot:"append"},[e._v("%rh")])],2),e._v(" "),i("el-input",{staticClass:"threshold__input",staticStyle:{width:"260px"},attrs:{type:"number",placeholder:"0-100"},model:{value:e.temp_threshold.configs.sHumiditytopLimit,callback:function(t){e.$set(e.temp_threshold.configs,"sHumiditytopLimit",e._n(t))},expression:"temp_threshold.configs.sHumiditytopLimit"}},[i("template",{slot:"prepend"},[e._v("上限")]),e._v(" "),i("template",{slot:"append"},[e._v("%rh")])],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"声光告警设置"}},[i("el-switch",{staticClass:"threshold__switch",attrs:{"active-color":e.activeColor,"active-value":e.switchValue.activeValue,"inactive-value":e.switchValue.inactiveValue},model:{value:e.temp_threshold.configs.cTumbleEnable,callback:function(t){e.$set(e.temp_threshold.configs,"cTumbleEnable",t)},expression:"temp_threshold.configs.cTumbleEnable"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"红外热成像闯入告警设置"}},[i("el-switch",{staticClass:"threshold__switch",attrs:{"active-color":e.activeColor,"active-value":e.switchValue.activeValue,"inactive-value":e.switchValue.inactiveValue},model:{value:e.temp_threshold.configs.cHangEnable,callback:function(t){e.$set(e.temp_threshold.configs,"cHangEnable",t)},expression:"temp_threshold.configs.cHangEnable"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"电池告警",prop:"configs.cPowerTopLimit"}},[i("el-switch",{staticClass:"threshold__switch",attrs:{"active-color":e.activeColor,"active-value":e.switchValue.activeValue,"inactive-value":e.switchValue.inactiveValue},model:{value:e.temp_threshold.configs.cPowerEnable,callback:function(t){e.$set(e.temp_threshold.configs,"cPowerEnable",t)},expression:"temp_threshold.configs.cPowerEnable"}}),e._v(" "),i("el-input",{staticClass:"threshold__input",staticStyle:{width:"260px"},attrs:{type:"number",placeholder:"请输入内容"},model:{value:e.temp_threshold.configs.cPowerLowerLimit,callback:function(t){e.$set(e.temp_threshold.configs,"cPowerLowerLimit",e._n(t))},expression:"temp_threshold.configs.cPowerLowerLimit"}},[i("template",{slot:"prepend"},[e._v("电池低电量")]),e._v(" "),i("template",{slot:"append"},[e._v("%")])],2),e._v(" "),i("el-input",{staticClass:"threshold__input",staticStyle:{width:"260px"},attrs:{type:"number",placeholder:"请输入内容"},model:{value:e.temp_threshold.configs.cPowerTopLimit,callback:function(t){e.$set(e.temp_threshold.configs,"cPowerTopLimit",e._n(t))},expression:"temp_threshold.configs.cPowerTopLimit"}},[i("template",{slot:"prepend"},[e._v("电池高电量")]),e._v(" "),i("template",{slot:"append"},[e._v("%")])],2),e._v(" "),i("div",{staticClass:"threshold__group g-search-group g-search-group--prepend",staticStyle:{width:"310px"}},[i("div",{staticClass:"g-search-group__prepend"},[e._v("充电完成后执行")]),e._v(" "),i("el-select",{staticClass:"g-search-group__inner",attrs:{placeholder:"请选择"},model:{value:e.temp_threshold2.configs.cPowerCountLimit,callback:function(t){e.$set(e.temp_threshold2.configs,"cPowerCountLimit",t)},expression:"temp_threshold2.configs.cPowerCountLimit"}},[i("el-option",{attrs:{label:"自动巡逻",value:"0"}}),e._v(" "),i("el-option",{attrs:{label:"手动模式",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"值守巡逻",value:"2"}})],1)],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"低功耗设置"}},[i("el-switch",{staticClass:"threshold__switch",attrs:{"active-color":e.activeColor,"active-value":e.switchValue.activeValue,"inactive-value":e.switchValue.inactiveValue},model:{value:e.temp_threshold.configs.cPowerLowerEnable,callback:function(t){e.$set(e.temp_threshold.configs,"cPowerLowerEnable",t)},expression:"temp_threshold.configs.cPowerLowerEnable"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"毒气告警",prop:"configs.PoisonGasLimit"}},[i("el-switch",{staticClass:"threshold__switch",attrs:{"active-color":e.activeColor,"active-value":e.switchValue.activeValue,"inactive-value":e.switchValue.inactiveValue},model:{value:e.temp_threshold.configs.PoisonGasEnable,callback:function(t){e.$set(e.temp_threshold.configs,"PoisonGasEnable",t)},expression:"temp_threshold.configs.PoisonGasEnable"}}),e._v(" "),i("el-input",{staticClass:"threshold__input",staticStyle:{width:"260px"},attrs:{type:"number",placeholder:"请输入内容"},model:{value:e.temp_threshold.configs.PoisonGasLimit,callback:function(t){e.$set(e.temp_threshold.configs,"PoisonGasLimit",e._n(t))},expression:"temp_threshold.configs.PoisonGasLimit"}},[i("template",{slot:"prepend"},[e._v("阈值")]),e._v(" "),i("template",{slot:"append"},[e._v("ppm")])],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"避雨开关设置"}},[i("el-switch",{staticClass:"threshold__switch",attrs:{"active-color":e.activeColor,"active-value":e.switchValue.activeValue,"inactive-value":e.switchValue.inactiveValue},model:{value:e.temp_threshold.configs.ShelterPointEnable,callback:function(t){e.$set(e.temp_threshold.configs,"ShelterPointEnable",t)},expression:"temp_threshold.configs.ShelterPointEnable"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"CO2告警",prop:"configs.sCO2topLimit"}},[i("el-switch",{staticClass:"threshold__switch",attrs:{"active-color":e.activeColor,"active-value":e.switchValue.activeValue,"inactive-value":e.switchValue.inactiveValue},model:{value:e.temp_threshold.configs.cCO2Enable,callback:function(t){e.$set(e.temp_threshold.configs,"cCO2Enable",t)},expression:"temp_threshold.configs.cCO2Enable"}}),e._v(" "),i("el-input",{staticClass:"threshold__input",staticStyle:{width:"260px"},attrs:{type:"number",placeholder:"请输入内容"},model:{value:e.temp_threshold.configs.sCO2Limit,callback:function(t){e.$set(e.temp_threshold.configs,"sCO2Limit",e._n(t))},expression:"temp_threshold.configs.sCO2Limit"}},[i("template",{slot:"prepend"},[e._v("下限")]),e._v(" "),i("template",{slot:"append"},[e._v("ppm")])],2),e._v(" "),i("el-input",{staticClass:"threshold__input",staticStyle:{width:"260px"},attrs:{type:"number",placeholder:"请输入内容"},model:{value:e.temp_threshold.configs.sCO2topLimit,callback:function(t){e.$set(e.temp_threshold.configs,"sCO2topLimit",e._n(t))},expression:"temp_threshold.configs.sCO2topLimit"}},[i("template",{slot:"prepend"},[e._v("上限")]),e._v(" "),i("template",{slot:"append"},[e._v("ppm")])],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"烟火告警"}},[i("el-switch",{staticClass:"threshold__switch",attrs:{"active-color":e.activeColor,"active-value":e.switchValue.activeValue,"inactive-value":e.switchValue.inactiveValue},model:{value:e.temp_threshold.configs.cInfraredTempEnable,callback:function(t){e.$set(e.temp_threshold.configs,"cInfraredTempEnable",t)},expression:"temp_threshold.configs.cInfraredTempEnable"}}),e._v(" "),i("el-input",{staticClass:"threshold__input",staticStyle:{width:"260px"},attrs:{type:"number",placeholder:"请输入内容"},model:{value:e.temp_threshold.configs.sInfraredTempTopLimit,callback:function(t){e.$set(e.temp_threshold.configs,"sInfraredTempTopLimit",e._n(t))},expression:"temp_threshold.configs.sInfraredTempTopLimit"}},[i("template",{slot:"prepend"},[e._v("上限")]),e._v(" "),i("template",{slot:"append"},[e._v("°C")])],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"PM2.5"}},[i("el-switch",{staticClass:"threshold__switch",attrs:{"active-color":e.activeColor,"active-value":e.switchValue.activeValue,"inactive-value":e.switchValue.inactiveValue},model:{value:e.temp_threshold.configs.cPM25Enable,callback:function(t){e.$set(e.temp_threshold.configs,"cPM25Enable",t)},expression:"temp_threshold.configs.cPM25Enable"}}),e._v(" "),i("el-input",{staticClass:"threshold__input",staticStyle:{width:"260px"},attrs:{type:"number",placeholder:"请输入内容"},model:{value:e.temp_threshold.configs.nPM25TopLimit,callback:function(t){e.$set(e.temp_threshold.configs,"nPM25TopLimit",e._n(t))},expression:"temp_threshold.configs.nPM25TopLimit"}},[i("template",{slot:"prepend"},[e._v("阈值")]),e._v(" "),i("template",{slot:"append"},[e._v("pg/㎡")])],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"SO2告警"}},[i("el-switch",{staticClass:"threshold__switch",attrs:{"active-color":e.activeColor,"active-value":e.switchValue.activeValue,"inactive-value":e.switchValue.inactiveValue},model:{value:e.temp_threshold.configs.so2Enable,callback:function(t){e.$set(e.temp_threshold.configs,"so2Enable",t)},expression:"temp_threshold.configs.so2Enable"}}),e._v(" "),i("el-input",{staticClass:"threshold__input",staticStyle:{width:"260px"},attrs:{type:"number",placeholder:"请输入内容"},model:{value:e.temp_threshold.configs.so2Limit,callback:function(t){e.$set(e.temp_threshold.configs,"so2Limit",e._n(t))},expression:"temp_threshold.configs.so2Limit"}},[i("template",{slot:"prepend"},[e._v("阈值")]),e._v(" "),i("template",{slot:"append"},[e._v("ppm")])],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"H2S告警"}},[i("el-switch",{staticClass:"threshold__switch",attrs:{"active-color":e.activeColor,"active-value":e.switchValue.activeValue,"inactive-value":e.switchValue.inactiveValue},model:{value:e.temp_threshold.configs.h2sEnable,callback:function(t){e.$set(e.temp_threshold.configs,"h2sEnable",t)},expression:"temp_threshold.configs.h2sEnable"}}),e._v(" "),i("el-input",{staticClass:"threshold__input",staticStyle:{width:"260px"},attrs:{type:"number",placeholder:"请输入内容"},model:{value:e.temp_threshold.configs.h2sLimit,callback:function(t){e.$set(e.temp_threshold.configs,"h2sLimit",e._n(t))},expression:"temp_threshold.configs.h2sLimit"}},[i("template",{slot:"prepend"},[e._v("阈值")]),e._v(" "),i("template",{slot:"append"},[e._v("ppm")])],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"异响告警"}},[i("el-switch",{staticClass:"threshold__switch",attrs:{"active-color":e.activeColor,"active-value":e.switchValue.activeValue,"inactive-value":e.switchValue.inactiveValue},model:{value:e.temp_threshold.configs.cAudioEnable,callback:function(t){e.$set(e.temp_threshold.configs,"cAudioEnable",t)},expression:"temp_threshold.configs.cAudioEnable"}}),e._v(" "),i("el-input",{staticClass:"threshold__input",staticStyle:{width:"260px"},attrs:{type:"number",placeholder:"请输入内容"},model:{value:e.temp_threshold.configs.nAudioDBTopLimit,callback:function(t){e.$set(e.temp_threshold.configs,"nAudioDBTopLimit",e._n(t))},expression:"temp_threshold.configs.nAudioDBTopLimit"}},[i("template",{slot:"prepend"},[e._v("阈值")]),e._v(" "),i("template",{slot:"append"},[e._v("分贝")])],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"辐射告警"}},[i("el-switch",{staticClass:"threshold__switch",attrs:{"active-color":e.activeColor,"active-value":e.switchValue.activeValue,"inactive-value":e.switchValue.inactiveValue},model:{value:e.temp_threshold.configs.phaRayEnable,callback:function(t){e.$set(e.temp_threshold.configs,"phaRayEnable",t)},expression:"temp_threshold.configs.phaRayEnable"}}),e._v(" "),i("el-input",{staticClass:"threshold__input",staticStyle:{width:"240px"},attrs:{type:"number",placeholder:"请输入"},model:{value:e.temp_threshold.configs.alphaRay,callback:function(t){e.$set(e.temp_threshold.configs,"alphaRay",e._n(t))},expression:"temp_threshold.configs.alphaRay"}},[i("template",{slot:"prepend"},[e._v("α射线")]),e._v(" "),i("template",{slot:"append"},[e._v("CPS")])],2),e._v(" "),i("el-input",{staticClass:"threshold__input",staticStyle:{width:"240px"},attrs:{type:"number",placeholder:"请输入"},model:{value:e.temp_threshold.configs.betaRay,callback:function(t){e.$set(e.temp_threshold.configs,"betaRay",e._n(t))},expression:"temp_threshold.configs.betaRay"}},[i("template",{slot:"prepend"},[e._v("β射线")]),e._v(" "),i("template",{slot:"append"},[e._v("CPS")])],2),e._v(" "),i("el-input",{staticClass:"threshold__input",staticStyle:{width:"240px"},attrs:{type:"number",placeholder:"请输入"},model:{value:e.temp_threshold.configs.gammaRay,callback:function(t){e.$set(e.temp_threshold.configs,"gammaRay",e._n(t))},expression:"temp_threshold.configs.gammaRay"}},[i("template",{slot:"prepend"},[e._v("伽马射线")]),e._v(" "),i("template",{slot:"append"},[e._v("CPS")])],2),e._v(" "),i("el-input",{staticClass:"threshold__input",staticStyle:{width:"240px"},attrs:{type:"number",placeholder:"请输入"},model:{value:e.temp_threshold.configs.neutronRay,callback:function(t){e.$set(e.temp_threshold.configs,"neutronRay",e._n(t))},expression:"temp_threshold.configs.neutronRay"}},[i("template",{slot:"prepend"},[e._v("中子射线")]),e._v(" "),i("template",{slot:"append"},[e._v("CPS")])],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"开始日期",prop:"beginTime"}},[i("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.temp_threshold.beginTime,callback:function(t){e.$set(e.temp_threshold,"beginTime",t)},expression:"temp_threshold.beginTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"结束日期",prop:"endTime"}},[i("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.temp_threshold.endTime,callback:function(t){e.$set(e.temp_threshold,"endTime",t)},expression:"temp_threshold.endTime"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogThresholdVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.sending,expression:"sending"}],attrs:{disabled:e.sending},on:{click:e.handleSaveThreshold}},[e._v("保存")])],1)],1),e._v(" "),i("el-dialog",{attrs:{"append-to-body":!0,top:"5vh","custom-class":"threshold-dialog",title:e.dialogTitle,visible:e.dialogThresholdVisible2,modal:e.needModal,"close-on-click-modal":e.closeOnClickModel,width:"1310px"},on:{"update:visible":function(t){e.dialogThresholdVisible2=t}}},[i("el-form",{ref:"threshold2",staticClass:"threshold2",staticStyle:{width:"100%",margin:"0 auto"},attrs:{rules:e.rules,model:e.temp_threshold2,size:e.formSize,"label-position":e.formAlign,"label-width":"170px"}},[i("el-form-item",{attrs:{label:"配置名称",prop:"groupName"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"输入阈值配置名称"},model:{value:e.temp_threshold2.groupName,callback:function(t){e.$set(e.temp_threshold2,"groupName","string"===typeof t?t.trim():t)},expression:"temp_threshold2.groupName"}})],1),e._v(" "),e._l(e.row_threshold,function(t,a){return i("el-form-item",{key:a,attrs:{label:t.alarmName,prop:e._f("filterProp")(t.alarmName)}},[i("el-switch",{staticClass:"threshold__switch",attrs:{"active-color":e.activeColor,"active-value":e.switchValue.activeValue,"inactive-value":e.switchValue.inactiveValue},model:{value:e.temp_threshold2["configs"][t.switchTag],callback:function(i){e.$set(e.temp_threshold2["configs"],t.switchTag,i)},expression:"temp_threshold2['configs'][config.switchTag]"}}),e._v(" "),e._l(t.items,function(a,s){return["cPowerCountLimit"!==a.itemTag?i("el-input",{key:s,staticClass:"threshold__input",style:{width:(t.items.length>3?"240":"260")+"px"},attrs:{type:"number",placeholder:"请输入内容"},model:{value:e.temp_threshold2["configs"][a.itemTag],callback:function(t){e.$set(e.temp_threshold2["configs"],a.itemTag,e._n(t))},expression:"temp_threshold2['configs'][item.itemTag]"}},[i("template",{slot:"prepend"},[e._v(e._s(a.setName))]),e._v(" "),i("template",{slot:"append"},[e._v(e._s(a.unitName))])],2):i("div",{key:s,staticClass:"threshold__group g-search-group g-search-group--prepend",staticStyle:{width:"310px"}},[i("div",{staticClass:"g-search-group__prepend"},[e._v("充电完成后执行")]),e._v(" "),i("el-select",{staticClass:"g-search-group__inner",attrs:{placeholder:"请选择"},model:{value:e.temp_threshold2.configs.cPowerCountLimit,callback:function(t){e.$set(e.temp_threshold2.configs,"cPowerCountLimit",t)},expression:"temp_threshold2.configs.cPowerCountLimit"}},[i("el-option",{attrs:{label:"自动巡逻",value:"0"}}),e._v(" "),i("el-option",{attrs:{label:"手动模式",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"值守巡逻",value:"2"}})],1)],1)]})],2)}),e._v(" "),i("el-form-item",{attrs:{label:"开始日期",prop:"beginTime"}},[i("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.temp_threshold2.beginTime,callback:function(t){e.$set(e.temp_threshold2,"beginTime",t)},expression:"temp_threshold2.beginTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"结束日期",prop:"endTime"}},[i("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.temp_threshold2.endTime,callback:function(t){e.$set(e.temp_threshold2,"endTime",t)},expression:"temp_threshold2.endTime"}})],1)],2),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogThresholdVisible2=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.sending,expression:"sending"}],attrs:{disabled:e.sending},on:{click:e.handleSaveThreshold}},[e._v("保存")])],1)],1),e._v(" "),i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{"append-to-body":!0,top:"10vh",title:"编辑PDS算法配置",visible:e.dialogPdsVisible,modal:e.needModal,"close-on-click-modal":e.closeOnClickModel,width:"550px"},on:{"update:visible":function(t){e.dialogPdsVisible=t}}},[i("el-form",{ref:"pdsForm",staticStyle:{width:"90%",margin:"0 auto"},attrs:{rules:e.rules_pds,model:e.temp_pds,size:e.formSize,"label-position":e.formAlign,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"通道名称",prop:"channelName"}},[i("el-input",{attrs:{placeholder:"",clearable:""},model:{value:e.temp_pds.channelName,callback:function(t){e.$set(e.temp_pds,"channelName","string"===typeof t?t.trim():t)},expression:"temp_pds.channelName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"检测类型",prop:"detectType"}},[i("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.temp_pds.detectType,callback:function(t){e.$set(e.temp_pds,"detectType",t)},expression:"temp_pds.detectType"}},[i("el-option",{attrs:{label:"红外人体检测",value:1}}),e._v(" "),i("el-option",{attrs:{label:"高清人体检测",value:2}}),e._v(" "),i("el-option",{attrs:{label:"高清安全帽检测",value:3}}),e._v(" "),i("g-icon",{staticClass:"el-input__icon",attrs:{slot:"prefix","icon-class":"list"},slot:"prefix"})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"工作模式",prop:"workFlag"}},[i("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.temp_pds.workFlag,callback:function(t){e.$set(e.temp_pds,"workFlag",t)},expression:"temp_pds.workFlag"}},[i("el-option",{attrs:{label:"关闭",value:0}}),e._v(" "),i("el-option",{attrs:{label:"开启",value:1}}),e._v(" "),i("g-icon",{staticClass:"el-input__icon",attrs:{slot:"prefix","icon-class":"list"},slot:"prefix"})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"类型",prop:"timerType"}},[i("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.temp_pds.timerType,callback:function(t){e.$set(e.temp_pds,"timerType",t)},expression:"temp_pds.timerType"}},[i("el-option",{attrs:{label:"全天开",value:1}}),e._v(" "),i("el-option",{attrs:{label:"按时段开",value:3}}),e._v(" "),i("g-icon",{staticClass:"el-input__icon",attrs:{slot:"prefix","icon-class":"list"},slot:"prefix"})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"开始时间",prop:"startDate"}},[i("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd"},model:{value:e.temp_pds.startDate,callback:function(t){e.$set(e.temp_pds,"startDate",t)},expression:"temp_pds.startDate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"结束时间",prop:"endDate"}},[i("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd"},model:{value:e.temp_pds.endDate,callback:function(t){e.$set(e.temp_pds,"endDate",t)},expression:"temp_pds.endDate"}})],1),e._v(" "),e._l(e.temp_pds.param.time,function(t,a){return i("el-form-item",{key:"_"+a,staticClass:"timeControl",attrs:{label:"时间段",prop:"param.time."+a+".start_time",rules:{required:!0,validator:e.validatorPdsTime,trigger:"blur"}}},[i("el-col",{attrs:{span:11}},[i("el-time-picker",{staticStyle:{width:"140px"},attrs:{"value-format":"HH:mm:ss"},model:{value:t.start_time,callback:function(i){e.$set(t,"start_time",i)},expression:"item.start_time"}})],1),e._v(" "),i("el-col",{attrs:{span:11}},[i("el-time-picker",{staticStyle:{width:"140px"},attrs:{"value-format":"HH:mm:ss"},model:{value:t.end_time,callback:function(i){e.$set(t,"end_time",i)},expression:"item.end_time"}})],1),e._v(" "),i("g-icon",{staticClass:"card-table__icon",attrs:{"icon-class":"delete"},on:{click:function(t){return e.handlePdsDel(a)}}})],1)})],2),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.handleAddTime}},[e._v("添加时间段")]),e._v(" "),i("el-button",{on:{click:function(t){e.dialogPdsVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.sending,expression:"sending"}],attrs:{disabled:e.sending},on:{click:e.handlePdsSubmit}},[e._v("保存")])],1)],1)],1)},s=[],o=(i("4917"),i("ac6a"),i("20d6"),i("a481"),i("28a5"),i("768b")),l=i("db72"),r=i("2f62"),n=i("ed08"),c=i("61f7"),d=i("0811"),p=i("0a1f"),m=i("b40f"),h=(i("7f7f"),function(e,t){var i=t._c;return i("div",t._g(t._b({class:[t.data.staticClass,"g-divider","g-divider--"+t.props.direction,"is-"+t.props.contentPosition]},"div",t.data.attrs,!1),t.listeners),[t.slots().default&&"vertical"!==t.props.direction?i("div",{class:["g-divider__text"]},[t._t("default")],2):t._e()])}),u=[],v={name:"GDivider",props:{direction:{type:String,default:"horizontal",validator:function(e){return-1!==["horizontal","vertical"].indexOf(e)}},contentPosition:{type:String,default:"left",validator:function(e){return-1!==["left","center","right"].indexOf(e)}}}},_=v,f=i("2877"),g=Object(f["a"])(_,h,u,!0,null,null,null),b=g.exports;b.install=function(e){e.component(b.name,b)};var w=b,y=Object(r["a"])("robot"),C=y.mapState,T=y.mapActions,x=p["device"].saveRobotConfig,S=p["device"].selectRobotConfig,k=p["device"].setPdsConfig,F=p["device"].searchPdsConfig,V=p["device"].setAlarmThresholdConfig,L=p["device"].deleteAlarmThresholdConfig,$=p["device"].findAlarmThresholdConfig,P=p["device"].setDeviceAlarmBatch,I=p["device"].findAlarmSetById,E=p["device"].setDeviceRecordBatch,R=p["device"].getDeviceChannels,D=p["device"].findRecordSetById,M={name:"RobotConfig",components:{Bar:m["a"],GDivider:w},filters:{filterProp:function(e){var t="",i="configs.";switch(e){case"温度告警":t="".concat(i,"sTempTopLimit");break;case"湿度告警":t="".concat(i,"sHumiditytopLimit");break;case"电池告警":t="".concat(i,"cPowerTopLimit");break;case"毒气告警":t="".concat(i,"PoisonGasLimit");break;case"CO2告警":t="".concat(i,"sCO2topLimit");break;default:t=""}return t},filterDetect:function(e){var t="";switch(+e){case 1:t="红外人体检测";break;case 2:t="高清人体检测";break;case 3:t="高清安全帽检测";break;default:t="未知"}return t},filterWorkflag:function(e){var t="";switch(+e){case 0:t="关闭";break;case 1:t="开启";break;default:t="未知"}return t},filterTimetype:function(e){var t="";switch(+e){case 1:t="全天开";break;case 3:t="按时段开";break;default:t="未知"}return t}},mixins:[d["a"]],data:function(){var e=this,t=function(t,i,a){var s="录像时段设置"===e.dialogTitle?e.temp_record.status:"告警时段设置"===e.dialogTitle?e.temp_alarm.status:0;3===+s&&(i||a(new Error("开始时间不能为空"))),a()},i=function(t,i,a){var s="录像时段设置"===e.dialogTitle?e.temp_record.status:"告警时段设置"===e.dialogTitle?e.temp_alarm.status:0;3===+s&&(i||a(new Error("结束时间不能为空"))),a()},a=function(t,i,a){var s="",o="";"告警阈值设置"===e.dialogTitle?(s=e.temp_threshold.configs.sHumiditytopLimit,o=e.temp_threshold.configs.sHumidityLowerLimit):(s=e.temp_threshold2.configs.sHumiditytopLimit,o=e.temp_threshold2.configs.sHumidityLowerLimit),isNaN(s)||isNaN(o)||+s<0||+s>100||+o<0||+o>100?a(new Error("湿度告警阈值错误")):+o>+s?a(new Error("下限不能大于上限")):a()},s=function(t,i,a){var s="",o="";"告警阈值设置"===e.dialogTitle?(s=e.temp_threshold.configs.sTempTopLimit,o=e.temp_threshold.configs.sTempLowerLimit):(s=e.temp_threshold2.configs.sTempTopLimit,o=e.temp_threshold2.configs.sTempLowerLimit),isNaN(s)||isNaN(o)?a(new Error("温度阈值配置错误")):+o>+s?a(new Error("下限不能大于上限")):a()},o=function(t,i,a){var s="",o="";"告警阈值设置"===e.dialogTitle?(s=e.temp_threshold.configs.cPowerTopLimit,o=e.temp_threshold.configs.cPowerLowerLimit):(s=e.temp_threshold2.configs.cPowerTopLimit,o=e.temp_threshold2.configs.cPowerLowerLimit),isNaN(s)||isNaN(o)||+s<0||+s>100||+o<0||+o>100?a(new Error("电池电量阈值错误")):+o>+s?a(new Error("下限不能大于上限")):a()},l=function(t,i,a){var s="";s="告警阈值设置"===e.dialogTitle?e.temp_threshold.configs.PoisonGasLimit:e.temp_threshold2.configs.PoisonGasLimit,isNaN(s)||+s<0?a(new Error("毒气告警阈值错误")):a()},r=function(t,i,a){var s="",o="";"告警阈值设置"===e.dialogTitle?(s=e.temp_threshold.configs.sCO2topLimit,o=e.temp_threshold.configs.sCO2Limit):(s=e.temp_threshold2.configs.sCO2topLimit,o=e.temp_threshold2.configs.sCO2Limit),isNaN(s)||isNaN(o)||+s<0||+s>100||+o<0||+o>100?a(new Error("CO2告警阈值错误")):+o>+s?a(new Error("下限不能大于上限")):a()};return{filename:this.$t("route.robot-config",{}),emptyText:null,tableHeight:320,list_threshold:[],total:null,listLoading:!0,listQuery:{page:1,limit:5,deviceId:""},checkAll:!1,temp_record:{deviceIds:null,status:1,startTime:null,stopTime:null,limitDay:null,selectChannels:[]},temp_alarm:{deviceIds:null,status:1,startTime:null,stopTime:null},temp_threshold:{deviceId:"",groupName:"",beginTime:"",endTime:"",id:"",configs:{cTempEnable:"1",cHumidityEnable:"1",cTumbleEnable:"0",cHangEnable:"0",cPowerEnable:"0",cPowerLowerEnable:"0",PoisonGasEnable:"0",ShelterPointEnable:"0",cCO2Enable:"0",cInfraredTempEnable:"0",cPM25Enable:"0",so2Enable:"0",h2sEnable:"0",cAudioEnable:"0",phaRayEnable:"0",PoisonGasLimit:"",alphaRay:"",betaRay:"",cPowerCountLimit:"0",cPowerLowerLimit:"",cPowerTopLimit:"",gammaRay:"",h2sLimit:"",nAudioDBTopLimit:"0",nPM25TopLimit:"",neutronRay:"",sCO2Limit:"",sCO2topLimit:"",sHumidityLowerLimit:"",sHumiditytopLimit:"",sInfraredTempTopLimit:"",sTempLowerLimit:"",sTempTopLimit:"",so2Limit:""}},temp_threshold2:{deviceId:"",groupName:"",beginTime:"",endTime:"",id:"",configs:{}},robotId:"",row_record:{},row_alarm:{},row_threshold:[],channels:[],activeColor:"rgba(19, 206, 102, 0.4)",switchValue:{activeValue:"1",inactiveValue:"0"},list_pds:[],listLoading_pds:!1,temp_pds:{id:"",workFlag:"",timerType:"",channelId:"",detectType:"",startDate:"",endDate:"",channelName:"",param:{time:[]}},pickerOptions:n["m"],dialogTitle:"",needModal:!0,closeOnClickModel:!1,dialogRecordVisible:!1,dialogAlarmVisible:!1,dialogThresholdVisible:!1,dialogThresholdVisible2:!1,dialogPdsVisible:!1,sending:!1,rules:{startTime:[{validator:t,trigger:"change"}],stopTime:[{validator:i,trigger:"change"}],status:[{required:!0,message:"开关状态不能为空",trigger:"blur"}],groupName:[{required:!0,message:"阈值名称不能为空",trigger:"blur"}],beginTime:[{required:!0,message:"开始日期不能为空",trigger:"blur"}],endTime:[{required:!0,message:"结束日期不能为空",trigger:"blur"}],"configs.sHumiditytopLimit":[{validator:a,trigger:"blur"}],"configs.sTempTopLimit":[{validator:s,trigger:"blur"}],"configs.cPowerTopLimit":[{validator:o,trigger:"blur"}],"configs.PoisonGasLimit":[{validator:l,trigger:"blur"}],"configs.sCO2topLimit":[{validator:r,trigger:"blur"}]},rules_pds:{channelName:[{required:!0,message:"不能为空",trigger:"blur"}],detectType:[{required:!0,message:"不能为空",trigger:"change"}],workFlag:[{required:!0,message:"不能为空",trigger:"change"}],timerType:[{required:!0,message:"不能为空",trigger:"blur"}],startDate:[{required:!0,message:"不能为空",trigger:"blur"}],endDate:[{required:!0,message:"不能为空",trigger:"blur"}]},temp_config:{FaceSecurityModeSwitch:"",FaceSecurityModeStartTime:"",FaceSecurityModeEndTime:"",FaceSecurityModeThreshold:0,FaceSecurityModeVisitDuration:"",FaceSecurityModeVerificationOverTime:"",MegviiFaceIp:"",FaceUnrecognitionSaveSwitch:"",FaceRecognizedBroadcastSwitch:"",FaceRecognizedBroadcastContent:"",FaceUnrecognizedBroadcastSwitch:"",FaceUnrecognizedBroadcastContent:"",FaceUnrecognizedBroadcastInterval:"",FaceUnattendedVerificationSwitch:"",FaceUnattendedRecognizedBroadcastContent:"",FaceVipRecognizedBroadcastSwitch:"",FaceVipRecognizedBroadcastContent:""},sending1:!1,sending2:!1,sending3:!1,rules_face:{validator:function(e,t,i){t?Object(c["f"])(t)?i():i(new Error("IP和端口格式不正确")):i()},trigger:"blur"}}},computed:Object(l["a"])({robotname:function(){var e=this.$store.getters["robot/getRobotById"](this.robotId);return e?e.robotName:"--"},computedRecordConfig:function(){var e=this.row_record,t=e.startDate,i=e.stopDate,a=e.status,s=0,l=0,r=0,n=[];if(2===a)s=0,l=0,n=[{name:"Time",type:"bar",stack:"总量",data:[24]}];else if(3===a){if(t&&"--"!==t&&i&&"--"!==i){var c=86400,d=t.split(":"),p=Object(o["a"])(d,3),m=p[0],h=p[1],u=p[2],v=i.split(":"),_=Object(o["a"])(v,3),f=_[0],g=_[1],b=_[2];s=parseFloat(((3600*m+60*h+1*u)/c*24).toFixed(2)),l=parseFloat(((3600*f+60*g+1*b)/c*24).toFixed(2)),s=s<0?0:s>24?24:s,l=l<0?0:l>24?24:l,l<s?(s=l+s,l=s-l,s-=l,r=l-s,l=24-l,n=[{name:"Time",type:"bar",stack:"总量",data:[s]},{name:"Center",type:"bar",stack:"总量",data:[r],itemStyle:{normal:{barBorderColor:"rgba(0,0,0,0)",color:"rgba(0,0,0,0)"},emphasis:{barBorderColor:"rgba(0,0,0,0)",color:"rgba(0,0,0,0)"}}},{name:"End",type:"bar",stack:"总量",data:[l]}]):(r=l-s,l=0,n=[{name:"Time",type:"bar",stack:"总量",data:[s],itemStyle:{normal:{barBorderColor:"rgba(0,0,0,0)",color:"rgba(0,0,0,0)"},emphasis:{barBorderColor:"rgba(0,0,0,0)",color:"rgba(0,0,0,0)"}}},{name:"Center",type:"bar",stack:"总量",data:[r]}])}}else s=0,r=0,l=0,n=[];return{direction:"vertical",grid:{top:"5%",left:"0.5%",right:"5%",bottom:"10%"},xAxis:{name:"单位：H",type:"value",min:0,max:24,interval:1},yAxis:{type:"category",splitLine:{show:!1},data:["录像"]},barMaxWidth:25,tooltip:{show:!1,trigger:"none",triggerOn:"none"},label:{show:!1},series:n}},computedAlarmConfig:function(){var e=this.row_alarm,t=e.startDate,i=e.stopDate,a=e.status,s=0,l=0,r=0,n=[];if(2===a)s=0,l=0,n=[{name:"Time",type:"bar",stack:"总量",data:[24]}];else if(3===a){if(t&&"--"!==t&&i&&"--"!==i){var c=86400,d=t.split(":"),p=Object(o["a"])(d,3),m=p[0],h=p[1],u=p[2],v=i.split(":"),_=Object(o["a"])(v,3),f=_[0],g=_[1],b=_[2];s=parseFloat(((3600*m+60*h+1*u)/c*24).toFixed(2)),l=parseFloat(((3600*f+60*g+1*b)/c*24).toFixed(2)),s=s<0?0:s>24?24:s,l=l<0?0:l>24?24:l,l<s?(s=l+s,l=s-l,s-=l,r=l-s,l=24-l,n=[{name:"Time",type:"bar",stack:"总量",data:[s]},{name:"Center",type:"bar",stack:"总量",data:[r],itemStyle:{normal:{barBorderColor:"rgba(0,0,0,0)",color:"rgba(0,0,0,0)"},emphasis:{barBorderColor:"rgba(0,0,0,0)",color:"rgba(0,0,0,0)"}}},{name:"End",type:"bar",stack:"总量",data:[l]}]):(r=l-s,l=0,n=[{name:"Time",type:"bar",stack:"总量",data:[s],itemStyle:{normal:{barBorderColor:"rgba(0,0,0,0)",color:"rgba(0,0,0,0)"},emphasis:{barBorderColor:"rgba(0,0,0,0)",color:"rgba(0,0,0,0)"}}},{name:"Center",type:"bar",stack:"总量",data:[r]}])}}else s=0,r=0,l=0,n=[];return{direction:"vertical",grid:{top:"5%",left:"0.5%",right:"5%",bottom:"10%"},xAxis:{name:"单位：H",type:"value",min:0,max:24,interval:1},yAxis:{type:"category",splitLine:{show:!1},data:["告警"]},barMaxWidth:25,tooltip:{show:!1,trigger:"none",triggerOn:"none"},label:{show:!1},series:n}},computedProp:function(e){var t="",i="configs.";switch(e){case"温度告警":t="".concat(i,"sTempTopLimit");break;default:t=""}return t}},C({robotsList:function(e){return e.robotsList}})),created:function(){var e=this.$route.params.id;this.robotId=e,this.update()},methods:Object(l["a"])({goBack:function(){var e=this.fromRoute;e.fullPath.indexOf("/dashboard")>-1?this.$router.go(-1):this.$router.replace({path:"/config-center/system-mgr/robot-mgr"})},update:function(){this.fetchRecordData(),this.fetchAlarmData(),this.fetchThresholdData(),this.getPdsLists(),this.fetchRobotConf()},selectClick:function(e){var t=this.robotId;if(!t||e===t)return!1;this.isReverse=!1,this.selectVisible=!1,this.robotId=e,this.update&&this.update()},handleStatusChange:function(e){this.$refs["dataForm"]&&this.$refs["dataForm"].clearValidate(),1===+e?(this.temp_record.startTime="00:00:00",this.temp_record.stopTime="00:00:00"):2===+e&&(this.temp_record.startTime="00:00:00",this.temp_record.stopTime="23:59:59")},handleStatusChange2:function(e){this.$refs["dataForm2"]&&this.$refs["dataForm2"].clearValidate(),1===+e?(this.temp_alarm.startTime="00:00:00",this.temp_alarm.stopTime="00:00:00"):2===+e&&(this.temp_alarm.startTime="00:00:00",this.temp_alarm.stopTime="23:59:59")},handleIssue:function(){},handleSizeChange:function(e){this.listQuery.limit=e,this.fetchThresholdData()},handleCurrentChange:function(e){this.listQuery.page=e,this.fetchThresholdData()},fetchRecordData:function(){var e=this,t=this.robotId;D({deviceId:t}).then(function(t){e.row_record=t.data},function(e){console.log(e)})},handleRecordConfig:function(){var e=this;this.dialogTitle="录像时段设置",this.dialogRecordVisible=!0;var t=this.row_record,i=t.deviceId,a=t.status,s=t.startDate,o=t.stopDate,l=t.limitDay;this.temp_record=Object.assign({},this.temp_record,{deviceIds:i,status:a,startTime:s,stopTime:o,limitDay:l}),R({deviceId:i}).then(function(t){e.channels=t.data},function(e){console.log(e)}),this.$nextTick(function(){e.$refs["dataForm"].clearValidate()})},handleSaveRecord:function(){var e=this;this.$refs["dataForm"].validate(function(t){if(t&&(e.sending=!0,"录像时段设置"===e.dialogTitle)){var i=e.temp_record.selectChannels.join("|");E(Object.assign({},e.temp_record,{selectChannels:i})).then(function(t){var i=e.temp_record,a=i.deviceIds,s=i.status,o=i.startTime,l=i.stopTime,r=i.limitDay;e.row_record=Object.assign({},e.row_record,{deviceId:a,status:s,startDate:o,stopDate:l,limitDay:r}),e.$message.success(t.msg),e.sending=!1,e.dialogRecordVisible=!1},function(t){console.log(t),e.sending=!1})}})},fetchAlarmData:function(){var e=this,t=this.robotId;I({deviceId:t}).then(function(t){e.row_alarm=t.data},function(e){console.log(e)})},handleAlarmConfig:function(){var e=this;this.dialogTitle="告警时段设置",this.dialogAlarmVisible=!0;var t=this.row_alarm,i=t.deviceId,a=t.status,s=t.startDate,o=t.stopDate;this.temp_alarm=Object.assign({},this.temp_alarm,{deviceIds:i,status:a,startTime:s,stopTime:o}),this.$nextTick(function(){e.$refs["dataForm2"].clearValidate()})},handleSaveAlarm:function(){var e=this;this.$refs["dataForm2"].validate(function(t){t&&(e.sending=!0,"告警时段设置"===e.dialogTitle&&P(e.temp_alarm).then(function(t){var i=e.temp_alarm,a=i.deviceIds,s=i.status,o=i.startTime,l=i.stopTime;e.row_alarm=Object.assign({},e.row_alarm,{deviceId:a,status:s,startDate:o,stopDate:l}),e.$message.success(t.msg),e.sending=!1,e.dialogAlarmVisible=!1},function(t){console.log(t),e.sending=!1}))})},fetchThresholdData:function(){var e=this,t=this.robotId;this.listQuery.deviceId=t,this.listLoading=!0,$(this.listQuery).then(function(t){e.list_threshold=t.data.rows,e.total=t.data.total,e.listLoading=!1},function(t){console.log(t),e.listLoading=!1,e.emptyText="网络错误"})},handleThresholdPlus:function(){var e=this;this.dialogTitle="告警阈值设置",this.dialogThresholdVisible=!0,this.temp_threshold.deviceId=this.robotId,this.$nextTick(function(){e.$refs["threshold"]&&e.$refs["threshold"].resetFields(),e.$refs["threshold"]&&e.$refs["threshold"].clearValidate()})},handleDeleteThreshold:function(e){var t=this,i=e.id;this.$confirm("此操作将永久删除该配置, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){L({id:i}).then(function(e){t.$message({type:"success",message:e.msg}),t.list_threshold.splice(t._.findIndex(t.list_threshold,{id:i}),1)},function(e){console.log(e)})}).catch(function(){})},handleSaveThreshold:function(){var e=this;"告警阈值设置"===this.dialogTitle?this.$refs["threshold"].validate(function(t){t&&(e.sending=!0,V(e.temp_threshold).then(function(t){e.$message.success(t.msg),e.sending=!1,e.dialogThresholdVisible=!1,e.list_threshold.length<e.listQuery.limit&&e.list_threshold.unshift(t.data)},function(t){console.log(t),e.sending=!1}))}):this.$refs["threshold2"].validate(function(t){t&&(e.sending=!0,V(e.temp_threshold2).then(function(t){e.$message.success(t.msg),e.sending=!1,e.dialogThresholdVisible2=!1,e.list_threshold.splice(e._.findIndex(e.list_threshold,{id:e.temp_threshold2.id}),1,t.data)},function(t){console.log(t),e.sending=!1}))})},handleEditThreshold:function(e){var t=this,i=e.configs,a=e.beginTime,s=e.endTime,o=e.id,l=e.deviceId,r=e.groupName;this.temp_threshold2=Object.assign({},{beginTime:a,endTime:s,id:o,deviceId:l,groupName:r}),this.row_threshold=i,this.dialogTitle="告警阈值设置 - 更新",this.dialogThresholdVisible2=!0;var n={};i.forEach(function(e){var t=e.switchTag,i=e.switchValue,a=e.items;n[t]=i,Array.isArray(a)&&a.length>0&&a.forEach(function(e){var t=e.itemTag,i=e.setValue;n[t]=i})}),this.$set(this.temp_threshold2,"configs",n),this.$nextTick(function(){t.$refs["threshold2"]&&t.$refs["threshold2"].clearValidate()})},getPdsLists:function(){var e=this,t=this.robotId;this.listLoading_pds=!0,F({deviceId:t,page:1,limit:50}).then(function(t){e.list_pds=t.data.rows,e.listLoading_pds=!1},function(t){e.listLoading_pds=!1,console.log(t)})},rowKey:function(e){return e.id},handlePdsEdit:function(e){var t=this,i=e.id,a=e.workFlag,s=e.timerType,o=e.channelId,l=e.detectType,r=e.startDate,n=e.endDate,c=e.channelName,d=e.param;this.temp_pds=Object.assign({},{id:i,workFlag:a,timerType:s,channelId:o,detectType:l,startDate:r,endDate:n,channelName:c,param:this._.cloneDeep(d)}),this.dialogPdsVisible=!0,this.$nextTick(function(){t.$refs["pdsForm"]&&t.$refs["pdsForm"].clearValidate()})},handlePdsSubmit:function(){var e=this;this.$refs["pdsForm"].validate(function(t){if(t){e.sending=!0;var i=e._.cloneDeep(e.temp_pds);k(i).then(function(t){e.$message.success(t.msg);var a=t.data.id;if(a){var s=e.list_pds,o=e._.findIndex(s,{id:a});s.splice(o,1,Object.assign({},s[o],i))}e.dialogPdsVisible=!1,e.sending=!1},function(t){e.sending=!1,console.log(t)})}})},handlePdsDel:function(e){this.temp_pds.param.time.splice(e,1)},handleAddTime:function(){var e={start_time:"00:00:00",end_time:"23:59:59"};this.temp_pds.param.time.push(e)},validatorPdsTime:function(e,t,i){var a=e.field.match(/\.(\d)+\./)[1],s=this.temp_pds.param.time;s[a]["start_time"]&&s[a]["end_time"]?i():i(new Error("请填写正确的时间"))},fetchRobotConf:function(){var e=this.robotId,t=this.temp_config;S({deviceId:e}).then(function(e){var i=e.data;i.forEach(function(e){"FaceSecurityModeThreshold"===e.code?t[e.code]=+e.value:t[e.code]=e.value})},function(e){console.log(e)})},saveConfig:function(e){var t=this,i=1===e?this.$refs["faceSecurityForm"]:2===e?this.$refs["faceForm"]:this.$refs["systemForm"];i.validate(function(i){if(i){var a=t.temp_config,s=t.robotId,o={};switch(e){case 1:var l=a.FaceSecurityModeSwitch,r=a.FaceSecurityModeStartTime,n=a.FaceSecurityModeEndTime,c=a.FaceSecurityModeThreshold,d=a.FaceSecurityModeVisitDuration,p=a.FaceSecurityModeVerificationOverTime;o={FaceSecurityModeSwitch:l,FaceSecurityModeStartTime:r,FaceSecurityModeEndTime:n,FaceSecurityModeThreshold:c,FaceSecurityModeVisitDuration:d,FaceSecurityModeVerificationOverTime:p},t.sending1=!0;break;case 2:var m=a.MegviiFaceIp,h=a.FaceUnrecognitionSaveSwitch,u=a.FaceRecognizedBroadcastSwitch,v=a.FaceRecognizedBroadcastContent,_=a.FaceUnrecognizedBroadcastSwitch,f=a.FaceUnrecognizedBroadcastInterval,g=a.FaceUnrecognizedBroadcastContent;o={MegviiFaceIp:m,FaceUnrecognitionSaveSwitch:h,FaceRecognizedBroadcastSwitch:u,FaceRecognizedBroadcastContent:v,FaceUnrecognizedBroadcastSwitch:_,FaceUnrecognizedBroadcastInterval:f,FaceUnrecognizedBroadcastContent:g},t.sending2=!0;break;default:var b=a.FaceUnattendedVerificationSwitch,w=a.FaceUnattendedRecognizedBroadcastContent,y=a.FaceVipRecognizedBroadcastSwitch,C=a.FaceVipRecognizedBroadcastContent;o={FaceUnattendedVerificationSwitch:b,FaceUnattendedRecognizedBroadcastContent:w,FaceVipRecognizedBroadcastSwitch:y,FaceVipRecognizedBroadcastContent:C},t.sending3=!0}x({deviceId:s,config:o}).then(function(i){1===e?t.sending1=!1:2===e?t.sending2=!1:t.sending3=!1,t.$message.success(i.msg)},function(i){1===e?t.sending1=!1:2===e?t.sending2=!1:t.sending3=!1,console.log(i)})}})}},T(["changeRobotID"]))},z=M,B=(i("00aa"),i("5c42"),Object(f["a"])(z,a,s,!1,null,"2bb0ed58",null));t["default"]=B.exports},"9e1c":function(e,t,i){},f1d2:function(e,t,i){},f77e:function(e,t,i){}}]);
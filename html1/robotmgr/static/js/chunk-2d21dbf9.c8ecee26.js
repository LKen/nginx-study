(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21dbf9"],{d32f:function(t,e,l){"use strict";l.r(e);var a=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"app-container new bg with-pagination"},[l("div",{staticClass:"card"},[l("div",{staticClass:"card-title"},[l("Toolbar",{attrs:{name:t.filename}},[l("span",{staticClass:"action",on:{click:t.getList}},[l("svg-icon",{attrs:{"icon-class":"search"}}),t._v(" "),l("span",{staticClass:"action__desc"},[t._v(t._s(t.$t("base.search")))])],1)])],1),t._v(" "),l("div",{staticClass:"card-body"},[l("el-row",{staticClass:"filter-container",attrs:{gutter:20}},[l("el-col",{attrs:{xs:12,sm:8,md:4}},[l("el-select",{staticClass:"filter-item",attrs:{placeholder:"服务类型",clearable:"",size:t.searchSize},on:{change:t.getList},model:{value:t.listQuery.type,callback:function(e){t.$set(t.listQuery,"type",e)},expression:"listQuery.type"}},[t._l(t.typeList,function(t){return l("el-option",{key:t.type,attrs:{label:t.typeName,value:t.type}})}),t._v(" "),l("svg-icon",{attrs:{slot:"prefix","class-name":"el-input__icon","icon-class":"list"},slot:"prefix"})],2)],1),t._v(" "),l("el-col",{attrs:{xs:12,sm:8,md:4}},[l("el-select",{staticClass:"filter-item",attrs:{placeholder:"状态",clearable:"",size:t.searchSize},on:{change:t.getList},model:{value:t.listQuery.onlineState,callback:function(e){t.$set(t.listQuery,"onlineState",e)},expression:"listQuery.onlineState"}},[l("el-option",{attrs:{label:"离线",value:0}}),t._v(" "),l("el-option",{attrs:{label:"在线",value:1}}),t._v(" "),l("svg-icon",{attrs:{slot:"prefix","class-name":"el-input__icon","icon-class":"list"},slot:"prefix"})],1)],1)],1),t._v(" "),l("div",{staticClass:"card-table"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"dataTable",staticStyle:{width:"100%"},attrs:{data:t.list,"row-key":t.rowKey,fit:"","empty-text":t.emptyText,"highlight-current-row":""}},[l("el-table-column",{attrs:{align:t.tableAlign,label:"ID"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("defaultValue")(e.row.id)))]}}])}),t._v(" "),l("el-table-column",{attrs:{align:t.tableAlign,label:"服务类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterType")(e.row.type)))]}}])}),t._v(" "),l("el-table-column",{attrs:{align:t.tableAlign,label:"公网IP"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("defaultValue")(e.row.ip)))]}}])}),t._v(" "),l("el-table-column",{attrs:{align:t.tableAlign,label:"公网端口"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("defaultValue")(e.row.port)))]}}])}),t._v(" "),l("el-table-column",{attrs:{align:t.tableAlign,label:"当前设备数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("defaultValue")(e.row.deviceCount)))]}}])}),t._v(" "),l("el-table-column",{attrs:{align:t.tableAlign,label:"更新时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("defaultValue")(e.row.updatedate)))]}}])}),t._v(" "),l("el-table-column",{attrs:{align:t.tableAlign,label:"在线状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("g-icon",{class:["card-table__icon",1===e.row.onlineState?"g-color-success":"g-color-danger"],attrs:{"icon-class":1===e.row.onlineState?"online":"offline"}}),t._v("\n              "+t._s(t._f("defaultValue")(1===e.row.onlineState?"在线":"离线"))+"\n            ")]}}])})],1)],1)],1)]),t._v(" "),l("div",{staticClass:"pagination-container"},[l("el-pagination",{attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},n=[],s=l("0a1f"),i=s["user"].findServiceStatus,o=s["user"].findServiceType,r={name:"ServeMonitor",filters:{filterType:function(t){switch(t){case"ss":return"流媒体服务";case"dgw":return"设备网关";case"cgw":return"客户端网关";case"mss":return"媒体调度服务";case"vss":return"视频存储服务";case"vods":return"视频点播服务";default:return"未知"}}},data:function(){return{emptyText:null,list:[],total:null,listLoading:!0,listQuery:{page:1,limit:10,type:null,onlineState:null},dialogTitle:"添加仪表类型",needModal:!0,closeOnClickModel:!1,dialogVisible:!1,sending:!1,typeList:[],filename:this.$t("route.serve-monitor")}},created:function(){},mounted:function(){this.fetchType(),this.getList()},methods:{fetchType:function(){var t=this;o().then(function(e){t.typeList=e.data},function(t){console.log(t)})},getList:function(){var t=this;this.listLoading=!0,this.emptyText=null,i(this.listQuery).then(function(e){t.list=e.data.rows,t.total=e.data.total,t.listLoading=!1},function(e){console.log(e),t.listLoading=!1,t.emptyText="网络错误"})},rowKey:function(t){return t.id},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()}}},c=r,u=l("2877"),d=Object(u["a"])(c,a,n,!1,null,"94134e78",null);e["default"]=d.exports}}]);